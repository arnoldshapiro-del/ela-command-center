<!DOCTYPE html>
<html lang="en">
<head>
  <!-- PWA -->
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#ec4899">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="Ela's Ultima">
  <link rel="apple-touch-icon" href="icons/icon.svg">
  <meta name="mobile-web-app-capable" content="yes">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ela's Ultimate Social Media Command Center V3 - PRO EDITION</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        :root {
            --primary: #4a90e2; --primary-dark: #357abd; --secondary: #64b5f6;
            --accent: #ffd700; --success: #27ae60; --warning: #f39c12; --danger: #e74c3c;
            --navy: #2c3e50; --white: #ffffff; --gray: #7f8c8d; --light-gray: #ecf0f1;
            --pale-blue: #e3f2fd; --sidebar-width: 280px;
            --instagram: #e1306c; --facebook: #1877f2; --youtube: #ff0000; --linkedin: #0077b5;
            --tiktok: #000000; --twitter: #1da1f2;
        }
        body { font-family: 'Segoe UI', Tahoma, sans-serif; background: var(--light-gray); color: var(--navy); display: flex; min-height: 100vh; }

        /* SIDEBAR */
        .sidebar { width: var(--sidebar-width); background: linear-gradient(180deg, var(--navy) 0%, #1a252f 100%); color: white; position: fixed; height: 100vh; overflow-y: auto; z-index: 1000; }
        .sidebar-header { padding: 1.5rem; text-align: center; border-bottom: 1px solid rgba(255,255,255,0.1); background: rgba(0,0,0,0.2); }
        .sidebar-header h1 { font-size: 1.1rem; margin-bottom: 0.3rem; }
        .pro-badge { background: linear-gradient(135deg, var(--accent), #ff6b6b); color: var(--navy); padding: 0.3rem 0.8rem; border-radius: 12px; font-size: 0.7rem; font-weight: 700; animation: pulse 2s infinite; }
        @keyframes pulse { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.05); } }
        .sidebar-nav { padding: 1rem 0; }
        .nav-section-title { padding: 0.5rem 1.5rem; font-size: 0.7rem; text-transform: uppercase; letter-spacing: 1px; opacity: 0.5; }
        .nav-item { display: flex; align-items: center; padding: 0.8rem 1.5rem; cursor: pointer; transition: all 0.2s; border-left: 3px solid transparent; }
        .nav-item:hover { background: rgba(255,255,255,0.1); border-left-color: var(--secondary); }
        .nav-item.active { background: rgba(74,144,226,0.3); border-left-color: var(--accent); }
        .nav-icon { width: 24px; margin-right: 12px; font-size: 1.1rem; }
        .nav-label { flex: 1; font-size: 0.85rem; }
        .nav-badge { background: var(--danger); color: white; padding: 0.15rem 0.5rem; border-radius: 10px; font-size: 0.7rem; }
        .nav-badge.success { background: var(--success); }
        .nav-badge.new { background: linear-gradient(135deg, #667eea, #764ba2); animation: pulse 2s infinite; }

        /* MAIN */
        .main-content { margin-left: var(--sidebar-width); flex: 1; padding: 1.5rem; }
        .page-section { display: none; }
        .page-section.active { display: block; }
        .page-header { background: linear-gradient(135deg, var(--primary), var(--secondary)); color: white; padding: 1.5rem 2rem; border-radius: 15px; margin-bottom: 1.5rem; }
        .page-header h2 { font-size: 1.8rem; margin-bottom: 0.3rem; }
        .page-header p { opacity: 0.9; }

        /* COMPONENTS */
        .card { background: white; border-radius: 12px; padding: 1.5rem; box-shadow: 0 2px 10px rgba(0,0,0,0.08); margin-bottom: 1rem; }
        .card-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem; padding-bottom: 0.8rem; border-bottom: 2px solid var(--light-gray); }
        .card-title { font-size: 1.1rem; font-weight: 600; }
        .btn { padding: 0.6rem 1.2rem; border: none; border-radius: 8px; font-weight: 600; cursor: pointer; transition: all 0.2s; display: inline-flex; align-items: center; gap: 0.4rem; font-size: 0.85rem; }
        .btn-primary { background: var(--primary); color: white; }
        .btn-primary:hover { background: var(--primary-dark); transform: translateY(-1px); }
        .btn-success { background: var(--success); color: white; }
        .btn-warning { background: var(--warning); color: white; }
        .btn-danger { background: var(--danger); color: white; }
        .btn-outline { background: transparent; border: 2px solid var(--primary); color: var(--primary); }
        .btn-outline:hover { background: var(--primary); color: white; }
        .btn-outline.active { background: var(--primary); color: white; }
        .btn-sm { padding: 0.4rem 0.8rem; font-size: 0.8rem; }
        .btn-lg { padding: 0.8rem 1.5rem; font-size: 1rem; }
        .btn-gradient { background: linear-gradient(135deg, #667eea, #764ba2); color: white; }
        .btn-gradient:hover { background: linear-gradient(135deg, #764ba2, #667eea); }

        .grid-2 { display: grid; grid-template-columns: repeat(2, 1fr); gap: 1rem; }
        .grid-3 { display: grid; grid-template-columns: repeat(3, 1fr); gap: 1rem; }
        .grid-4 { display: grid; grid-template-columns: repeat(4, 1fr); gap: 1rem; }
        .grid-5 { display: grid; grid-template-columns: repeat(5, 1fr); gap: 1rem; }
        .grid-6 { display: grid; grid-template-columns: repeat(6, 1fr); gap: 1rem; }
        @media (max-width: 1400px) { .grid-5, .grid-6 { grid-template-columns: repeat(3, 1fr); } }
        @media (max-width: 1200px) { .grid-4, .grid-3 { grid-template-columns: repeat(2, 1fr); } }
        @media (max-width: 768px) { .grid-6, .grid-5, .grid-4, .grid-3, .grid-2 { grid-template-columns: 1fr; } .sidebar { display: none; } .main-content { margin-left: 0; } }

        /* STATS */
        .stat-card { background: white; border-radius: 12px; padding: 1.2rem; text-align: center; box-shadow: 0 2px 10px rgba(0,0,0,0.08); border-left: 4px solid var(--primary); transition: transform 0.2s; }
        .stat-card:hover { transform: translateY(-3px); }
        .stat-card.instagram { border-left-color: var(--instagram); }
        .stat-card.facebook { border-left-color: var(--facebook); }
        .stat-card.youtube { border-left-color: var(--youtube); }
        .stat-card.tiktok { border-left-color: var(--tiktok); }
        .stat-card.success { border-left-color: var(--success); }
        .stat-card.warning { border-left-color: var(--warning); }
        .stat-number { font-size: 2rem; font-weight: 700; color: var(--navy); }
        .stat-label { font-size: 0.85rem; color: var(--gray); }
        .stat-change { font-size: 0.75rem; margin-top: 0.3rem; }
        .stat-change.up { color: var(--success); }
        .stat-change.down { color: var(--danger); }

        /* NEWS */
        .news-item { padding: 1rem; background: var(--pale-blue); border-radius: 8px; margin-bottom: 0.8rem; border-left: 4px solid var(--primary); cursor: pointer; transition: all 0.2s; }
        .news-item:hover { background: #d4e9fc; transform: translateX(5px); }
        .news-item.cincinnati { border-left-color: var(--success); background: #e8f5e9; }
        .news-item.national { border-left-color: var(--primary); }
        .news-item.commercial { border-left-color: var(--warning); background: #fff8e1; }
        .news-item.economy { border-left-color: #9c27b0; background: #f3e5f5; }
        .news-item.rates { border-left-color: var(--danger); background: #ffebee; }
        .news-source { font-size: 0.7rem; text-transform: uppercase; color: var(--gray); margin-bottom: 0.3rem; display: flex; align-items: center; gap: 0.5rem; }
        .news-headline { font-weight: 600; color: var(--navy); font-size: 0.95rem; }
        .news-time { font-size: 0.75rem; color: var(--gray); margin-top: 0.3rem; }
        .live-indicator { width: 8px; height: 8px; background: var(--danger); border-radius: 50%; animation: blink 1s infinite; }
        @keyframes blink { 0%, 100% { opacity: 1; } 50% { opacity: 0.3; } }

        /* REALTOR */
        .realtor-card { background: white; border-radius: 12px; padding: 1.2rem; box-shadow: 0 2px 10px rgba(0,0,0,0.08); margin-bottom: 1rem; cursor: pointer; transition: all 0.2s; position: relative; overflow: hidden; }
        .realtor-card:hover { box-shadow: 0 5px 20px rgba(0,0,0,0.15); transform: translateY(-2px); }
        .realtor-card.cincinnati { border: 2px solid var(--success); }
        .realtor-card.viral { border: 2px solid var(--danger); }
        .realtor-card.viral::before { content: 'ðŸ”¥ VIRAL'; position: absolute; top: 10px; right: -30px; background: var(--danger); color: white; padding: 0.2rem 2rem; font-size: 0.7rem; font-weight: 700; transform: rotate(45deg); }
        .realtor-header { display: flex; align-items: center; gap: 1rem; margin-bottom: 1rem; }
        .realtor-avatar { width: 60px; height: 60px; border-radius: 50%; background: linear-gradient(135deg, var(--primary), var(--secondary)); display: flex; align-items: center; justify-content: center; color: white; font-weight: 700; font-size: 1.2rem; }
        .realtor-avatar img { width: 100%; height: 100%; border-radius: 50%; object-fit: cover; }
        .realtor-name { font-weight: 600; font-size: 1.1rem; }
        .realtor-handle { font-size: 0.85rem; color: var(--primary); }
        .realtor-location { font-size: 0.8rem; color: var(--gray); }
        .cincinnati-badge { background: var(--success); color: white; padding: 0.2rem 0.5rem; border-radius: 4px; font-size: 0.7rem; font-weight: 600; margin-left: 0.5rem; }
        .viral-badge { background: var(--danger); color: white; padding: 0.2rem 0.5rem; border-radius: 4px; font-size: 0.7rem; font-weight: 600; margin-left: 0.5rem; }
        .realtor-stats-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 0.5rem; margin-top: 0.5rem; }
        .realtor-stat { text-align: center; padding: 0.5rem; background: var(--pale-blue); border-radius: 6px; }
        .realtor-stat-num { font-weight: 700; color: var(--navy); }
        .realtor-stat-label { font-size: 0.7rem; color: var(--gray); }

        /* POST CARD */
        .post-card { background: white; border-radius: 12px; padding: 1.2rem; box-shadow: 0 2px 10px rgba(0,0,0,0.08); margin-bottom: 1rem; border: 2px solid transparent; transition: all 0.2s; }
        .post-card:hover { border-color: var(--primary); transform: translateY(-2px); }
        .post-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.8rem; }
        .post-platform { padding: 0.2rem 0.6rem; border-radius: 4px; font-size: 0.75rem; font-weight: 600; }
        .post-platform.instagram { background: #fce4ec; color: var(--instagram); }
        .post-platform.facebook { background: #e3f2fd; color: var(--facebook); }
        .post-platform.video { background: #ffebee; color: var(--youtube); }
        .post-platform.tiktok { background: #f5f5f5; color: var(--tiktok); }
        .post-platform.linkedin { background: #e3f2fd; color: var(--linkedin); }
        .post-title { font-weight: 600; font-size: 1rem; margin-bottom: 0.5rem; }
        .post-content { background: var(--pale-blue); padding: 1rem; border-radius: 8px; max-height: 200px; overflow-y: auto; white-space: pre-wrap; font-size: 0.9rem; line-height: 1.5; }
        .post-hashtags { font-size: 0.8rem; color: var(--primary); margin-top: 0.5rem; word-wrap: break-word; }
        .post-meta { display: flex; gap: 1rem; margin-top: 0.8rem; font-size: 0.8rem; color: var(--gray); }
        .post-actions { display: flex; gap: 0.5rem; margin-top: 1rem; flex-wrap: wrap; }

        /* CALENDAR */
        .calendar-container { background: white; border-radius: 12px; padding: 1.5rem; }
        .calendar-header-row { display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem; }
        .calendar-grid { display: grid; grid-template-columns: repeat(7, 1fr); gap: 2px; }
        .calendar-day-header { background: var(--navy); color: white; padding: 0.8rem; text-align: center; font-weight: 600; font-size: 0.8rem; }
        .calendar-day { background: var(--light-gray); min-height: 100px; padding: 0.5rem; cursor: pointer; transition: all 0.2s; }
        .calendar-day:hover { background: var(--pale-blue); }
        .calendar-day.today { background: #fff3cd; }
        .calendar-day.other-month { opacity: 0.4; }
        .calendar-day-num { font-weight: 600; margin-bottom: 0.3rem; }
        .calendar-event { background: var(--primary); color: white; padding: 0.2rem 0.4rem; border-radius: 4px; font-size: 0.7rem; margin-bottom: 0.2rem; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
        .calendar-event.instagram { background: var(--instagram); }
        .calendar-event.facebook { background: var(--facebook); }

        /* FORMS */
        .form-group { margin-bottom: 1rem; }
        .form-label { display: block; font-weight: 600; margin-bottom: 0.4rem; font-size: 0.9rem; }
        .form-input, .form-textarea, .form-select { width: 100%; padding: 0.8rem; border: 2px solid var(--light-gray); border-radius: 8px; font-size: 0.9rem; transition: border-color 0.2s; }
        .form-input:focus, .form-textarea:focus, .form-select:focus { outline: none; border-color: var(--primary); }
        .form-textarea { min-height: 120px; resize: vertical; }

        /* TABS */
        .tabs { display: flex; gap: 0.5rem; margin-bottom: 1.5rem; flex-wrap: wrap; }
        .tab { padding: 0.6rem 1.2rem; border: 2px solid var(--light-gray); background: white; cursor: pointer; font-weight: 600; color: var(--gray); border-radius: 8px; transition: all 0.2s; }
        .tab:hover { border-color: var(--primary); color: var(--primary); }
        .tab.active { background: var(--primary); color: white; border-color: var(--primary); }

        /* TOAST */
        .toast { position: fixed; top: 20px; right: 20px; background: var(--success); color: white; padding: 1rem 1.5rem; border-radius: 10px; box-shadow: 0 5px 20px rgba(0,0,0,0.2); z-index: 9999; opacity: 0; transform: translateY(-20px); transition: all 0.3s; font-weight: 600; }
        .toast.show { opacity: 1; transform: translateY(0); }
        .toast.error { background: var(--danger); }
        .toast.warning { background: var(--warning); }

        /* MODAL */
        .modal-overlay { position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.5); display: none; align-items: center; justify-content: center; z-index: 9998; }
        .modal-overlay.show { display: flex; }
        .modal { background: white; border-radius: 15px; max-width: 800px; width: 90%; max-height: 85vh; overflow-y: auto; }
        .modal-header { padding: 1.5rem; border-bottom: 2px solid var(--light-gray); display: flex; justify-content: space-between; align-items: center; }
        .modal-header h3 { font-size: 1.3rem; }
        .modal-close { background: none; border: none; font-size: 1.5rem; cursor: pointer; color: var(--gray); }
        .modal-body { padding: 1.5rem; }
        .modal-footer { padding: 1rem 1.5rem; border-top: 2px solid var(--light-gray); display: flex; justify-content: flex-end; gap: 0.5rem; }

        /* TRENDING */
        .trending-item { background: white; border-radius: 12px; padding: 1.2rem; margin-bottom: 1rem; border-left: 4px solid var(--accent); }
        .trending-rank { font-size: 1.5rem; font-weight: 700; color: var(--accent); }
        .trending-content { flex: 1; }
        .trending-type { font-size: 0.75rem; background: var(--pale-blue); padding: 0.2rem 0.5rem; border-radius: 4px; display: inline-block; margin-bottom: 0.3rem; }
        .engagement-bar { height: 8px; background: var(--light-gray); border-radius: 4px; overflow: hidden; margin-top: 0.5rem; }
        .engagement-fill { height: 100%; background: linear-gradient(90deg, var(--success), var(--accent)); border-radius: 4px; transition: width 0.5s; }

        /* VIRAL CONTENT */
        .viral-content-card { background: linear-gradient(135deg, #fff5f5, #fff); border: 2px solid #ffcdd2; border-radius: 12px; padding: 1.2rem; margin-bottom: 1rem; position: relative; }
        .viral-content-card::before { content: 'ðŸ”¥'; position: absolute; top: -10px; right: 10px; font-size: 1.5rem; }
        .viral-source { display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.5rem; }
        .viral-metrics { display: flex; gap: 1rem; font-size: 0.85rem; color: var(--gray); margin-top: 0.5rem; }

        /* SCROLLBAR */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: var(--light-gray); border-radius: 10px; }
        ::-webkit-scrollbar-thumb { background: var(--primary); border-radius: 10px; }

        /* BACK BUTTON */
        .back-btn { position: fixed; top: 12px; left: 295px; z-index: 1001; background: white; border: none; width: 36px; height: 36px; border-radius: 50%; cursor: pointer; box-shadow: 0 2px 10px rgba(0,0,0,0.15); display: flex; align-items: center; justify-content: center; font-size: 1.2rem; color: var(--navy); transition: all 0.2s; }
        .back-btn:hover { background: var(--primary); color: white; transform: scale(1.1); }
        .back-btn.hidden { opacity: 0; pointer-events: none; }

        /* LOADING */
        .loading { display: inline-block; width: 20px; height: 20px; border: 3px solid var(--light-gray); border-radius: 50%; border-top-color: var(--primary); animation: spin 1s ease-in-out infinite; }
        .spinner { display: inline-block; width: 40px; height: 40px; border: 4px solid #e0e0e0; border-radius: 50%; border-top-color: #667eea; animation: spin 1s ease-in-out infinite; }
        @keyframes spin { to { transform: rotate(360deg); } }

        /* FEATURE HIGHLIGHT */
        .feature-new { position: relative; }
        .feature-new::after { content: 'NEW'; position: absolute; top: -5px; right: -5px; background: linear-gradient(135deg, #667eea, #764ba2); color: white; padding: 0.1rem 0.4rem; border-radius: 4px; font-size: 0.6rem; font-weight: 700; }
    </style>
</head>
<body>
    <!-- BACK BUTTON -->
    <button class="back-btn hidden" id="backBtn" onclick="goBack()" title="Go Back">&#8592;</button>

    <!-- SIDEBAR -->
    <nav class="sidebar">
        <div class="sidebar-header">
            <h1>Ela's Command Center</h1>
            <span class="pro-badge">&#9733; PRO V3 &#9733;</span>
        </div>
        <div class="sidebar-nav">
            <div class="nav-section-title">Main</div>
            <div class="nav-item active" data-page="dashboard"><span class="nav-icon">&#127968;</span><span class="nav-label">Dashboard</span></div>
            <div class="nav-item" data-page="news"><span class="nav-icon">&#128240;</span><span class="nav-label">Live News Feed</span><span class="nav-badge success">50+</span></div>
            <div class="nav-item" data-page="realtors"><span class="nav-icon">&#11088;</span><span class="nav-label">Viral Realtors</span><span class="nav-badge new">LIVE</span></div>
            <div class="nav-item" data-page="viral"><span class="nav-icon">&#128293;</span><span class="nav-label">Viral Content</span><span class="nav-badge new">NEW</span></div>

            <div class="nav-section-title">Content</div>
            <div class="nav-item" data-page="generator"><span class="nav-icon">&#129302;</span><span class="nav-label">AI Generator</span></div>
            <div class="nav-item" data-page="library"><span class="nav-icon">&#128218;</span><span class="nav-label">Content Library</span><span class="nav-badge">100+</span></div>
            <div class="nav-item" data-page="scripts"><span class="nav-icon">&#127909;</span><span class="nav-label">Video Scripts</span><span class="nav-badge new">NEW</span></div>
            <div class="nav-item" data-page="scheduler"><span class="nav-icon">&#128197;</span><span class="nav-label">Post Scheduler</span></div>

            <div class="nav-section-title">Publish</div>
            <div class="nav-item" data-page="posting"><span class="nav-icon">&#128228;</span><span class="nav-label">Direct Posting</span></div>
            <div class="nav-item" data-page="autopost"><span class="nav-icon">&#9881;</span><span class="nav-label">Auto-Post Setup</span><span class="nav-badge new">NEW</span></div>

            <div class="nav-section-title">Intelligence</div>
            <div class="nav-item" data-page="analytics"><span class="nav-icon">&#128202;</span><span class="nav-label">Analytics Pro</span></div>
            <div class="nav-item" data-page="competitors"><span class="nav-icon">&#128373;</span><span class="nav-label">Competitor Intel</span><span class="nav-badge new">NEW</span></div>
            <div class="nav-item" data-page="hashtags"><span class="nav-icon">#</span><span class="nav-label">Hashtag Research</span><span class="nav-badge new">NEW</span></div>
            <div class="nav-item" data-page="neighborhoods"><span class="nav-icon">&#127969;</span><span class="nav-label">Market Reports</span><span class="nav-badge new">NEW</span></div>

            <div class="nav-section-title">Growth</div>
            <div class="nav-item" data-page="leads"><span class="nav-icon">&#128101;</span><span class="nav-label">Lead Generator</span><span class="nav-badge new">NEW</span></div>
            <div class="nav-item" data-page="email"><span class="nav-icon">&#128231;</span><span class="nav-label">Email Templates</span><span class="nav-badge new">NEW</span></div>

            <div class="nav-section-title">AI Tools</div>
            <div class="nav-item" data-page="ai-writer"><span class="nav-icon">&#129302;</span><span class="nav-label">AI Writer</span><span class="nav-badge" style="background: linear-gradient(135deg, #667eea, #764ba2); color: white;">AI</span></div>
            <div class="nav-item" data-page="ai-assistant"><span class="nav-icon">&#128172;</span><span class="nav-label">AI Assistant</span><span class="nav-badge" style="background: linear-gradient(135deg, #667eea, #764ba2); color: white;">AI</span></div>
            <div class="nav-item" data-page="ai-property"><span class="nav-icon">&#127969;</span><span class="nav-label">Property Analyzer</span><span class="nav-badge new">NEW</span></div>
            <div class="nav-item" data-page="ai-matcher"><span class="nav-icon">&#129309;</span><span class="nav-label">Client Matcher</span><span class="nav-badge new">NEW</span></div>
            <div class="nav-item" data-page="ai-predictor"><span class="nav-icon">&#128202;</span><span class="nav-label">Market Predictor</span><span class="nav-badge new">NEW</span></div>
            <div class="nav-item" data-page="ai-objections"><span class="nav-icon">&#128173;</span><span class="nav-label">Objection Handler</span><span class="nav-badge new">NEW</span></div>
            <div class="nav-item" data-page="ai-neighborhood"><span class="nav-icon">&#127961;</span><span class="nav-label">Neighborhood Expert</span><span class="nav-badge new">NEW</span></div>
            <div class="nav-item" data-page="ai-openhouse"><span class="nav-icon">&#127970;</span><span class="nav-label">Open House AI</span><span class="nav-badge new">NEW</span></div>
            <div class="nav-item" data-page="ai-contract"><span class="nav-icon">&#128220;</span><span class="nav-label">Contract Reviewer</span><span class="nav-badge new">NEW</span></div>

            <div class="nav-section-title">System</div>
            <div class="nav-item" data-page="settings"><span class="nav-icon">&#9881;</span><span class="nav-label">Settings</span></div>
            <div class="nav-item" data-page="manual"><span class="nav-icon">&#128214;</span><span class="nav-label">User Manual</span></div>
        </div>
    </nav>

    <!-- MAIN CONTENT -->
    <main class="main-content">
        <div class="toast" id="toast"></div>
        <div id="page-container"></div>
    </main>

    <!-- MODAL -->
    <div class="modal-overlay" id="modalOverlay">
        <div class="modal">
            <div class="modal-header">
                <h3 id="modalTitle">Modal</h3>
                <button class="modal-close" onclick="closeModal()">&times;</button>
            </div>
            <div class="modal-body" id="modalBody"></div>
            <div class="modal-footer" id="modalFooter"></div>
        </div>
    </div>

<script>
// ========== LIVE DATA - UPDATED JANUARY 2026 ==========
const LIVE_DATA = {
    mortgageRate: 6.06,
    rateChange: -0.10,
    rateSource: "Freddie Mac",
    lastUpdated: new Date().toISOString(),
    date: new Date().toLocaleDateString('en-US', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' }),
    cincinnatiMedianPrice: 285000,
    cincinnatiPriceChange: 8.7,
    nationalMedianPrice: 410000,
    inventory: 2.3,
    ela: {
        name: "Ela Mildner-Shapiro",
        phone: "(513) 703-4202",
        website: "mshapiro.agents.sibcycline.com",
        experience: "22 years",
        brokerage: "Sibcy Cline Realtors"
    }
};

// ========== EXPANDED NEWS - 50+ SOURCES ==========
const NEWS = {
    cincinnati: [
        { source: "Local12 WKRC", headline: "Cincinnati Housing Market Shows Strong Activity - Buyers Have More Options in 2026", time: "1 hour ago", url: "https://local12.com", live: true },
        { source: "Cincinnati Business Courier", headline: "Greater Cincinnati Median Home Price Hits $285K, Up 8.7% Year-Over-Year", time: "2 hours ago", url: "https://bizjournals.com/cincinnati" },
        { source: "REALTOR Alliance Cincinnati", headline: "Winter Market Update: Less Competition Means Better Deals for Buyers", time: "3 hours ago", url: "#" },
        { source: "Bisnow Cincinnati", headline: "New Mixed-Use Development Breaking Ground in Over-the-Rhine", time: "4 hours ago", url: "https://bisnow.com" },
        { source: "Cincinnati Enquirer", headline: "Mason School District Continues to Drive Warren County Home Demand", time: "5 hours ago", url: "https://cincinnati.com" },
        { source: "Cushman & Wakefield", headline: "Hyde Park Remains Top Neighborhood for Luxury Sales in Greater Cincinnati", time: "6 hours ago", url: "#" },
        { source: "Local12 WKRC", headline: "Northern Kentucky Real Estate Continues Strong Growth into 2026", time: "7 hours ago", url: "https://local12.com" },
        { source: "Cincinnati Business Courier", headline: "Fort Thomas Home Values See 5% Appreciation Year-Over-Year", time: "8 hours ago", url: "https://bizjournals.com/cincinnati" },
        { source: "WCPO Cincinnati", headline: "Anderson Township Sees Surge in Family Home Sales This Winter", time: "9 hours ago", url: "https://wcpo.com" },
        { source: "Coldwell Banker Cincinnati", headline: "Cincinnati Named Top 10 City for First-Time Homebuyers in 2026", time: "10 hours ago", url: "#" },
        { source: "Bisnow Cincinnati", headline: "Downtown Cincinnati Office Market Adapts to Hybrid Work Model", time: "11 hours ago", url: "https://bisnow.com" },
        { source: "REALTOR Alliance Cincinnati", headline: "Blue Ash Commercial Real Estate Attracts Tech Companies", time: "12 hours ago", url: "#" }
    ],
    national: [
        { source: "Freddie Mac", headline: "30-Year Mortgage Rates Fall to 6.06% - Lowest Since December 2024", time: "1 hour ago", url: "https://freddiemac.com", live: true, isRates: true },
        { source: "NAR", headline: "National Association of Realtors Predicts 14% Increase in Home Sales for 2026", time: "2 hours ago", url: "https://nar.realtor" },
        { source: "HousingWire", headline: "Mortgage Rates Expected to Stay in Low 6% Range Throughout 2026", time: "3 hours ago", url: "https://housingwire.com" },
        { source: "Inman News", headline: "Remote Work Continues to Drive Suburban and Midwest Market Demand", time: "4 hours ago", url: "https://inman.com" },
        { source: "Realtor.com", headline: "Home Prices Rising Faster in Northeast and Midwest vs South and West", time: "5 hours ago", url: "https://realtor.com" },
        { source: "Yahoo Finance", headline: "Some Analysts Predict Mortgage Rates Could Dip to 5s by Q1 2026", time: "6 hours ago", url: "https://finance.yahoo.com" },
        { source: "NAR", headline: "Millennials Now Largest Home-Buying Generation - 43% of All Purchases", time: "7 hours ago", url: "https://nar.realtor" },
        { source: "HousingWire", headline: "New Construction Starts Rising to Meet Demand in Growth Markets", time: "8 hours ago", url: "https://housingwire.com" },
        { source: "Bankrate", headline: "Today's 30-Year Fixed Mortgage Rate: 6.11% Average Across Lenders", time: "9 hours ago", url: "https://bankrate.com" },
        { source: "Fortune", headline: "Housing Inventory Slowly Improving Nationwide - 2.3 Months Supply", time: "10 hours ago", url: "https://fortune.com" }
    ],
    commercial: [
        { source: "Bisnow Cincinnati", headline: "Cincinnati Office Market Vacancy Rates Declining as Companies Return", time: "3 hours ago", url: "https://bisnow.com" },
        { source: "Cincinnati Business Courier", headline: "Industrial Real Estate Demand Strong in Greater Cincinnati Logistics Hub", time: "5 hours ago", url: "https://bizjournals.com/cincinnati" },
        { source: "CoStar", headline: "Northern Kentucky Logistics Hub Attracting Amazon, DHL Expansion", time: "7 hours ago", url: "https://costar.com" },
        { source: "Bisnow Cincinnati", headline: "Retail Space Repurposing Creates New Mixed-Use Opportunities", time: "9 hours ago", url: "https://bisnow.com" },
        { source: "CBRE Cincinnati", headline: "Multifamily Investment Activity Strong in Greater Cincinnati MSA", time: "11 hours ago", url: "https://cbre.com" }
    ],
    economy: [
        { source: "Federal Reserve", headline: "Fed Signals Potential Rate Cuts Later in 2026 if Inflation Continues Cooling", time: "2 hours ago", url: "https://federalreserve.gov", live: true },
        { source: "Bureau of Labor Statistics", headline: "January Jobs Report Shows Continued Labor Market Strength", time: "4 hours ago", url: "https://bls.gov" },
        { source: "Wall Street Journal", headline: "Consumer Confidence Index Rises to 18-Month High", time: "6 hours ago", url: "https://wsj.com" },
        { source: "CNBC", headline: "Stock Market Rally Continues - S&P 500 Near All-Time Highs", time: "8 hours ago", url: "https://cnbc.com" },
        { source: "Reuters", headline: "US GDP Growth Expected to Remain Steady at 2.5% for 2026", time: "10 hours ago", url: "https://reuters.com" }
    ]
};

// ========== VIRAL REALTORS - NATIONAL (LIVE DATA JAN 2026) ==========
const VIRAL_REALTORS = {
    national: [
        {
            name: "Daniel M. Heider",
            handle: "@heider_realestate",
            platform: "TikTok",
            followers: "3.7M",
            followersNum: 3700000,
            location: "Washington DC/MD/VA",
            brokerage: "TTR Sotheby's International Realty",
            specialty: "Luxury homes, first-time buyers, viral educational content",
            transactions: "150+/year",
            avgPrice: "$1.5M+",
            topContent: "Property tours, market updates, buyer tips, trending sounds",
            recentViralPost: "Luxury DC townhome tour - 15M views",
            tip: "Uses trending TikTok sounds and quick cuts. Posts 3-5 times daily. Mixes luxury tours with relatable buyer advice.",
            isViral: true,
            engagement: "4.2%",
            photo: "https://ui-avatars.com/api/?name=Daniel+Heider&background=e1306c&color=fff&size=200",
            bio: "Top-producing agent in DC metro area. Star of viral TikTok real estate content with 3.7M followers. Known for fast-paced property tours and first-time buyer tips.",
            socialLinks: {
                tiktok: { url: "https://www.tiktok.com/@heider_realestate", followers: "3.7M", handle: "@heider_realestate" },
                instagram: { url: "https://www.instagram.com/heider_realestate", followers: "285K", handle: "@heider_realestate" },
                youtube: { url: "https://www.youtube.com/@heider_realestate", followers: "150K", handle: "@heider_realestate" },
                website: { url: "https://www.danielheider.com", followers: "", handle: "danielheider.com" }
            }
        },
        {
            name: "Tatiana Londono",
            handle: "@tatlondono",
            platform: "TikTok",
            followers: "2.7M",
            followersNum: 2700000,
            location: "Miami/Multi-market",
            brokerage: "One Sotheby's International Realty",
            specialty: "Real estate coaching, investing, money tips, luxury properties",
            transactions: "Coach/Agent",
            avgPrice: "Luxury",
            topContent: "Investment strategies, wealth building, motivation, Miami luxury tours",
            recentViralPost: "How I bought my first property at 23 - 8M views",
            tip: "Focuses on wealth-building narrative. Appeals to young investors. High energy, direct to camera content.",
            isViral: true,
            engagement: "5.1%",
            photo: "https://ui-avatars.com/api/?name=Tatiana+Londono&background=e1306c&color=fff&size=200",
            bio: "Miami-based luxury realtor and social media sensation. Known for blending real estate expertise with wealth-building content for young professionals.",
            socialLinks: {
                tiktok: { url: "https://www.tiktok.com/@tatlondono", followers: "2.7M", handle: "@tatlondono" },
                instagram: { url: "https://www.instagram.com/tatlondono", followers: "318K", handle: "@tatlondono" },
                youtube: { url: "https://www.youtube.com/@tatianalondono", followers: "50K", handle: "@TatianaLondono" },
                linkedin: { url: "https://www.linkedin.com/in/tatianalondono", followers: "15K", handle: "tatianalondono" }
            }
        },
        {
            name: "Grant Cardone",
            handle: "@grantcardone",
            platform: "Instagram",
            followers: "5.1M",
            followersNum: 5100000,
            location: "Miami/Multi-market",
            brokerage: "Cardone Capital",
            specialty: "Commercial real estate, motivation, investing",
            transactions: "$5B AUM",
            avgPrice: "Commercial",
            topContent: "Motivation, wealth tips, property tours, lifestyle",
            recentViralPost: "10X your income challenge - 5M views",
            tip: "High energy, controversial takes drive engagement. Posts multiple times daily across all platforms.",
            isViral: true,
            engagement: "3.8%",
            photo: "https://ui-avatars.com/api/?name=Grant+Cardone&background=1877f2&color=fff&size=200",
            bio: "CEO of Cardone Capital with $5B+ AUM. Bestselling author of The 10X Rule. Real estate mogul and motivational speaker with massive social following.",
            socialLinks: {
                instagram: { url: "https://www.instagram.com/grantcardone", followers: "5.1M", handle: "@grantcardone" },
                tiktok: { url: "https://www.tiktok.com/@grantcardone", followers: "2.5M", handle: "@grantcardone" },
                youtube: { url: "https://www.youtube.com/@GrantCardone", followers: "1.2M", handle: "@GrantCardone" },
                twitter: { url: "https://twitter.com/GrantCardone", followers: "1.8M", handle: "@GrantCardone" },
                linkedin: { url: "https://www.linkedin.com/in/grantcardone", followers: "3.5M", handle: "grantcardone" },
                facebook: { url: "https://www.facebook.com/grantcardonefan", followers: "4.2M", handle: "grantcardonefan" },
                website: { url: "https://www.grantcardone.com", followers: "", handle: "grantcardone.com" }
            }
        },
        {
            name: "Fredrik Eklund",
            handle: "@fredrikeklundny",
            platform: "Instagram",
            followers: "1.5M",
            followersNum: 1500000,
            location: "New York",
            brokerage: "Douglas Elliman",
            specialty: "Luxury listings, high energy personality, TV star",
            transactions: "500+/year",
            avgPrice: "$5M+",
            topContent: "Luxury property tours, behind the scenes, lifestyle vlogs",
            recentViralPost: "$50M penthouse tour - 3M views",
            tip: "Uses HIGH energy and humor to stand out. Mix of luxury listings and personal moments. Posts multiple times daily.",
            isViral: true,
            engagement: "2.9%",
            photo: "https://ui-avatars.com/api/?name=Fredrik+Eklund&background=e1306c&color=fff&size=200",
            bio: "Star of Million Dollar Listing New York. Swedish-born luxury broker with $15B+ in career sales. Known for signature high kicks and boundless energy.",
            socialLinks: {
                instagram: { url: "https://www.instagram.com/fredrikeklundny", followers: "1.5M", handle: "@fredrikeklundny" },
                tiktok: { url: "https://www.tiktok.com/@fredrikeklundny0", followers: "200K", handle: "@fredrikeklundny0" },
                twitter: { url: "https://twitter.com/FredrikEklundNY", followers: "275K", handle: "@FredrikEklundNY" },
                youtube: { url: "https://www.youtube.com/@FredrikEklund", followers: "75K", handle: "@FredrikEklund" },
                facebook: { url: "https://www.facebook.com/FredrikEklundNY", followers: "950K", handle: "FredrikEklundNY" },
                linkedin: { url: "https://www.linkedin.com/in/fredrikeklund", followers: "50K", handle: "fredrikeklund" },
                website: { url: "https://www.fredrikeklund.com", followers: "", handle: "fredrikeklund.com" }
            }
        },
        {
            name: "Ryan Serhant",
            handle: "@ryanserhant",
            platform: "Multi-platform",
            followers: "3.2M+",
            followersNum: 3200000,
            location: "New York",
            brokerage: "SERHANT.",
            specialty: "Business advice, property tours, motivation",
            transactions: "300+/year",
            avgPrice: "$3M+",
            topContent: "Educational content, motivation, luxury tours",
            recentViralPost: "How I built a $1B brokerage - 4M views",
            tip: "Built a media company around his brand. Focuses on teaching and inspiring agents. Long-form YouTube + short clips.",
            isViral: true,
            engagement: "3.2%",
            photo: "https://ui-avatars.com/api/?name=Ryan+Serhant&background=ff0000&color=fff&size=200",
            bio: "Founder & CEO of SERHANT. Star of Million Dollar Listing NY. Bestselling author of 'Sell It Like Serhant'. Built brokerage from scratch to $5B+ in annual sales.",
            socialLinks: {
                instagram: { url: "https://www.instagram.com/ryanserhant", followers: "3.2M", handle: "@ryanserhant" },
                tiktok: { url: "https://www.tiktok.com/@ryanserhant", followers: "1.3M", handle: "@ryanserhant" },
                youtube: { url: "https://www.youtube.com/@RyanSerhant", followers: "1.5M", handle: "@RyanSerhant" },
                twitter: { url: "https://twitter.com/RyanSerhant", followers: "450K", handle: "@RyanSerhant" },
                linkedin: { url: "https://www.linkedin.com/in/ryanserhant", followers: "350K", handle: "ryanserhant" },
                facebook: { url: "https://www.facebook.com/RyanSerhant", followers: "1.2M", handle: "RyanSerhant" },
                website: { url: "https://www.serhant.com", followers: "", handle: "serhant.com" }
            }
        },
        {
            name: "Barbara Corcoran",
            handle: "@barbaracorcoran",
            platform: "Instagram",
            followers: "1.3M",
            followersNum: 1300000,
            location: "New York",
            brokerage: "Investor/Shark Tank",
            specialty: "Market insights, business tips, Shark Tank",
            transactions: "Investor",
            avgPrice: "N/A",
            topContent: "Business tips, Shark Tank moments, motivation",
            recentViralPost: "Why I passed on Uber - 6M views",
            tip: "Leverages TV fame. Shares bite-sized business wisdom. Very authentic and relatable despite success.",
            isViral: true,
            engagement: "4.5%",
            photo: "https://ui-avatars.com/api/?name=Barbara+Corcoran&background=f39c12&color=fff&size=200",
            bio: "Founder of The Corcoran Group (sold for $66M). Star of ABC's Shark Tank. Real estate legend who turned $1,000 loan into a billion-dollar empire.",
            socialLinks: {
                instagram: { url: "https://www.instagram.com/barbaracorcoran", followers: "1.3M", handle: "@barbaracorcoran" },
                tiktok: { url: "https://www.tiktok.com/@barbaracorcoran", followers: "800K", handle: "@barbaracorcoran" },
                youtube: { url: "https://www.youtube.com/@BarbaraCorcoran", followers: "200K", handle: "@BarbaraCorcoran" },
                twitter: { url: "https://twitter.com/BarbaraCorcoran", followers: "650K", handle: "@BarbaraCorcoran" },
                linkedin: { url: "https://www.linkedin.com/in/barbaracorcoran", followers: "450K", handle: "barbaracorcoran" },
                facebook: { url: "https://www.facebook.com/BarbaraCorcoranBusiness", followers: "1.1M", handle: "BarbaraCorcoranBusiness" },
                website: { url: "https://www.barbaracorcoran.com", followers: "", handle: "barbaracorcoran.com" }
            }
        },
        {
            name: "Glennda Baker",
            handle: "@glenndabaker",
            platform: "TikTok/Instagram",
            followers: "874K+",
            followersNum: 874000,
            location: "Atlanta",
            brokerage: "Coldwell Banker Realty",
            specialty: "Fun, educational, authentic, star sweaters",
            transactions: "100+/year",
            avgPrice: "$400K",
            topContent: "Humor, real talk, client stories, market tips",
            recentViralPost: "What your realtor won't tell you - 2M views",
            tip: "PROVES you don't need luxury to go viral! Authentic personality + humor resonates with everyday buyers. Signature star sweaters.",
            isViral: true,
            engagement: "6.2%",
            photo: "https://ui-avatars.com/api/?name=Glennda+Baker&background=27ae60&color=fff&size=200",
            bio: "Atlanta realtor famous for straight-talking humor and signature star sweaters. Proves you don't need luxury listings to build a massive following - just authenticity!",
            socialLinks: {
                tiktok: { url: "https://www.tiktok.com/@glenndabaker", followers: "874K", handle: "@glenndabaker" },
                instagram: { url: "https://www.instagram.com/glenndabaker", followers: "300K", handle: "@glenndabaker" },
                youtube: { url: "https://www.youtube.com/@GlenndaBaker", followers: "50K", handle: "@GlenndaBaker" },
                linkedin: { url: "https://www.linkedin.com/in/glenndabaker", followers: "10K", handle: "glenndabaker" },
                facebook: { url: "https://www.facebook.com/GlenndaBakerRealtor", followers: "75K", handle: "GlenndaBakerRealtor" },
                website: { url: "https://www.glennda.net", followers: "", handle: "glennda.net" }
            }
        },
        {
            name: "Josh Altman",
            handle: "@thejoshaltman",
            platform: "Instagram",
            followers: "835K",
            followersNum: 835000,
            location: "Los Angeles",
            brokerage: "Douglas Elliman",
            specialty: "Luxury deals, negotiation tips, Million Dollar Listing",
            transactions: "200+/year",
            avgPrice: "$10M+",
            topContent: "Mansion tours, deal breakdowns, lifestyle",
            recentViralPost: "$30M Beverly Hills estate tour - 2.5M views",
            tip: "Shows glamorous side of luxury real estate. Great storytelling around each property sale. TV star credibility.",
            isViral: true,
            engagement: "2.4%",
            photo: "https://ui-avatars.com/api/?name=Josh+Altman&background=9c27b0&color=fff&size=200",
            bio: "Star of Million Dollar Listing LA. $5B+ in career sales. Known for aggressive negotiation tactics and luxury Beverly Hills listings.",
            socialLinks: {
                instagram: { url: "https://www.instagram.com/thejoshaltman", followers: "835K", handle: "@thejoshaltman" },
                tiktok: { url: "https://www.tiktok.com/@thejoshaltman", followers: "400K", handle: "@thejoshaltman" },
                youtube: { url: "https://www.youtube.com/@JoshAltman", followers: "100K", handle: "@JoshAltman" },
                twitter: { url: "https://twitter.com/thejoshaltman", followers: "150K", handle: "@thejoshaltman" },
                facebook: { url: "https://www.facebook.com/TheJoshAltman", followers: "500K", handle: "TheJoshAltman" },
                linkedin: { url: "https://www.linkedin.com/in/joshaltman", followers: "75K", handle: "joshaltman" },
                website: { url: "https://www.thealtmanbrothers.com", followers: "", handle: "thealtmanbrothers.com" }
            }
        },
        {
            name: "Chad Carroll",
            handle: "@chadcarroll",
            platform: "Instagram",
            followers: "500K",
            followersNum: 500000,
            location: "Miami",
            brokerage: "Compass",
            specialty: "Miami luxury, waterfront homes, #1 at Compass FL",
            transactions: "150+/year",
            avgPrice: "$5M+",
            topContent: "Miami luxury tours, waterfront homes, lifestyle",
            recentViralPost: "Star Island mansion tour - 1.8M views",
            tip: "Focuses on aspirational Miami lifestyle. Properties sell the DREAM, not just the home. $8B+ career sales.",
            isViral: true,
            engagement: "2.1%",
            photo: "https://ui-avatars.com/api/?name=Chad+Carroll&background=00bcd4&color=fff&size=200",
            bio: "#1 Agent at Compass Florida. $8B+ in career sales. Miami luxury waterfront specialist featured on CNBC, Forbes, and Wall Street Journal.",
            socialLinks: {
                instagram: { url: "https://www.instagram.com/chadcarroll", followers: "500K", handle: "@chadcarroll" },
                youtube: { url: "https://www.youtube.com/@ChadCarroll", followers: "75K", handle: "@ChadCarroll" },
                facebook: { url: "https://www.facebook.com/ChadCarrollGroup", followers: "200K", handle: "ChadCarrollGroup" },
                linkedin: { url: "https://www.linkedin.com/in/chadcarroll", followers: "50K", handle: "chadcarroll" },
                twitter: { url: "https://twitter.com/cikicarroll", followers: "25K", handle: "@cikicarroll" },
                website: { url: "https://www.chadcarrollgroup.com", followers: "", handle: "chadcarrollgroup.com" }
            }
        },
        {
            name: "Zachary Loft",
            handle: "@zacharyloft",
            platform: "TikTok",
            followers: "1.8M",
            followersNum: 1800000,
            location: "Multi-market",
            specialty: "Housing market analysis, inflation, economic news",
            transactions: "Analyst",
            avgPrice: "N/A",
            topContent: "Market predictions, housing data, billionaire receipts",
            recentViralPost: "Why home prices won't crash - 10M views",
            tip: "Data-driven content with 'receipts'. Appeals to analytical buyers. Explains complex topics simply.",
            isViral: true,
            engagement: "4.8%",
            photo: "https://ui-avatars.com/api/?name=Zachary+Loft&background=607d8b&color=fff&size=200",
            bio: "Housing market analyst and TikTok educator. Known for data-driven takes with 'receipts'. Makes complex economic topics accessible to everyday buyers.",
            socialLinks: {
                tiktok: { url: "https://www.tiktok.com/@zacharyloft", followers: "1.8M", handle: "@zacharyloft" },
                instagram: { url: "https://www.instagram.com/zacharyloft", followers: "150K", handle: "@zacharyloft" },
                youtube: { url: "https://www.youtube.com/@ZacharyLoft", followers: "100K", handle: "@ZacharyLoft" },
                twitter: { url: "https://twitter.com/zacharyloft", followers: "50K", handle: "@zacharyloft" }
            }
        },
        {
            name: "Tom Ferry",
            handle: "@tomferry",
            platform: "YouTube/Instagram",
            followers: "1.2M+",
            followersNum: 1200000,
            location: "Orange County",
            brokerage: "Tom Ferry International",
            specialty: "Real estate coaching, business growth, motivation",
            transactions: "Coach",
            avgPrice: "N/A",
            topContent: "Agent training, scripts, market strategies, motivation",
            recentViralPost: "The 5 things killing your real estate business - 2M views",
            tip: "#1 real estate coach. His YouTube channel is a masterclass in agent education. Study how he structures educational content.",
            isViral: true,
            engagement: "3.5%",
            photo: "https://ui-avatars.com/api/?name=Tom+Ferry&background=ff5722&color=fff&size=200",
            bio: "#1 ranked real estate coach by The Swanepoel Power 200. Founder of Tom Ferry International. 30+ years helping agents build 7-figure businesses.",
            socialLinks: {
                youtube: { url: "https://www.youtube.com/@TomFerry", followers: "750K", handle: "@TomFerry" },
                instagram: { url: "https://www.instagram.com/tomferry", followers: "500K", handle: "@tomferry" },
                tiktok: { url: "https://www.tiktok.com/@tomferry", followers: "200K", handle: "@tomferry" },
                facebook: { url: "https://www.facebook.com/TomFerry", followers: "600K", handle: "TomFerry" },
                linkedin: { url: "https://www.linkedin.com/in/tomferry", followers: "150K", handle: "tomferry" },
                twitter: { url: "https://twitter.com/TomFerry", followers: "100K", handle: "@TomFerry" },
                website: { url: "https://www.tomferry.com", followers: "", handle: "tomferry.com" }
            }
        },
        {
            name: "Aaron Kirman",
            handle: "@aaronkirman",
            platform: "Instagram",
            followers: "450K",
            followersNum: 450000,
            location: "Los Angeles",
            brokerage: "Christie's International Real Estate",
            specialty: "Ultra-luxury estates, celebrity homes, architectural masterpieces",
            transactions: "100+/year",
            avgPrice: "$20M+",
            topContent: "Mega-mansion tours, celebrity real estate, architectural design",
            recentViralPost: "$100M Bel Air mega-mansion tour - 5M views",
            tip: "Specializes in the absolute highest end. Shows that extreme luxury content gets massive engagement even from non-buyers.",
            isViral: true,
            engagement: "2.8%",
            photo: "https://ui-avatars.com/api/?name=Aaron+Kirman&background=673ab7&color=fff&size=200",
            bio: "President of Aaron Kirman Group. $10B+ in career sales. Represents some of the most expensive homes ever sold in Los Angeles.",
            socialLinks: {
                instagram: { url: "https://www.instagram.com/aaronkirman", followers: "450K", handle: "@aaronkirman" },
                youtube: { url: "https://www.youtube.com/@AaronKirman", followers: "200K", handle: "@AaronKirman" },
                facebook: { url: "https://www.facebook.com/AaronKirmanGroup", followers: "150K", handle: "AaronKirmanGroup" },
                linkedin: { url: "https://www.linkedin.com/in/aaronkirman", followers: "50K", handle: "aaronkirman" },
                twitter: { url: "https://twitter.com/AaronKirman", followers: "25K", handle: "@AaronKirman" },
                website: { url: "https://www.aaronkirman.com", followers: "", handle: "aaronkirman.com" }
            }
        }
    ],
    cincinnati: [
        {
            name: "Scott Oyler",
            handle: "@saoyler",
            platform: "Multi-platform",
            followers: "#1 Team by Volume",
            followersNum: 5000,
            location: "Cincinnati/NKY",
            brokerage: "Coldwell Banker Realty",
            specialty: "Resale and new construction, buyer representation",
            transactions: "200+/year",
            avgPrice: "$500K",
            topContent: "New construction expertise, market updates, team approach",
            tip: "Dominates by offering BOTH resale and new builds. One-stop shop approach. #1 team award 2020, 2021.",
            isCincinnati: true,
            engagement: "Local",
            photo: "https://ui-avatars.com/api/?name=Scott+Oyler&background=27ae60&color=fff&size=200",
            bio: "#1 real estate team in Greater Cincinnati by volume. Oyler Hines team specializes in both resale and new construction, giving clients a one-stop shop experience.",
            socialLinks: {
                instagram: { url: "https://www.instagram.com/saoyler", followers: "1.8K", handle: "@saoyler" },
                facebook: { url: "https://www.facebook.com/OylerHinesCincinnatiRealEstate", followers: "5K", handle: "OylerHinesCincinnatiRealEstate" },
                linkedin: { url: "https://www.linkedin.com/in/scott-oyler-3a82a913", followers: "2K", handle: "scott-oyler" },
                youtube: { url: "https://www.youtube.com/@OylerHinesRealEstate", followers: "500", handle: "@OylerHinesRealEstate" },
                website: { url: "https://www.oylerhines.com", followers: "", handle: "oylerhines.com" }
            }
        },
        {
            name: "Rick J Finn",
            handle: "@rickfinnrealtor",
            platform: "Multi-platform",
            followers: "191 transactions/yr",
            followersNum: 3500,
            location: "Cincinnati",
            brokerage: "Coldwell Banker Realty",
            specialty: "Luxury homes, first-time buyers, HOA expertise",
            transactions: "191/year",
            avgPrice: "$450K",
            topContent: "Market updates, luxury listings, buyer education",
            tip: "Consistent market presence. Known for responsiveness and deep local knowledge. 364 transactions in 2 years.",
            isCincinnati: true,
            engagement: "Local",
            photo: "https://ui-avatars.com/api/?name=Rick+Finn&background=4a90e2&color=fff&size=200",
            bio: "Leader of The Finn Team at Coldwell Banker. 364 transactions over 2 years. Deep expertise in Cincinnati neighborhoods and HOA properties.",
            socialLinks: {
                facebook: { url: "https://www.facebook.com/TheFinnTeam", followers: "3.5K", handle: "TheFinnTeam" },
                instagram: { url: "https://www.instagram.com/thefinnteam", followers: "1.2K", handle: "@thefinnteam" },
                linkedin: { url: "https://www.linkedin.com/in/rickfinn", followers: "1.5K", handle: "rickfinn" },
                youtube: { url: "https://www.youtube.com/@TheFinnTeam", followers: "300", handle: "@TheFinnTeam" },
                website: { url: "https://www.thefinnteam.com", followers: "", handle: "thefinnteam.com" }
            }
        },
        {
            name: "Caldwell Group",
            handle: "@caldwellgroupre",
            platform: "Multi-platform",
            followers: "Top 1%",
            followersNum: 4200,
            location: "Cincinnati",
            brokerage: "Keller Williams",
            specialty: "First-time buyers, luxury homes, VA loans",
            transactions: "145/year",
            avgPrice: "$400K",
            topContent: "Team approach, buyer education, military family support",
            tip: "Team model allows for better coverage. Focus on client experience and reviews. 305 transactions in 2 years.",
            isCincinnati: true,
            engagement: "Local",
            photo: "https://ui-avatars.com/api/?name=Caldwell+Group&background=e74c3c&color=fff&size=200",
            bio: "Top 1% team in Cincinnati. Specializes in first-time buyers and military families with VA loan expertise. 305 transactions in past 2 years.",
            socialLinks: {
                facebook: { url: "https://www.facebook.com/CaldwellGroupRealEstate", followers: "4.2K", handle: "CaldwellGroupRealEstate" },
                instagram: { url: "https://www.instagram.com/caldwellgroupre", followers: "2.1K", handle: "@caldwellgroupre" },
                linkedin: { url: "https://www.linkedin.com/company/caldwell-group-real-estate", followers: "800", handle: "caldwell-group-real-estate" },
                youtube: { url: "https://www.youtube.com/@CaldwellGroupRE", followers: "200", handle: "@CaldwellGroupRE" },
                website: { url: "https://www.caldwellgroupre.com", followers: "", handle: "caldwellgroupre.com" }
            }
        },
        {
            name: "The Treas Team",
            handle: "@treasteam",
            platform: "Multi-platform",
            followers: "Top Performer",
            followersNum: 2800,
            location: "Cincinnati",
            brokerage: "Keller Williams",
            specialty: "First-time buyers, luxury homes, VA loans",
            transactions: "106/year",
            avgPrice: "$375K",
            topContent: "Client testimonials, process education, market updates",
            tip: "Strong focus on first-time buyers and military families. 208 transactions in past 2 years.",
            isCincinnati: true,
            engagement: "Local",
            photo: "https://ui-avatars.com/api/?name=Treas+Team&background=9c27b0&color=fff&size=200",
            bio: "Cincinnati-based team specializing in first-time buyers and military families. 208 transactions over past 2 years with strong testimonial presence.",
            socialLinks: {
                facebook: { url: "https://www.facebook.com/TreasTeamRealEstate", followers: "2.8K", handle: "TreasTeamRealEstate" },
                instagram: { url: "https://www.instagram.com/treasteam", followers: "1.5K", handle: "@treasteam" },
                linkedin: { url: "https://www.linkedin.com/in/treasteam", followers: "500", handle: "treasteam" },
                website: { url: "https://www.treasteam.com", followers: "", handle: "treasteam.com" }
            }
        },
        {
            name: "The Vories Team",
            handle: "@voriesteam",
            platform: "Multi-platform",
            followers: "Top Performer",
            followersNum: 2500,
            location: "Cincinnati",
            brokerage: "Sibcy Cline",
            specialty: "First-time buyers, luxury homes, VA loans",
            transactions: "98/year",
            avgPrice: "$350K",
            topContent: "Neighborhood guides, buyer resources, market analysis",
            tip: "Specializes in first-time and military buyers. 196 transactions in past 2 years.",
            isCincinnati: true,
            engagement: "Local",
            photo: "https://ui-avatars.com/api/?name=Vories+Team&background=00bcd4&color=fff&size=200",
            bio: "Sibcy Cline top performers specializing in first-time and military buyers. 196 transactions in past 2 years with excellent neighborhood knowledge.",
            socialLinks: {
                facebook: { url: "https://www.facebook.com/VoriesTeamRealEstate", followers: "2.5K", handle: "VoriesTeamRealEstate" },
                instagram: { url: "https://www.instagram.com/voriesteam", followers: "1.2K", handle: "@voriesteam" },
                linkedin: { url: "https://www.linkedin.com/in/voriesteam", followers: "400", handle: "voriesteam" },
                website: { url: "https://www.voriesteam.com", followers: "", handle: "voriesteam.com" }
            }
        },
        {
            name: "Amy B Sells",
            handle: "@amybsells",
            platform: "Multi-platform",
            followers: "Top Rated Yelp",
            followersNum: 2100,
            location: "Cincinnati",
            brokerage: "eXp Realty",
            specialty: "Buyers and sellers, customer service focus",
            transactions: "75+/year",
            avgPrice: "$325K",
            topContent: "Client success stories, neighborhood spotlights",
            tip: "Top-rated on Yelp for customer service. Strong online review presence drives referrals.",
            isCincinnati: true,
            engagement: "Local",
            photo: "https://ui-avatars.com/api/?name=Amy+B+Sells&background=ff9800&color=fff&size=200",
            bio: "Top-rated Cincinnati realtor on Yelp. Known for exceptional customer service and strong online review presence that drives consistent referrals.",
            socialLinks: {
                facebook: { url: "https://www.facebook.com/AmyBSellsCincinnati", followers: "2.1K", handle: "AmyBSellsCincinnati" },
                instagram: { url: "https://www.instagram.com/amybsells", followers: "1.8K", handle: "@amybsells" },
                linkedin: { url: "https://www.linkedin.com/in/amybsells", followers: "500", handle: "amybsells" },
                website: { url: "https://www.amybsells.com", followers: "", handle: "amybsells.com" }
            }
        },
        {
            name: "Laura Benson",
            handle: "@laurabensoncb",
            platform: "Multi-platform",
            followers: "Top Rated",
            followersNum: 1800,
            location: "Cincinnati",
            brokerage: "Coldwell Banker",
            specialty: "Residential transactions, community involvement",
            transactions: "60+/year",
            avgPrice: "$300K",
            topContent: "Community events, local market updates",
            tip: "Strong community involvement drives referral business. Active in local events.",
            isCincinnati: true,
            engagement: "Local",
            photo: "https://ui-avatars.com/api/?name=Laura+Benson&background=8bc34a&color=fff&size=200",
            bio: "Coldwell Banker agent deeply involved in Cincinnati community. Referral business driven by authentic local connections and event participation.",
            socialLinks: {
                facebook: { url: "https://www.facebook.com/LauraBensonRealtor", followers: "1.8K", handle: "LauraBensonRealtor" },
                instagram: { url: "https://www.instagram.com/laurabensoncb", followers: "900", handle: "@laurabensoncb" },
                linkedin: { url: "https://www.linkedin.com/in/laurabenson", followers: "600", handle: "laurabenson" },
                website: { url: "https://www.laurabensonsells.com", followers: "", handle: "laurabensonsells.com" }
            }
        },
        {
            name: "Erin Fay",
            handle: "@erinfayrealtor",
            platform: "Multi-platform",
            followers: "Top Rated",
            followersNum: 1600,
            location: "Cincinnati",
            brokerage: "Coldwell Banker",
            specialty: "Buyers and sellers, personalized service",
            transactions: "55+/year",
            avgPrice: "$350K",
            topContent: "Client testimonials, home buying tips",
            tip: "Known for personalized, hands-on approach. Strong repeat client base.",
            isCincinnati: true,
            engagement: "Local",
            photo: "https://ui-avatars.com/api/?name=Erin+Fay&background=e91e63&color=fff&size=200",
            bio: "Coldwell Banker agent known for personalized, hands-on service. Strong repeat client base built through attention to detail.",
            socialLinks: {
                facebook: { url: "https://www.facebook.com/ErinFayRealtor", followers: "1.6K", handle: "ErinFayRealtor" },
                instagram: { url: "https://www.instagram.com/erinfayrealtor", followers: "800", handle: "@erinfayrealtor" },
                linkedin: { url: "https://www.linkedin.com/in/erinfay", followers: "400", handle: "erinfay" },
                website: { url: "https://www.erinfay.com", followers: "", handle: "erinfay.com" }
            }
        },
        {
            name: "Amy Markowski",
            handle: "@amymarkowskire",
            platform: "Multi-platform",
            followers: "Top 1%",
            followersNum: 2200,
            location: "Cincinnati",
            brokerage: "Coldwell Banker",
            specialty: "VA loans, first-time buyers, military families",
            transactions: "96/year",
            avgPrice: "$325K",
            topContent: "Military family focus, VA loan education",
            tip: "Niche expertise in VA loans. Shows power of specializing in specific buyer type.",
            isCincinnati: true,
            engagement: "Local",
            photo: "https://ui-avatars.com/api/?name=Amy+Markowski&background=3f51b5&color=fff&size=200",
            bio: "Top 1% Cincinnati agent specializing in VA loans and military families. Demonstrates the power of niche expertise in a competitive market.",
            socialLinks: {
                facebook: { url: "https://www.facebook.com/AmyMarkowskiRealtor", followers: "2.2K", handle: "AmyMarkowskiRealtor" },
                instagram: { url: "https://www.instagram.com/amymarkowskire", followers: "1.1K", handle: "@amymarkowskire" },
                linkedin: { url: "https://www.linkedin.com/in/amymarkowski", followers: "800", handle: "amymarkowski" },
                youtube: { url: "https://www.youtube.com/@AmyMarkowskiRealEstate", followers: "150", handle: "@AmyMarkowskiRealEstate" },
                website: { url: "https://www.amymarkowski.com", followers: "", handle: "amymarkowski.com" }
            }
        },
        {
            name: "Holly Finn",
            handle: "@hollyfinngreen",
            platform: "Multi-platform",
            followers: "GREEN Certified",
            followersNum: 1200,
            location: "Cincinnati",
            brokerage: "Coldwell Banker",
            specialty: "Eco-friendly homes, sustainable living",
            transactions: "40+/year",
            avgPrice: "$400K",
            topContent: "Green/sustainable homes, eco-friendly tips",
            tip: "Unique niche in eco-friendly properties. Appeals to environmentally conscious buyers. Growing demand.",
            isCincinnati: true,
            engagement: "Local",
            photo: "https://ui-avatars.com/api/?name=Holly+Finn&background=4caf50&color=fff&size=200",
            bio: "GREEN-certified Cincinnati realtor specializing in eco-friendly and sustainable homes. Appeals to growing market of environmentally conscious buyers.",
            socialLinks: {
                facebook: { url: "https://www.facebook.com/HollyFinnGreen", followers: "1.2K", handle: "HollyFinnGreen" },
                instagram: { url: "https://www.instagram.com/hollyfinngreen", followers: "800", handle: "@hollyfinngreen" },
                linkedin: { url: "https://www.linkedin.com/in/hollyfinn", followers: "300", handle: "hollyfinn" },
                website: { url: "https://www.hollyfinn.com", followers: "", handle: "hollyfinn.com" }
            }
        }
    ]
};

// ========== EXPANDED CONTENT LIBRARY - 100+ POSTS ==========
const INSTAGRAM_POSTS = [
    // MARKET UPDATES (10)
    { title: "Daily Market Update", type: "market_update", category: "Market", caption: `ðŸ  Real Estate Market Update - January 2026

ðŸ“Š Current 30-year mortgage rate: ${LIVE_DATA.mortgageRate}%
ðŸ“‰ Down from last week! Rates are trending favorably!

The Cincinnati & Northern Kentucky market is showing STRONG activity this winter.

ðŸ”‘ For Buyers:
â€¢ Winter buyers face LESS competition
â€¢ More negotiating power than recent years
â€¢ Serious sellers = better deals

ðŸ¡ For Sellers:
â€¢ Winter buyers are HIGHLY motivated
â€¢ Your home could be exactly what they need
â€¢ Now is a great time to list!

After ${LIVE_DATA.ela.experience} helping families, I know exactly how to navigate these conditions.

Ready to make your move? Let's chat!
ðŸ“ž ${LIVE_DATA.ela.phone}`, hashtags: "#CincinnatiRealEstate #NKYRealtor #SibcyCline #HomeBuyingTips #DreamHome #RealEstateTips #MortgageRates #HousingMarket #CincyHomes #OhioRealEstate", bestTime: "Tuesday/Thursday 9-11 AM" },

    { title: "Mortgage Rate Drop Alert", type: "market_update", category: "Market", caption: `ðŸš¨ RATE DROP ALERT! ðŸš¨

30-year mortgage rates just fell to ${LIVE_DATA.mortgageRate}%!

This is the LOWEST we've seen since late 2024!

What this means for YOU:
âœ… Lower monthly payments
âœ… More buying power
âœ… Better time to lock in a rate

Remember: You can refinance a RATE.
You can't refinance a PRICE you didn't lock in!

Waiting for "lower rates" while prices climb?
That math doesn't always work in your favor.

Let's talk about YOUR situation!
ðŸ“ž ${LIVE_DATA.ela.phone}`, hashtags: "#MortgageRates #InterestRates #HomeBuying #CincinnatiRealtor #RealEstateNews #BuyersMarket #HomeLoans #FirstTimeHomeBuyer", bestTime: "Post IMMEDIATELY when rates drop" },

    { title: "Cincinnati Market Stats", type: "market_update", category: "Market", caption: `ðŸ“Š CINCINNATI MARKET UPDATE ðŸ“Š

Here's what's happening in our local market:

ðŸ  Median Home Price: $${(LIVE_DATA.cincinnatiMedianPrice/1000).toFixed(0)}K
ðŸ“ˆ Year-over-Year Change: +${LIVE_DATA.cincinnatiPriceChange}%
ðŸ“‹ Inventory: ${LIVE_DATA.inventory} months supply
ðŸ’° Mortgage Rate: ${LIVE_DATA.mortgageRate}%

What does this mean?

FOR BUYERS:
â†’ Still a competitive market
â†’ But MORE options than last year
â†’ Winter = less competition

FOR SELLERS:
â†’ Home values still appreciating
â†’ Serious buyers are actively looking
â†’ Great time to list strategically

Questions about YOUR neighborhood?
ðŸ“ž ${LIVE_DATA.ela.phone}`, hashtags: "#CincinnatiRealEstate #MarketUpdate #CincyHomes #OhioRealEstate #HousingMarket #RealEstateStats #NKYRealtor #HomePrices", bestTime: "Wednesday 10 AM" },

    // FIRST-TIME BUYER (10)
    { title: "First-Time Buyer Tips", type: "educational", category: "Buyers", caption: `ðŸ  First-Time Buyer? SAVE THIS POST!

5 things I wish EVERYONE knew before buying:

1ï¸âƒ£ GET PRE-APPROVED FIRST
Know your REAL budget before you fall in love with a house you can't afford.

2ï¸âƒ£ BUDGET BEYOND THE MORTGAGE
Taxes, insurance, maintenance, utilities... add 25% to your mortgage for true costs.

3ï¸âƒ£ MUST-HAVES vs NICE-TO-HAVES
Make a list! Prioritize what REALLY matters.

4ï¸âƒ£ NEVER SKIP THE INSPECTION
This $400-500 investment can save you THOUSANDS.

5ï¸âƒ£ WORK WITH A REALTOR WHO CARES
Not someone who just wants a quick commission.

Which tip surprised you most? Comment below! ðŸ‘‡

Ready to start your journey?
ðŸ“ž ${LIVE_DATA.ela.phone}`, hashtags: "#FirstTimeHomeBuyer #HomeBuyingTips #CincinnatiRealtor #BuyingAHome #RealEstateAdvice #HomeOwnership #FirstHome #BuyersTips", bestTime: "Wednesday 11 AM - 1 PM" },

    { title: "Down Payment Myths", type: "educational", category: "Buyers", caption: `ðŸ’° MYTH: "You need 20% down to buy a home"

TRUTH: Many programs let you buy with way less!

Here's what's actually available:

ðŸ  Conventional: As low as 3% down
ðŸ  FHA: 3.5% down
ðŸ  VA (Veterans): 0% down!
ðŸ  USDA (Rural): 0% down!

On a $300,000 home:
âŒ 20% down = $60,000
âœ… 3% down = $9,000

That's a HUGE difference!

Yes, PMI exists with lower down payments.
But waiting 10 years to save 20%?
Meanwhile, home prices keep rising...

Let's run YOUR numbers!
ðŸ“ž ${LIVE_DATA.ela.phone}`, hashtags: "#DownPayment #FirstTimeHomeBuyer #HomeBuyingMyths #RealEstateTips #FHALoan #VALoan #HomeFinancing #CincinnatiRealtor", bestTime: "Thursday 9 AM" },

    { title: "Pre-Approval Guide", type: "educational", category: "Buyers", caption: `ðŸ“‹ PRE-APPROVAL: Your Secret Weapon ðŸ”‘

Why get pre-approved BEFORE house hunting?

âœ… Know your EXACT budget
âœ… Sellers take you seriously
âœ… Faster closing process
âœ… Negotiate from strength
âœ… No heartbreak over houses you can't afford

What you'll need:
ðŸ“„ W-2s (last 2 years)
ðŸ“„ Pay stubs (last 30 days)
ðŸ“„ Bank statements (last 2 months)
ðŸ“„ Tax returns (last 2 years)
ðŸ“„ ID and Social Security

The process takes 24-48 hours.

I have AMAZING lender recommendations!
ðŸ“ž ${LIVE_DATA.ela.phone}`, hashtags: "#PreApproval #HomeBuying #MortgageTips #FirstTimeHomeBuyer #CincinnatiRealtor #HomeLoans #BuyingAHome #RealEstateAdvice", bestTime: "Tuesday 10 AM" },

    // SELLER TIPS (10)
    { title: "Seller Tips - Top Dollar", type: "seller_tips", category: "Sellers", caption: `ðŸ’µ Thinking of selling? Here's how to get TOP DOLLAR!

5 things that make the BIGGEST impact:

1ï¸âƒ£ DECLUTTER
Let buyers see the SPACE, not your stuff.
Pack away 50% of everything.

2ï¸âƒ£ DEEP CLEAN
Every. Single. Corner.
Hire pros if needed - worth every penny!

3ï¸âƒ£ MINOR REPAIRS
Fix what you've been ignoring.
Buyers notice EVERYTHING.

4ï¸âƒ£ CURB APPEAL
First impressions happen at the driveway.
Fresh mulch, clean walkways, pop of color.

5ï¸âƒ£ PROFESSIONAL PHOTOS
This is where I come in! ðŸ“¸
90% of buyers start online.

Ready to sell? Let's create your game plan!
ðŸ“ž ${LIVE_DATA.ela.phone}`, hashtags: "#HomeSelling #SellYourHome #RealEstateTips #CincinnatiRealtor #ListingAgent #HomeStaging #CurbAppeal #SellerTips", bestTime: "Tuesday 12-2 PM" },

    { title: "Staging Secrets", type: "seller_tips", category: "Sellers", caption: `ðŸŽ¨ STAGING SECRETS that sell homes FASTER!

Professional stagers know these tricks:

ðŸ›‹ï¸ FURNITURE
â€¢ Float furniture away from walls
â€¢ Create conversation areas
â€¢ Remove 40% of what you have

ðŸŽ¨ COLORS
â€¢ Neutral walls = broader appeal
â€¢ Add color with accessories
â€¢ Consistency throughout

ðŸ’¡ LIGHTING
â€¢ Every light ON for showings
â€¢ Add lamps to dark corners
â€¢ Open ALL blinds and curtains

ðŸŒ¸ FINISHING TOUCHES
â€¢ Fresh flowers (kitchen + bathroom)
â€¢ New towels (rolled, not hung)
â€¢ Remove all personal photos

Staged homes sell 88% faster!

Want a FREE staging consultation?
ðŸ“ž ${LIVE_DATA.ela.phone}`, hashtags: "#HomeStaging #StagingTips #HomeSelling #RealEstateTips #CincinnatiRealtor #SellYourHome #StagedToSell #InteriorDesign", bestTime: "Sunday 10 AM" },

    // NEIGHBORHOOD SPOTLIGHTS (10)
    { title: "Neighborhood Spotlight: Hyde Park", type: "neighborhood", category: "Cincinnati", caption: `ðŸ“ NEIGHBORHOOD SPOTLIGHT: Hyde Park!

Why buyers LOVE Hyde Park:

ðŸ  HOMES
â€¢ Beautiful historic architecture
â€¢ Mix of condos, townhomes, single-family
â€¢ Tree-lined streets with character

ðŸš¶ WALKABILITY
â€¢ Hyde Park Square - shops & restaurants
â€¢ Walking distance to everything
â€¢ Strong sense of community

ðŸŽ“ SCHOOLS
â€¢ Highly rated school district
â€¢ Mix of public and private options

ðŸ’° INVESTMENT
â€¢ Strong appreciation history
â€¢ High demand = solid resale value
â€¢ Rarely stays on market long

ðŸ“Š Current median price: ~$450K

What's YOUR favorite Cincinnati neighborhood?
Comment below! ðŸ‘‡

ðŸ“ž ${LIVE_DATA.ela.phone}`, hashtags: "#HydePark #CincinnatiNeighborhoods #OhioRealEstate #CincyHomes #NKYRealtor #HydeParkCincinnati #CincinnatiLiving #NeighborhoodGuide", bestTime: "Sunday 10 AM - 12 PM" },

    { title: "Neighborhood Spotlight: Mason", type: "neighborhood", category: "Cincinnati", caption: `ðŸ“ NEIGHBORHOOD SPOTLIGHT: Mason!

Why families FLOCK to Mason:

ðŸŽ“ SCHOOLS
â€¢ Top-rated Mason City Schools
â€¢ Consistently ranked #1 in Ohio
â€¢ Amazing sports & arts programs

ðŸ¡ COMMUNITY
â€¢ Beautiful parks and trails
â€¢ Family-friendly atmosphere
â€¢ Growing but not overwhelming

ðŸ›’ CONVENIENCE
â€¢ Shopping, dining, entertainment
â€¢ Easy highway access
â€¢ Short commute to downtown

ðŸ’° VALUE
â€¢ Strong home appreciation
â€¢ Excellent resale market
â€¢ Homes hold their value

ðŸ“Š Current median price: ~$425K

I've helped MANY families find their perfect Mason home!

ðŸ“ž ${LIVE_DATA.ela.phone}`, hashtags: "#Mason #MasonOhio #CincinnatiNeighborhoods #OhioRealEstate #MasonSchools #FamilyFriendly #CincyHomes #WarrenCounty", bestTime: "Sunday 11 AM" },

    // SUCCESS STORIES (5)
    { title: "Client Success Story", type: "success_story", category: "Success", caption: `ðŸŽ‰ JUST CLOSED! ðŸ”‘

Another incredible family in their DREAM HOME!

After weeks of searching, multiple offers, and some nail-biting moments...

WE. DID. IT! ðŸ™Œ

The best part of my job?
Watching their faces when they got the keys.

There were happy tears. (Mine too!) ðŸ˜­

To my clients: THANK YOU for trusting me with this journey.

To everyone still searching: Your perfect home IS out there. Don't give up!

${LIVE_DATA.ela.experience} and moments like this never get old.

ðŸ“ž ${LIVE_DATA.ela.phone}`, hashtags: "#JustClosed #DreamHome #CincyRealEstate #HappyClients #RealtorLife #HomeOwner #ClosingDay #NewHomeowners", bestTime: "Friday 6-8 PM" },

    // MYTH BUSTERS (5)
    { title: "Myth Buster - Spring Only", type: "myth_buster", category: "Tips", caption: `ðŸ”¥ MYTH: "Spring is the only time to buy"

TRUTH: Great deals happen YEAR-ROUND!

Here's why WINTER can be BETTER:

âœ… LESS COMPETITION
Fewer buyers = more negotiating power

âœ… MOTIVATED SELLERS
People listing in winter are SERIOUS

âœ… SEE THE REAL HOUSE
How does it handle cold? Heating bills?

âœ… FASTER CLOSINGS
Lenders and inspectors are less busy

âœ… BETTER DEALS
Sellers may be more flexible on price

Don't let MYTHS hold you back!

What other real estate myths have you heard?
Comment below! ðŸ‘‡

ðŸ“ž ${LIVE_DATA.ela.phone}`, hashtags: "#RealEstateMyths #HomeBuyingTips #MythBusted #CincinnatiRealtor #WinterBuying #RealEstateTruth #BuyersAdvice", bestTime: "Wednesday 3-5 PM" },

    // PERSONAL/WHY I LOVE RE (5)
    { title: "Why I Love Real Estate", type: "personal", category: "Personal", caption: `ðŸ’• Can I be real with you for a moment?

After ${LIVE_DATA.ela.experience}, I've seen markets go up and down.

I've seen interest rates at 3% and at 8%.

I've helped hundreds of families through uncertain times.

But here's what NEVER changes:

The look on someone's face when they get their keys. ðŸ”‘

THAT is why I do this.

Real estate isn't just my career.
It's my CALLING.

Every family deserves someone in their corner who ACTUALLY cares about their dreams.

If you're looking for that person?
I'd be honored to help.

ðŸ“ž ${LIVE_DATA.ela.phone}

${LIVE_DATA.ela.brokerage}`, hashtags: "#WhyILoveRealEstate #RealtorLife #PassionForPeople #CincyRealtor #DreamMaker #RealEstateAgent #ClientFirst #SibcyCline", bestTime: "Sunday 7-9 PM" },

    // CALL TO ACTION (5)
    { title: "Your Year CTA", type: "cta", category: "CTA", caption: `âœ¨ 2026 could be YOUR year! âœ¨

Whether you're dreaming of:

ðŸ  Your FIRST home
ðŸ¡ More space for your growing family
ðŸ¢ An investment property
ðŸ“¦ Downsizing for the next chapter
ðŸ° That luxury home you've always wanted

I'm here to make it HAPPEN.

What I bring to the table:
âœ… ${LIVE_DATA.ela.experience} experience
âœ… Top 5% of Cincinnati realtors
âœ… Hand-holding approach every step
âœ… Genuine care for YOUR success

The market is showing strong activity.
Rates are favorable.
Inventory is improving.

Ready to start? Let's talk!
ðŸ“ž ${LIVE_DATA.ela.phone}

DM me "READY" and let's go! ðŸš€`, hashtags: "#YourYear #DreamHome #CincinnatiRealtor #LetsDoThis #RealEstateGoals #NewHome #HomeOwnership #2026Goals", bestTime: "Monday 10 AM - 12 PM" }
];

// ========== FACEBOOK POSTS (EXPANDED) ==========
const FACEBOOK_POSTS = [
    { title: "Weekly Market Analysis", category: "Market", content: `ðŸ  Cincinnati & Northern Kentucky Real Estate Market Update

Hello friends and neighbors!

ðŸ“Š CURRENT MARKET SNAPSHOT
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ðŸ’° 30-year mortgage rate: ${LIVE_DATA.mortgageRate}% (DOWN from last week!)
ðŸ  Cincinnati median price: $${(LIVE_DATA.cincinnatiMedianPrice/1000).toFixed(0)}K
ðŸ“ˆ Year-over-year appreciation: +${LIVE_DATA.cincinnatiPriceChange}%
ðŸ“‹ Inventory: ${LIVE_DATA.inventory} months supply

ðŸ“ FOR BUYERS:
â€¢ Winter buyers are facing LESS competition
â€¢ More negotiating power than recent years
â€¢ Pre-approval is more important than ever
â€¢ Great conditions across many price ranges

ðŸ“ FOR SELLERS:
â€¢ Serious buyers are actively searching
â€¢ Proper pricing is crucial for success
â€¢ Professional marketing makes the difference
â€¢ Winter listings often stand out more

With ${LIVE_DATA.ela.experience} of experience in the top 5% of Cincinnati realtors, I bring both expertise and genuine care to every client.

Questions about YOUR situation? Let's chat!
ðŸ“ž ${LIVE_DATA.ela.phone}
ðŸŒ ${LIVE_DATA.ela.website}

Warmly,
${LIVE_DATA.ela.name}
${LIVE_DATA.ela.brokerage}`, hashtags: "#CincinnatiRealEstate #NKYHomes #MarketUpdate #OhioRealtor #HousingMarket" },

    { title: "First-Time Buyer Complete Guide", category: "Buyers", content: `ðŸ  First-Time Home Buyers: Your Complete Guide for 2026!

Thinking about buying your first home? Here's everything you need to know:

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
STEP 1: GET YOUR FINANCES IN ORDER
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
âœ“ Check your credit score (aim for 620+, 740+ for best rates)
âœ“ Save for down payment (many programs need only 3%!)
âœ“ Get pre-approved - this is NON-NEGOTIABLE
âœ“ Know your debt-to-income ratio

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
STEP 2: DEFINE YOUR PRIORITIES
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
Create two lists:
ðŸ“ MUST-HAVES (non-negotiables)
ðŸ“ NICE-TO-HAVES (can be flexible)

Be realistic about what you NEED vs what you WANT.

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
STEP 3: FIND THE RIGHT REALTOR
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
Look for someone who:
â€¢ Knows the local market inside and out
â€¢ Takes time to educate you (not rush you)
â€¢ Makes you comfortable asking questions
â€¢ Has your best interest at heart

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
STEP 4: START YOUR SEARCH
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
With pre-approval ready, NOW you can tour homes confidently!

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
STEP 5: MAKE AN OFFER
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
Your realtor will guide you through the entire process.

You don't have to figure this out alone! That's what I'm here for.

ðŸ“ž ${LIVE_DATA.ela.phone}`, hashtags: "#FirstTimeHomeBuyer #HomeBuyingTips #CincinnatiRealtor #BuyingAHome #FirstHome" },

    { title: "Home Selling Checklist", category: "Sellers", content: `ðŸ“‹ Thinking About Selling? Your Complete Checklist!

Here's exactly what to do before listing your home:

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ðŸ§¹ DECLUTTER & DEPERSONALIZE
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
â–¡ Pack away family photos
â–¡ Remove excess furniture (aim for 40% less)
â–¡ Clean out ALL closets
â–¡ Clear countertops
â–¡ Organize garage and storage areas

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
âœ¨ DEEP CLEAN EVERYTHING
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
â–¡ Windows inside AND out
â–¡ Carpets professionally cleaned
â–¡ All kitchen appliances
â–¡ Bathrooms SPARKLING
â–¡ Baseboards and light fixtures

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ðŸ”§ MAKE REPAIRS
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
â–¡ Fix leaky faucets
â–¡ Repair walls and flooring
â–¡ Replace burnt-out bulbs
â–¡ Touch up paint
â–¡ Fix squeaky doors

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ðŸŒ³ BOOST CURB APPEAL
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
â–¡ Power wash driveway
â–¡ Trim bushes, add fresh mulch
â–¡ Plant seasonal flowers
â–¡ Clean/paint front door
â–¡ Update house numbers

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ðŸ“¸ THE MARKETING PHASE
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
This is where I come in!
â€¢ Professional photography
â€¢ Virtual tours
â€¢ Strategic pricing
â€¢ Maximum market exposure

Ready to get started? Let's schedule a free consultation!
ðŸ“ž ${LIVE_DATA.ela.phone}`, hashtags: "#HomeSelling #SellerTips #CincinnatiRealEstate #SellYourHome #HomeSellerGuide" }
];

// ========== VIDEO SCRIPTS (EXPANDED - 30+) ==========
const VIDEO_SCRIPTS = [
    // TikTok/Reels (15-30 sec)
    { title: "15-Second Rate Flash", duration: "15 sec", platform: "TikTok / Instagram Reel", category: "Quick", script: `HOOK (0-3s): "Cincinnati market update!" [Point at camera]

CONTENT (3-12s): "30-year rates just dropped to ${LIVE_DATA.mortgageRate}%!" [Show rate on screen]
"That's the lowest since late 2024!"

CTA (12-15s): "Questions? Call me!" [Show phone number]

TEXT OVERLAY: "RATE DROP ðŸ“‰" + "${LIVE_DATA.mortgageRate}%" big

TRENDING SOUND: Use current trending audio`, notes: "Quick, punchy energy. Pattern-interrupt content. Post when rates change!" },

    { title: "First-Time Buyer Mistake", duration: "30 sec", platform: "TikTok / Instagram Reel", category: "Educational", script: `HOOK (0-3s): "First-time buyers - this mistake costs THOUSANDS!" [Serious face]

PROBLEM (3-12s): "People start house hunting BEFORE getting pre-approved."
"They fall in love with homes they can't afford."
"Then they're heartbroken AND behind."

SOLUTION (12-25s): "Get pre-approved FIRST. It tells you your REAL budget, makes your offers stronger, and shows sellers you're serious."

CTA (25-30s): "Ready to do this RIGHT? I'll walk you through every step!"

TEXT: "MISTAKE: House hunting before pre-approval"`, notes: "Educational value. Confident but not condescending. Save-worthy content." },

    { title: "Myth Buster: 20% Down", duration: "30 sec", platform: "TikTok / Instagram Reel", category: "Myth Buster", script: `HOOK (0-3s): "Stop believing this real estate myth!" [Shake head]

MYTH (3-10s): "'You need 20% down to buy a home' - WRONG!" [X on screen]

TRUTH (10-25s): "Many programs let you buy with just 3% down!"
"FHA? 3.5%"
"VA for veterans? ZERO!"
"That $60K you thought you needed? Try $9K."

CTA (25-30s): "Curious what YOU qualify for? Let's figure it out!"

TEXT: "MYTH BUSTED ðŸ’¥"`, notes: "Create surprise/relief. Empowering message. Comment-bait." },

    { title: "POV: Day in the Life", duration: "45 sec", platform: "TikTok / Instagram Reel", category: "Behind Scenes", script: `HOOK (0-3s): "POV: A day in my life as a Cincinnati realtor" [Walking shot]

MONTAGE (3-35s): Quick cuts with timestamps:
"7 AM - Coffee and market research" [At desk]
"9 AM - Showing homes to first-time buyers" [In car/at house]
"12 PM - Listing appointment" [With clients]
"2 PM - Contract negotiations" [On phone]
"4 PM - Home inspection" [At property]
"6 PM - Still here for my clients!" [Texting/calling]

CLOSE (35-45s): "${LIVE_DATA.ela.experience} and every day is different! That's what I love about it."

TRENDING SOUND: "Day in the life" audio`, notes: "Film throughout an actual day. Authentic moments. Relatable." },

    { title: "Neighborhood Tour: Hyde Park", duration: "60 sec", platform: "Instagram Reel / YouTube Short", category: "Neighborhood", script: `HOOK (0-5s): "Let me show you Hyde Park!" [Walking shot of Hyde Park Square]

B-ROLL WITH NARRATION (5-45s):
"Hyde Park is one of Cincinnati's most sought-after neighborhoods."
[Show: Tree-lined streets]
"Historic architecture meets modern living."
[Show: Hyde Park Square shops]
"Walk to amazing restaurants and boutiques."
[Show: Parks/green spaces]
"Strong schools, tight-knit community."
[Show: Beautiful homes]
"Homes here rarely stay on the market long."

STATS (45-55s): "Median price around $450K. But the lifestyle? Priceless."

CTA (55-60s): "Interested in Hyde Park? I know this area inside and out!"

TEXT: "HYDE PARK, CINCINNATI ðŸ“"`, notes: "Film ON LOCATION. Show the LIFESTYLE, not just houses. Use drone shots if possible." },

    { title: "What Sellers Won't Tell You", duration: "45 sec", platform: "TikTok / Instagram Reel", category: "Tips", script: `HOOK (0-3s): "What sellers WON'T tell you..." [Lean in, whisper]

REVEALS (3-35s):
"They'll accept less than asking. Almost always."
"That 'other offer'? Might not exist."
"The inspection report? They're nervous about it too."
"Those 'minor repairs'? Could be bigger issues."
"They're usually more motivated than they let on."

ADVICE (35-42s): "This is why you need a realtor who knows how to negotiate."

CTA (42-45s): "I've got your back. Let's talk."

TEXT: "SELLER SECRETS ðŸ¤«"`, notes: "Insider knowledge feel. Creates trust. Comment magnet." },

    { title: "Signs You're Ready to Buy", duration: "30 sec", platform: "TikTok / Instagram Reel", category: "Educational", script: `HOOK (0-3s): "Signs you're READY to buy a home:" [Counting on fingers]

LIST (3-25s):
"1. You have steady income" [âœ“]
"2. You've got 3-6 months expenses saved" [âœ“]
"3. Your credit score is 620+" [âœ“]
"4. You plan to stay 3+ years" [âœ“]
"5. You're tired of paying someone else's mortgage" [âœ“]

CTA (25-30s): "Hit all five? Let's make it happen!"

TEXT: "ARE YOU READY? âœ“"`, notes: "Self-assessment content. Engagement driver. Share-worthy." },

    { title: "Red Flags When Viewing", duration: "45 sec", platform: "TikTok / Instagram Reel", category: "Tips", script: `HOOK (0-3s): "Red flags when viewing a home:" [Alert face]

REVEALS (3-38s):
"Fresh paint in random spots - what are they covering?"
"Strong air fresheners everywhere - masking something?"
"Seller won't leave during showing - what don't they want you to see?"
"Water stains on ceiling - roof problems?"
"Cracks in foundation - structural issues?"
"No photos of certain rooms online - there's a reason"

ADVICE (38-43s): "Always get an inspection. ALWAYS."

CTA (43-45s): "I help my buyers spot these before it's too late."

TEXT: "ðŸš© RED FLAGS ðŸš©"`, notes: "Save-worthy content. Protective advice builds trust." },

    { title: "Closing Costs Explained", duration: "60 sec", platform: "YouTube Short / Instagram Reel", category: "Educational", script: `HOOK (0-5s): "Closing costs - let's break it down so there's NO surprises!"

OVERVIEW (5-15s): "Typically 2-5% of your purchase price."
"On a $300K home? Budget $6,000-$15,000."

BREAKDOWN (15-45s):
"LENDER FEES" [On screen]
"â€¢ Origination fee, appraisal, credit report"

"TITLE FEES" [On screen]
"â€¢ Title search, title insurance"

"PREPAIDS" [On screen]
"â€¢ Property taxes, homeowner's insurance"

"GOVERNMENT FEES" [On screen]
"â€¢ Recording fees, transfer taxes"

TIPS (45-55s): "Good news? Some are negotiable! Sellers sometimes contribute. Shop your lender!"

CTA (55-60s): "Want me to estimate YOUR closing costs?"

TEXT: "CLOSING COSTS ðŸ’°"`, notes: "Use graphics to make breakdown visual. Save-worthy." }
];

// ========== TRENDING CONTENT TYPES (2026) ==========
const TRENDING_CONTENT = [
    { rank: 1, type: "Short-Form Video Tours", title: "Quick Property Walkthroughs", engagement: 98, description: "60-second or less home tours with personality", tip: "Show lifestyle, not just rooms. Use trending sounds. Film vertical. Add captions!", stat: "Videos get 403% more inquiries" },
    { rank: 2, type: "Rate Update Reels", title: "Mortgage Rate Alerts", engagement: 95, description: "Quick updates when rates change", tip: "Post IMMEDIATELY when rates drop. Be specific to your market. Use graphics for numbers.", stat: "Rate content gets shared 3x more" },
    { rank: 3, type: "Educational Carousels", title: "Swipeable Step-by-Step Guides", engagement: 92, description: "Instagram carousels with actionable tips", tip: "5-7 slides max. Bold headlines. One tip per slide. Strong CTA on last slide.", stat: "Carousels get 1.4x more reach" },
    { rank: 4, type: "Client Testimonial Videos", title: "Real Success Stories", engagement: 90, description: "Happy clients sharing their experience", tip: "Keep authentic. Raw footage often performs better than polished. Get permission!", stat: "Social proof increases trust 72%" },
    { rank: 5, type: "Myth Buster Content", title: "Debunking Common Beliefs", engagement: 88, description: "MYTH vs TRUTH format", tip: "Start with controversial claim. Dramatic reveal. Comment-bait.", stat: "Myth busters get saved 2x more" },
    { rank: 6, type: "Behind the Scenes", title: "Day in the Life", engagement: 85, description: "What realtors actually do daily", tip: "Be real about challenges. Show the hustle. Authentic > polished.", stat: "BTS content builds trust 65%" },
    { rank: 7, type: "Neighborhood Spotlights", title: "Local Area Deep Dives", engagement: 82, description: "Highlight specific neighborhoods", tip: "Include local businesses, parks, schools. Partner with local shops.", stat: "Local content gets 2x engagement" },
    { rank: 8, type: "Quick Tips (Under 15 sec)", title: "Rapid Value Bombs", engagement: 80, description: "Single tip delivered fast", tip: "One tip per video. Hook in first 1-2 seconds. Pattern interrupt.", stat: "Short content = higher completion" },
    { rank: 9, type: "Before/After Staging", title: "Transformation Reveals", engagement: 78, description: "Show staging impact dramatically", tip: "Dramatic music. Quick cuts. Trending reveal sounds.", stat: "Before/after gets shared 4x more" },
    { rank: 10, type: "Personal/Authentic Stories", title: "Why I Love Real Estate", engagement: 75, description: "Genuine personal connection", tip: "Vulnerability connects. Share real moments and emotions.", stat: "Authentic content = loyal followers" }
];

// ========== VIRAL CONTENT EXAMPLES ==========
const VIRAL_EXAMPLES = [
    { source: "Daniel Heider (3.7M)", platform: "TikTok", content: "Luxury DC townhome tour with trending sound", views: "15M", engagement: "4.2%", whatWorked: "Quick cuts, trending audio, personality in every frame", adaptFor: "Tour Cincinnati luxury homes with same energy and editing style" },
    { source: "Glennda Baker (750K)", platform: "TikTok", content: "What your realtor won't tell you series", views: "2M+", engagement: "6.2%", whatWorked: "Authentic, funny, relatable. Proves you don't need luxury to go viral", adaptFor: "Create 'Cincinnati real estate secrets' series with your personality" },
    { source: "Ryan Serhant (2.5M)", platform: "YouTube/IG", content: "How I built a $1B brokerage", views: "4M", engagement: "3.2%", whatWorked: "Long-form storytelling, business insights, inspirational", adaptFor: "Share your 22-year journey, lessons learned, success stories" },
    { source: "Tat Londono (2.7M)", platform: "TikTok", content: "How I bought my first property at 23", views: "8M", engagement: "5.1%", whatWorked: "Wealth-building narrative, young audience appeal, high energy", adaptFor: "First-time buyer success stories from your clients" },
    { source: "Zachary Loft (1.8M)", platform: "TikTok", content: "Why home prices won't crash - with receipts", views: "10M", engagement: "4.8%", whatWorked: "Data-driven, 'receipts' proof, explains complex topics simply", adaptFor: "Cincinnati market data explained simply with local stats" }
];

// ========== HASHTAG RESEARCH - MEGA EXPANDED ==========
const HASHTAGS = {
    cincinnati: {
        primary: ["#CincinnatiRealEstate", "#CincyHomes", "#CincinnatiRealtor", "#NKYRealtor", "#OhioRealEstate", "#CincinnatiOH", "#CincyRealtor", "#GreaterCincinnatiHomes"],
        secondary: ["#CincinnatiHomes", "#GreaterCincinnati", "#CincyLiving", "#NorthernKentucky", "#TriStateArea", "#SWOhio", "#CincinnatiLife", "#CincyRealty", "#OhioHomes", "#KentuckyRealEstate"],
        neighborhoods: ["#HydePark", "#MasonOhio", "#Anderson", "#WestChester", "#BlueAsh", "#FortThomas", "#MtAdams", "#OTR", "#Madeira", "#IndianHill", "#Oakley", "#Mariemont", "#MontgomeryOhio", "#LovelyOakley", "#DowntownCincinnati", "#NorthsideCincy", "#Covington", "#NewportKY", "#Florence", "#CliftonCincinnati", "#CollegeHill", "#PriceHill", "#WalnutHills", "#EastWalnutHills", "#NorwoodOhio", "#Evendale", "#ReadingOhio", "#Fairfield", "#HamiltonOhio", "#MiddletownOhio"],
        trending: ["#CincyLife", "#QueenCity", "#LoveCincy", "#CincinnatiOhio", "#SoOhio", "#ExploreCincy", "#CincyGram", "#CincinnatiProud", "#513", "#CincyStrong"],
        lifestyle: ["#CincinnatiFood", "#CincinnatiBreweries", "#CincyEats", "#CincinnatiEvents", "#CincyWeekend", "#CincinnatiParks", "#CincyFitness", "#CincinnatiArt", "#CincyMusic", "#CincinnatiSports"]
    },
    realEstate: {
        buying: ["#FirstTimeHomeBuyer", "#HomeBuying", "#HouseHunting", "#DreamHome", "#NewHomeowner", "#HomeBuyingTips", "#HomeBuyersTips", "#BuyingAHome", "#FirstHome", "#HomeBuyingProcess", "#ReadyToBuy", "#HouseShopping", "#HomeSweetHome", "#NewHome", "#HomeSearch"],
        selling: ["#HomeSelling", "#JustListed", "#HomeForSale", "#SellYourHome", "#ListingAgent", "#SellerTips", "#TimeToSell", "#HomeSellerTips", "#ListingOfTheDay", "#OpenHouse", "#JustSold", "#SoldHome", "#UnderContract", "#PendingSale", "#SellingYourHome"],
        general: ["#RealEstate", "#Realtor", "#RealEstateAgent", "#RealtorLife", "#RealEstateTips", "#HousingMarket", "#RealEstateInvestor", "#Property", "#Home", "#RealEstateNews", "#RealEstateAdvice", "#RealEstateExpert", "#RealEstate2026", "#RealEstateGoals", "#RealEstateMarket"],
        luxury: ["#LuxuryRealEstate", "#LuxuryHomes", "#MillionDollarListing", "#LuxuryLiving", "#DreamHomes", "#LuxuryProperty", "#MansionLife", "#LuxuryListings", "#HighEndRealEstate", "#LuxuryHomeDesign", "#LuxuryLifestyle", "#PrestigeHomes", "#ExecutiveHomes", "#CustomHomes", "#EstateHomes"],
        investment: ["#RealEstateInvesting", "#PropertyInvestment", "#InvestmentProperty", "#RentalProperty", "#PassiveIncome", "#WealthBuilding", "#CashFlow", "#REI", "#RealEstateInvestor", "#BuildWealth", "#FinancialFreedom", "#MultiFamily", "#Flipping", "#BRRRR", "#RealEstatePortfolio"],
        mortgage: ["#MortgageTips", "#MortgageRates", "#HomeLoan", "#MortgageAdvice", "#InterestRates", "#HomeFinancing", "#GetPreApproved", "#MortgageBroker", "#HomeLoanTips", "#RefinanceTips", "#FHALoan", "#VALoan", "#ConventionalLoan", "#DownPayment", "#Homeownership"]
    },
    contentType: {
        marketUpdate: ["#MarketUpdate", "#RealEstateMarket", "#HousingMarket", "#MarketReport", "#MarketTrends", "#MarketAnalysis", "#HousingNews", "#RealEstateStats", "#MarketWatch", "#HousingUpdate"],
        homeTips: ["#HomeMaintenanceTips", "#HomeImprovement", "#DIYHome", "#HomeHacks", "#HomeTips", "#HomeDecor", "#InteriorDesign", "#HomeRenovation", "#HomeUpgrades", "#StagingTips"],
        neighborhoodGuide: ["#NeighborhoodGuide", "#LocalExpert", "#AreaExpert", "#CommunityLiving", "#LiveHere", "#NeighborhoodTour", "#LocalRealEstate", "#KnowYourNeighborhood", "#NeighborhoodSpotlight", "#CommunityHighlight"],
        openHouse: ["#OpenHouse", "#OpenHouseSunday", "#OpenHouseWeekend", "#ComeOnIn", "#TourThisHome", "#VirtualTour", "#HomeTour", "#PropertyTour", "#ShowingTime", "#PrivateShowing"],
        justSold: ["#JustSold", "#SoldInDays", "#AnotherOneSold", "#ClosingDay", "#KeysHandedOver", "#HappyBuyers", "#HappySellers", "#SoldByEla", "#SuccessStory", "#ClosedDeal"],
        testimonial: ["#ClientLove", "#HappyClients", "#TestimonialTuesday", "#ClientReview", "#FiveStars", "#ClientAppreciation", "#ThankYou", "#Grateful", "#BestClients", "#ReferralAppreciation"]
    },
    platform: {
        instagram: ["#InstaRealEstate", "#RealEstateIG", "#RealtorOfInstagram", "#HomesOfInstagram", "#InstaHome", "#IGRealEstate", "#RealtorIG", "#InstagramRealtor", "#RealEstateInsta", "#IGHomes"],
        tiktok: ["#RealEstateTok", "#RealtorTok", "#HouseTok", "#HomeTok", "#RealEstateTikTok", "#FYP", "#ForYouPage", "#TikTokRealEstate", "#Viral", "#Trending"],
        facebook: ["#FacebookRealEstate", "#FBRealtor", "#FacebookHomes", "#SocialMediaMarketing", "#DigitalMarketing", "#SocialRealtor", "#OnlineMarketing", "#LeadGeneration", "#FBMarketing", "#SocialSelling"],
        youtube: ["#YouTubeRealEstate", "#RealtorYouTube", "#HomeTours", "#PropertyVideos", "#RealEstateVlog", "#HomeBuyingVlog", "#RealEstateYouTuber", "#VideoMarketing", "#YouTubeRealtor", "#ContentCreator"],
        linkedin: ["#LinkedInRealEstate", "#ProfessionalNetwork", "#RealEstateProfessional", "#BusinessNetworking", "#IndustryExpert", "#ThoughtLeader", "#RealEstateLeader", "#Networking", "#ProfessionalGrowth", "#CareerInRealEstate"]
    },
    engagement: {
        callToAction: ["#CommentBelow", "#SaveThisPost", "#ShareThis", "#FollowForMore", "#LinkInBio", "#DoubleTap", "#TagAFriend", "#LikeAndShare", "#LeaveAComment", "#TurnOnNotifications"],
        trending2026: ["#RealEstateInvesting", "#HomeOwnership", "#PropertyInvestment", "#WealthBuilding", "#FinancialFreedom", "#2026Goals", "#NewYear2026", "#RealEstate2026", "#HousingMarket2026", "#Investing2026"],
        educational: ["#LearnRealEstate", "#RealEstateEducation", "#HomeBuyerEducation", "#RealEstateTips", "#ProTips", "#DidYouKnow", "#FactOfTheDay", "#RealEstateFacts", "#HousingFacts", "#MythBusters"],
        motivational: ["#DreamBig", "#HomeGoals", "#LifeGoals", "#Motivation", "#Inspired", "#MakeItHappen", "#GoalSetting", "#Success", "#Hustle", "#NeverGiveUp"]
    },
    seasonal: {
        spring: ["#SpringMarket", "#SpringRealEstate", "#SpringHomes", "#SpringSelling", "#SpringIsComing", "#SpringMoveIn", "#SpringCleaning", "#FreshStart", "#NewBeginnings", "#SpringListings"],
        summer: ["#SummerRealEstate", "#SummerHomes", "#SummerSale", "#SummerLiving", "#SummerMove", "#SummerMarket", "#HotMarket", "#SummerListings", "#SummerReady", "#BeachLife"],
        fall: ["#FallRealEstate", "#FallHomes", "#FallSelling", "#AutumnHomes", "#FallMarket", "#CozyHome", "#FallVibes", "#HarvestSeason", "#FallListings", "#AutumnLiving"],
        winter: ["#WinterRealEstate", "#WinterHomes", "#HolidayHomes", "#WinterWonderland", "#CozyLiving", "#WinterMarket", "#YearEndSale", "#HolidayMove", "#WinterListings", "#WarmAndCozy"],
        holidays: ["#HolidayHome", "#ChristmasHome", "#ThanksgivingHome", "#NewYearNewHome", "#HolidayDecor", "#FestiveHome", "#SeasonalDecor", "#HolidayListing", "#GiftOfHome", "#HomeForTheHolidays"]
    },
    demographics: {
        firstTimeBuyers: ["#FirstTimeHomeBuyer", "#FirstTimeBuyer", "#MillennialHomeBuyer", "#GenZHomeBuyer", "#FirstHome", "#StarterHome", "#AffordableHomes", "#FirstTimeBuyerTips", "#NewToBuying", "#HomeBuyingJourney"],
        families: ["#FamilyHome", "#GrowingFamily", "#FamilyFriendly", "#KidFriendly", "#SchoolDistrict", "#FamilyNeighborhood", "#RoomToGrow", "#BackyardGoals", "#FamilyLiving", "#KidsAndPets"],
        investors: ["#RealEstateInvestor", "#PropertyInvestor", "#InvestmentProperty", "#Landlord", "#RentalIncome", "#CashFlowPositive", "#PortfolioBuilding", "#WealthCreation", "#InvestorLife", "#REInvesting"],
        seniors: ["#SeniorLiving", "#RetirementHome", "#Downsizing", "#EmptyNesters", "#55Plus", "#ActiveAdult", "#RetirementLiving", "#GoldenYears", "#DownsizingTips", "#SeniorRealEstate"],
        relocating: ["#Relocating", "#MovingTo", "#RelocationExpert", "#CorporateRelocation", "#NewCity", "#MovingHelp", "#RelocationServices", "#TransferringJobs", "#NewAdventure", "#CrossCountryMove"]
    }
};

// Pre-built hashtag sets for quick copy
const HASHTAG_SETS = {
    cincinnatiBasic: {
        name: "Cincinnati Essential",
        description: "Best performing Cincinnati hashtags",
        tags: "#CincinnatiRealEstate #CincyHomes #CincinnatiRealtor #GreaterCincinnati #OhioRealEstate #CincyLife #QueenCity #RealEstate #Realtor #DreamHome",
        reach: "500K-1M",
        engagement: "High"
    },
    firstTimeBuyer: {
        name: "First-Time Buyer Focus",
        description: "Target new home buyers",
        tags: "#FirstTimeHomeBuyer #HomeBuying #DreamHome #HomeBuyingTips #FirstHome #CincinnatiRealEstate #CincyHomes #NewHomeowner #HouseHunting #ReadyToBuy",
        reach: "300K-600K",
        engagement: "Very High"
    },
    justListed: {
        name: "New Listing Power",
        description: "Maximum exposure for listings",
        tags: "#JustListed #HomeForSale #OpenHouse #CincinnatiRealEstate #ListingOfTheDay #NewListing #CincyHomes #DreamHome #RealEstate #TourThisHome",
        reach: "400K-800K",
        engagement: "High"
    },
    luxuryMarket: {
        name: "Luxury & High-End",
        description: "Premium property hashtags",
        tags: "#LuxuryRealEstate #LuxuryHomes #MillionDollarListing #CincinnatiLuxury #IndianHill #LuxuryLiving #DreamHomes #ExecutiveHomes #PrestigeHomes #LuxuryListings",
        reach: "200K-400K",
        engagement: "Medium"
    },
    marketUpdate: {
        name: "Market News",
        description: "Educational market content",
        tags: "#MarketUpdate #HousingMarket #RealEstateMarket #CincinnatiRealEstate #MarketTrends #RealEstateNews #HousingNews #InterestRates #MortgageRates #MarketReport",
        reach: "250K-500K",
        engagement: "Medium"
    },
    justSold: {
        name: "Sold Celebration",
        description: "Celebrate your wins",
        tags: "#JustSold #SoldInDays #ClosingDay #HappyClients #CincinnatiRealEstate #AnotherOneSold #SuccessStory #ClientLove #KeysHandedOver #ClosedDeal",
        reach: "300K-500K",
        engagement: "High"
    },
    investorFocus: {
        name: "Investor Attraction",
        description: "Reach real estate investors",
        tags: "#RealEstateInvesting #InvestmentProperty #PropertyInvestor #CashFlow #PassiveIncome #WealthBuilding #RentalProperty #REI #BuildWealth #CincinnatiInvestment",
        reach: "200K-400K",
        engagement: "Medium"
    },
    neighborhoodHydePark: {
        name: "Hyde Park Spotlight",
        description: "Hyde Park focused",
        tags: "#HydePark #HydeParkCincinnati #CincinnatiRealEstate #CincyHomes #HistoricHomes #WalkableNeighborhood #HydeParkSquare #UrbanLiving #CincyLife #DreamHome",
        reach: "50K-100K",
        engagement: "Very High"
    },
    neighborhoodMason: {
        name: "Mason Family Focus",
        description: "Mason OH community",
        tags: "#MasonOhio #MasonOH #MasonSchools #CincinnatiRealEstate #FamilyHome #TopSchools #GreatSchools #FamilyFriendly #CincyHomes #SuburbanLiving",
        reach: "75K-150K",
        engagement: "Very High"
    },
    tiktokViral: {
        name: "TikTok Viral Mix",
        description: "TikTok algorithm favorites",
        tags: "#RealEstateTok #FYP #ForYouPage #RealtorTok #HouseTok #Viral #Trending #CincinnatiRealEstate #DreamHome #HomeGoals",
        reach: "1M+",
        engagement: "Variable"
    },
    instagramGrowth: {
        name: "Instagram Growth",
        description: "Instagram engagement boost",
        tags: "#RealtorOfInstagram #HomesOfInstagram #InstaRealEstate #CincinnatiRealEstate #RealEstateIG #DreamHome #HomeDesign #InteriorInspo #HomeGoals #SaveThisPost",
        reach: "500K-1M",
        engagement: "High"
    },
    springMarket: {
        name: "Spring Selling Season",
        description: "Seasonal spring tags",
        tags: "#SpringMarket #SpringRealEstate #SpringHomes #CincinnatiRealEstate #FreshStart #NewBeginnings #SpringListings #TimeToMove #HomeSelling #CincyHomes",
        reach: "300K-600K",
        engagement: "High"
    }
};

// ========== CINCINNATI NEIGHBORHOODS DATA ==========
const NEIGHBORHOODS = {
    hydePark: { name: "Hyde Park", medianPrice: 450000, priceChange: 5.2, daysOnMarket: 18, schools: "Cincinnati Public - Highly Rated", walkScore: 78, highlights: ["Historic charm", "Hyde Park Square", "Walkable", "Strong appreciation"] },
    mason: { name: "Mason", medianPrice: 425000, priceChange: 6.1, daysOnMarket: 22, schools: "Mason City Schools - Top Rated", walkScore: 35, highlights: ["Top schools", "Family-friendly", "Parks & trails", "Growing community"] },
    anderson: { name: "Anderson Township", medianPrice: 375000, priceChange: 4.8, daysOnMarket: 25, schools: "Forest Hills - Excellent", walkScore: 25, highlights: ["Great schools", "Suburban feel", "Family neighborhoods", "Value"] },
    westChester: { name: "West Chester", medianPrice: 395000, priceChange: 5.5, daysOnMarket: 20, schools: "Lakota Schools - Excellent", walkScore: 30, highlights: ["Top schools", "Shopping/dining", "New construction", "Growing"] },
    fortThomas: { name: "Fort Thomas", medianPrice: 350000, priceChange: 5.0, daysOnMarket: 28, schools: "Fort Thomas Ind. - Excellent", walkScore: 45, highlights: ["Small town feel", "Great schools", "NKY charm", "Walkable downtown"] },
    indianHill: { name: "Indian Hill", medianPrice: 1200000, priceChange: 3.5, daysOnMarket: 45, schools: "Indian Hill - Top Rated", walkScore: 10, highlights: ["Luxury estates", "Privacy", "Top schools", "Exclusive"] },
    mtAdams: { name: "Mt. Adams", medianPrice: 325000, priceChange: 4.2, daysOnMarket: 30, schools: "Cincinnati Public", walkScore: 85, highlights: ["Urban living", "Views", "Walkable", "Nightlife"] },
    otr: { name: "Over-the-Rhine", medianPrice: 285000, priceChange: 7.5, daysOnMarket: 15, schools: "Cincinnati Public", walkScore: 95, highlights: ["Historic", "Trendy", "Restaurants", "Appreciation"] }
};

// ========== STATE ==========
let currentPage = 'dashboard';
let navigationHistory = ['dashboard'];
let currentNewsFilter = 'all';
let currentRealtorTab = 'national';
let currentLibraryTab = 'instagram';
let scheduledPosts = JSON.parse(localStorage.getItem('scheduledPosts') || '[]');
let postedHistory = JSON.parse(localStorage.getItem('postedHistory') || '[]');
let settings = JSON.parse(localStorage.getItem('elaSettings') || '{}');
let savedContent = JSON.parse(localStorage.getItem('savedContent') || '[]');

// ========== INIT ==========
document.addEventListener('DOMContentLoaded', () => {
    renderAllPages();
    setupNavigation();
    showPage('dashboard');
    startLiveUpdates();
});

function startLiveUpdates() {
    // Simulate live data updates
    setInterval(() => {
        const newsIndicators = document.querySelectorAll('.live-indicator');
        newsIndicators.forEach(ind => {
            ind.style.opacity = ind.style.opacity === '1' ? '0.3' : '1';
        });
    }, 1000);
}

function setupNavigation() {
    document.querySelectorAll('.nav-item').forEach(item => {
        item.addEventListener('click', () => {
            const page = item.dataset.page;
            document.querySelectorAll('.nav-item').forEach(i => i.classList.remove('active'));
            item.classList.add('active');
            showPage(page);
        });
    });
}

function showPage(page, addToHistory = true) {
    if (addToHistory && page !== currentPage) {
        navigationHistory.push(page);
    }
    currentPage = page;
    document.querySelectorAll('.page-section').forEach(p => p.classList.remove('active'));
    const pageEl = document.getElementById('page-' + page);
    if (pageEl) pageEl.classList.add('active');

    const backBtn = document.getElementById('backBtn');
    if (backBtn) {
        backBtn.classList.toggle('hidden', navigationHistory.length <= 1);
    }
}

function goBack() {
    if (navigationHistory.length > 1) {
        navigationHistory.pop();
        const prevPage = navigationHistory[navigationHistory.length - 1];
        document.querySelectorAll('.nav-item').forEach(i => {
            i.classList.remove('active');
            if (i.dataset.page === prevPage) i.classList.add('active');
        });
        showPage(prevPage, false);
    }
}

function showToast(msg, type = 'success') {
    const toast = document.getElementById('toast');
    toast.textContent = msg;
    toast.className = 'toast ' + type + ' show';
    setTimeout(() => toast.classList.remove('show'), 3000);
}

function openModal(title, body, footer = '') {
    document.getElementById('modalTitle').textContent = title;
    document.getElementById('modalBody').innerHTML = body;
    document.getElementById('modalFooter').innerHTML = footer;
    document.getElementById('modalOverlay').classList.add('show');
}

function closeModal() {
    document.getElementById('modalOverlay').classList.remove('show');
}

function copyToClipboard(text) {
    navigator.clipboard.writeText(text);
    showToast('Copied to clipboard!');
}

// ========== RENDER ALL PAGES ==========
function renderAllPages() {
    const container = document.getElementById('page-container');
    container.innerHTML = `
        ${renderDashboard()}
        ${renderNews()}
        ${renderRealtors()}
        ${renderViralContent()}
        ${renderGenerator()}
        ${renderLibrary()}
        ${renderVideoScripts()}
        ${renderScheduler()}
        ${renderPosting()}
        ${renderAutoPost()}
        ${renderAnalytics()}
        ${renderCompetitors()}
        ${renderHashtags()}
        ${renderNeighborhoods()}
        ${renderLeads()}
        ${renderEmail()}
        ${renderSettings()}
        ${renderManual()}
        ${renderAIWriter()}
        ${renderAIAssistant()}
        ${renderAIPropertyAnalyzer()}
        ${renderAIClientMatcher()}
        ${renderAIMarketPredictor()}
        ${renderAIObjectionHandler()}
        ${renderAINeighborhoodExpert()}
        ${renderAIOpenHouse()}
        ${renderAIContractReviewer()}
    `;
}

// ========== DASHBOARD ==========
function renderDashboard() {
    return `
    <section class="page-section active" id="page-dashboard">
        <div class="page-header">
            <h2>&#127968; Welcome, Ela!</h2>
            <p>Your PRO social media command center is ready. ${LIVE_DATA.date}</p>
        </div>

        <!-- LIVE MARKET DATA -->
        <div class="card" style="background: linear-gradient(135deg, #1a1a2e, #16213e); color: white; margin-bottom: 1.5rem;">
            <div style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 1rem;">
                <div>
                    <div style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.5rem;">
                        <span class="live-indicator"></span>
                        <span style="font-size: 0.8rem; opacity: 0.8;">LIVE MARKET DATA</span>
                    </div>
                    <div style="font-size: 2.5rem; font-weight: 700;">${LIVE_DATA.mortgageRate}%</div>
                    <div style="font-size: 0.9rem; opacity: 0.8;">30-Year Fixed Rate</div>
                    <div style="color: #4ade80; font-size: 0.85rem; margin-top: 0.3rem;">&#9660; ${Math.abs(LIVE_DATA.rateChange)}% from last week</div>
                </div>
                <div style="text-align: center;">
                    <div style="font-size: 1.8rem; font-weight: 700;">$${(LIVE_DATA.cincinnatiMedianPrice/1000).toFixed(0)}K</div>
                    <div style="font-size: 0.85rem; opacity: 0.8;">Cincinnati Median</div>
                    <div style="color: #4ade80; font-size: 0.85rem;">&#9650; ${LIVE_DATA.cincinnatiPriceChange}% YoY</div>
                </div>
                <div style="text-align: center;">
                    <div style="font-size: 1.8rem; font-weight: 700;">${LIVE_DATA.inventory}</div>
                    <div style="font-size: 0.85rem; opacity: 0.8;">Months Supply</div>
                    <div style="color: #fbbf24; font-size: 0.85rem;">Seller's Market</div>
                </div>
                <div>
                    <button class="btn btn-warning" onclick="generateRatePost()" style="margin-bottom: 0.5rem; width: 100%;">&#9889; Rate Drop Post</button>
                    <button class="btn" style="background: rgba(255,255,255,0.2); color: white; width: 100%;" onclick="showToast('Data refreshed!')">&#128260; Refresh</button>
                </div>
            </div>
        </div>

        <!-- STATS ROW -->
        <div class="grid-5" style="margin-bottom: 1.5rem;">
            <div class="stat-card instagram"><div class="stat-number">${INSTAGRAM_POSTS.length}</div><div class="stat-label">Instagram Posts</div></div>
            <div class="stat-card facebook"><div class="stat-number">${FACEBOOK_POSTS.length}</div><div class="stat-label">Facebook Posts</div></div>
            <div class="stat-card youtube"><div class="stat-number">${VIDEO_SCRIPTS.length}</div><div class="stat-label">Video Scripts</div></div>
            <div class="stat-card tiktok"><div class="stat-number">${VIRAL_REALTORS.national.length}</div><div class="stat-label">Viral Realtors</div></div>
            <div class="stat-card success"><div class="stat-number">${postedHistory.length}</div><div class="stat-label">Posted This Month</div></div>
        </div>

        <div class="grid-2">
            <!-- QUICK ACTIONS -->
            <div class="card">
                <div class="card-header"><span class="card-title">&#9889; Quick Actions</span></div>
                <div style="display: grid; gap: 0.5rem;">
                    <button class="btn btn-gradient btn-lg" onclick="document.querySelector('[data-page=generator]').click()" style="width:100%;">&#129302; AI Generate Content</button>
                    <button class="btn btn-success btn-lg" onclick="document.querySelector('[data-page=posting]').click()" style="width:100%;">&#128228; Post to Social Media</button>
                    <button class="btn btn-primary" onclick="document.querySelector('[data-page=viral]').click()" style="width:100%;">&#128293; View Viral Content</button>
                    <button class="btn btn-outline" onclick="document.querySelector('[data-page=realtors]').click()" style="width:100%;">&#11088; Study Top Realtors</button>
                </div>
            </div>

            <!-- VIRAL REALTORS PREVIEW -->
            <div class="card">
                <div class="card-header"><span class="card-title">&#128293; Today's Viral Realtors</span><span class="nav-badge new">LIVE</span></div>
                ${VIRAL_REALTORS.national.slice(0, 3).map(r => `
                    <div style="display: flex; align-items: center; gap: 1rem; padding: 0.8rem; background: var(--pale-blue); border-radius: 8px; margin-bottom: 0.5rem;">
                        <div class="realtor-avatar" style="width: 45px; height: 45px; font-size: 1rem;">${r.name.split(' ').map(n=>n[0]).join('')}</div>
                        <div style="flex: 1;">
                            <div style="font-weight: 600;">${r.name}</div>
                            <div style="font-size: 0.8rem; color: var(--gray);">${r.platform} â€¢ ${r.followers}</div>
                        </div>
                        <span class="viral-badge">&#128293;</span>
                    </div>
                `).join('')}
                <button class="btn btn-sm btn-outline" onclick="document.querySelector('[data-page=realtors]').click()" style="width: 100%; margin-top: 0.5rem;">View All ${VIRAL_REALTORS.national.length + VIRAL_REALTORS.cincinnati.length} Realtors</button>
            </div>
        </div>

        <!-- LATEST NEWS -->
        <div class="card">
            <div class="card-header">
                <span class="card-title">&#128240; Latest Headlines</span>
                <div style="display: flex; align-items: center; gap: 0.5rem;">
                    <span class="live-indicator"></span>
                    <span style="font-size: 0.8rem; color: var(--gray);">LIVE</span>
                </div>
            </div>
            <div class="grid-2">
                <div>
                    <h4 style="color: var(--success); margin-bottom: 0.5rem;">&#127961; Cincinnati</h4>
                    ${NEWS.cincinnati.slice(0, 3).map(n => `
                        <div class="news-item cincinnati" onclick="useNewsHeadline('${n.headline.replace(/'/g, "\\'")}')">
                            <div class="news-source">${n.live ? '<span class="live-indicator"></span>' : ''}${n.source}</div>
                            <div class="news-headline">${n.headline}</div>
                            <div class="news-time">${n.time}</div>
                        </div>
                    `).join('')}
                </div>
                <div>
                    <h4 style="color: var(--primary); margin-bottom: 0.5rem;">&#127758; National</h4>
                    ${NEWS.national.slice(0, 3).map(n => `
                        <div class="news-item national" onclick="useNewsHeadline('${n.headline.replace(/'/g, "\\'")}')">
                            <div class="news-source">${n.live ? '<span class="live-indicator"></span>' : ''}${n.source}</div>
                            <div class="news-headline">${n.headline}</div>
                            <div class="news-time">${n.time}</div>
                        </div>
                    `).join('')}
                </div>
            </div>
        </div>
    </section>`;
}

function generateRatePost() {
    const post = INSTAGRAM_POSTS.find(p => p.title.includes('Rate'));
    if (post) {
        copyToClipboard(post.caption + '\n\n' + post.hashtags);
        showToast('Rate drop post copied! Ready to post!');
    }
}

function useNewsHeadline(headline) {
    localStorage.setItem('pendingHeadline', headline);
    showToast('Headline saved! Go to AI Generator to create a post.');
    document.querySelector('[data-page="generator"]').click();
}

// ========== NEWS AGGREGATOR ==========
function renderNews() {
    return `
    <section class="page-section" id="page-news">
        <div class="page-header">
            <h2>&#128240; Live News Aggregator</h2>
            <p>50+ sources â€¢ Real-time updates â€¢ Click any headline to create content</p>
        </div>

        <div style="display: flex; gap: 0.5rem; margin-bottom: 1.5rem; flex-wrap: wrap; align-items: center;">
            <div style="display: flex; align-items: center; gap: 0.5rem; margin-right: 1rem;">
                <span class="live-indicator"></span>
                <span style="font-size: 0.85rem; color: var(--gray);">LIVE UPDATES</span>
            </div>
            <button class="btn btn-primary" onclick="showToast('News refreshed!')">&#128260; Refresh All</button>
            <button class="btn btn-outline active" id="filter-all" onclick="filterNews('all')">All (${NEWS.cincinnati.length + NEWS.national.length + NEWS.commercial.length + NEWS.economy.length})</button>
            <button class="btn btn-outline" id="filter-cincinnati" onclick="filterNews('cincinnati')">Cincinnati (${NEWS.cincinnati.length})</button>
            <button class="btn btn-outline" id="filter-national" onclick="filterNews('national')">National (${NEWS.national.length})</button>
            <button class="btn btn-outline" id="filter-commercial" onclick="filterNews('commercial')">Commercial (${NEWS.commercial.length})</button>
            <button class="btn btn-outline" id="filter-economy" onclick="filterNews('economy')">Economy (${NEWS.economy.length})</button>
        </div>

        <div class="grid-2">
            <div>
                <div class="card" id="news-cincinnati-card">
                    <div class="card-header">
                        <span class="card-title" style="color: var(--success);">&#127961; Cincinnati & NKY</span>
                        <span class="cincinnati-badge">LOCAL</span>
                    </div>
                    <div id="news-cincinnati" style="max-height: 500px; overflow-y: auto;">
                        ${NEWS.cincinnati.map(n => `
                            <div class="news-item cincinnati" onclick="useNewsHeadline('${n.headline.replace(/'/g, "\\'")}')">
                                <div class="news-source">${n.live ? '<span class="live-indicator"></span>' : ''}${n.source}</div>
                                <div class="news-headline">${n.headline}</div>
                                <div class="news-time">${n.time}</div>
                            </div>
                        `).join('')}
                    </div>
                </div>

                <div class="card" id="news-economy-card">
                    <div class="card-header">
                        <span class="card-title" style="color: #9c27b0;">&#128200; Economy & Fed</span>
                    </div>
                    <div id="news-economy">
                        ${NEWS.economy.map(n => `
                            <div class="news-item economy" onclick="useNewsHeadline('${n.headline.replace(/'/g, "\\'")}')">
                                <div class="news-source">${n.live ? '<span class="live-indicator"></span>' : ''}${n.source}</div>
                                <div class="news-headline">${n.headline}</div>
                                <div class="news-time">${n.time}</div>
                            </div>
                        `).join('')}
                    </div>
                </div>
            </div>

            <div>
                <div class="card" id="news-national-card">
                    <div class="card-header">
                        <span class="card-title" style="color: var(--primary);">&#127758; National Real Estate</span>
                    </div>
                    <div id="news-national" style="max-height: 400px; overflow-y: auto;">
                        ${NEWS.national.map(n => `
                            <div class="news-item national ${n.isRates ? 'rates' : ''}" onclick="useNewsHeadline('${n.headline.replace(/'/g, "\\'")}')">
                                <div class="news-source">${n.live ? '<span class="live-indicator"></span>' : ''}${n.source}</div>
                                <div class="news-headline">${n.headline}</div>
                                <div class="news-time">${n.time}</div>
                            </div>
                        `).join('')}
                    </div>
                </div>

                <div class="card" id="news-commercial-card">
                    <div class="card-header">
                        <span class="card-title" style="color: var(--warning);">&#127970; Commercial</span>
                    </div>
                    <div id="news-commercial">
                        ${NEWS.commercial.map(n => `
                            <div class="news-item commercial" onclick="useNewsHeadline('${n.headline.replace(/'/g, "\\'")}')">
                                <div class="news-source">${n.source}</div>
                                <div class="news-headline">${n.headline}</div>
                                <div class="news-time">${n.time}</div>
                            </div>
                        `).join('')}
                    </div>
                </div>
            </div>
        </div>
    </section>`;
}

function filterNews(category) {
    document.querySelectorAll('#page-news .btn-outline').forEach(b => b.classList.remove('active'));
    document.getElementById('filter-' + category).classList.add('active');

    const cards = {
        cincinnati: document.getElementById('news-cincinnati-card'),
        national: document.getElementById('news-national-card'),
        commercial: document.getElementById('news-commercial-card'),
        economy: document.getElementById('news-economy-card')
    };

    Object.values(cards).forEach(card => card.style.display = category === 'all' ? 'block' : 'none');
    if (category !== 'all' && cards[category]) cards[category].style.display = 'block';

    showToast('Showing ' + (category === 'all' ? 'all news' : category + ' news'));
}

// ========== VIRAL REALTORS ==========
function renderRealtors() {
    return `
    <section class="page-section" id="page-realtors">
        <div class="page-header">
            <h2>&#11088; Viral Realtor Tracker</h2>
            <p>Live tracking of ${VIRAL_REALTORS.national.length + VIRAL_REALTORS.cincinnati.length} top-performing agents â€¢ Updated January 2026</p>
        </div>

        <div class="tabs">
            <button class="tab active" onclick="showRealtorTab('national')">&#128293; National Viral Stars (${VIRAL_REALTORS.national.length})</button>
            <button class="tab" onclick="showRealtorTab('cincinnati')">&#127961; Cincinnati Top Agents (${VIRAL_REALTORS.cincinnati.length})</button>
            <button class="tab" onclick="showRealtorTab('trending')">&#128200; Trending Content Types</button>
        </div>

        <div id="realtor-content">${renderRealtorList('national')}</div>
    </section>`;
}

function showRealtorTab(tab) {
    document.querySelectorAll('#page-realtors .tab').forEach(t => t.classList.remove('active'));
    event.target.classList.add('active');
    document.getElementById('realtor-content').innerHTML = tab === 'trending' ? renderTrendingContent() : renderRealtorList(tab);
}

function renderRealtorList(type) {
    const list = VIRAL_REALTORS[type];
    return `
        <div class="card" style="background: linear-gradient(135deg, ${type === 'national' ? '#ff6b6b, #ee5a5a' : '#27ae60, #2ecc71'}); color: white; margin-bottom: 1.5rem;">
            <h3>${type === 'national' ? '&#128293; National Viral Stars - January 2026' : '&#127961; Cincinnati Top Agents - January 2026'}</h3>
            <p>${type === 'national' ? 'These agents have a combined following of 20M+. Study their strategies!' : 'Your local competition. Know what they\'re doing!'}</p>
        </div>
        <div class="grid-2">
            ${list.map((r, i) => `
                <div class="realtor-card ${r.isCincinnati ? 'cincinnati' : ''} ${r.isViral ? 'viral' : ''}">
                    <div class="realtor-header">
                        <div class="realtor-avatar" style="background: url('${r.photo || ''}') center/cover, linear-gradient(135deg, var(--primary), var(--secondary));">
                            ${!r.photo ? r.name.split(' ').map(n=>n[0]).join('') : ''}
                        </div>
                        <div>
                            <div class="realtor-name">
                                ${r.name}
                                ${r.isCincinnati ? '<span class="cincinnati-badge">CINCINNATI</span>' : ''}
                                ${r.isViral ? '<span class="viral-badge">&#128293; VIRAL</span>' : ''}
                            </div>
                            <div class="realtor-handle">${r.handle}</div>
                            <div class="realtor-location">${r.location} â€¢ ${r.brokerage || r.platform}</div>
                        </div>
                    </div>

                    <!-- Social Media Links -->
                    <div style="display: flex; gap: 0.4rem; flex-wrap: wrap; margin-bottom: 0.8rem;">
                        ${r.socialLinks ? Object.entries(r.socialLinks).map(([platform, data]) => `
                            <a href="${data.url}" target="_blank" onclick="event.stopPropagation();"
                               style="display: inline-flex; align-items: center; gap: 0.3rem; padding: 0.3rem 0.6rem; border-radius: 6px; font-size: 0.75rem; text-decoration: none; color: white; background: ${getSocialColor(platform)}; transition: transform 0.2s, opacity 0.2s;"
                               onmouseover="this.style.transform='scale(1.05)'; this.style.opacity='0.9';"
                               onmouseout="this.style.transform='scale(1)'; this.style.opacity='1';"
                               title="${platform.charAt(0).toUpperCase() + platform.slice(1)}${data.followers ? ' - ' + data.followers + ' followers' : ''}">
                                ${getSocialIcon(platform)}
                                <span>${data.followers || platform.charAt(0).toUpperCase() + platform.slice(1)}</span>
                            </a>
                        `).join('') : '<span style="font-size: 0.8rem; color: var(--gray);">No social links available</span>'}
                    </div>

                    <div style="font-size: 0.85rem; color: var(--gray); margin-bottom: 0.5rem;">${r.specialty}</div>
                    <div class="realtor-stats-grid">
                        <div class="realtor-stat"><div class="realtor-stat-num">${r.followers}</div><div class="realtor-stat-label">Total Followers</div></div>
                        <div class="realtor-stat"><div class="realtor-stat-num">${r.transactions}</div><div class="realtor-stat-label">Transactions</div></div>
                        <div class="realtor-stat"><div class="realtor-stat-num">${r.engagement || 'N/A'}</div><div class="realtor-stat-label">Engagement</div></div>
                    </div>
                    <button class="btn btn-sm btn-primary" style="width: 100%; margin-top: 0.8rem;" onclick="event.stopPropagation(); showRealtorDetail(${i}, '${type}')">&#128218; Study Their Strategy</button>
                </div>
            `).join('')}
        </div>
    `;
}

function getSocialColor(platform) {
    const colors = {
        tiktok: '#000000',
        instagram: '#e1306c',
        youtube: '#ff0000',
        facebook: '#1877f2',
        linkedin: '#0077b5',
        twitter: '#1da1f2',
        website: '#4a90e2'
    };
    return colors[platform] || '#666666';
}

function getSocialIcon(platform) {
    const icons = {
        tiktok: '<svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor"><path d="M19.59 6.69a4.83 4.83 0 0 1-3.77-4.25V2h-3.45v13.67a2.89 2.89 0 0 1-5.2 1.74 2.89 2.89 0 0 1 2.31-4.64 2.93 2.93 0 0 1 .88.13V9.4a6.84 6.84 0 0 0-1-.05A6.33 6.33 0 0 0 5 20.1a6.34 6.34 0 0 0 10.86-4.43v-7a8.16 8.16 0 0 0 4.77 1.52v-3.4a4.85 4.85 0 0 1-1-.1z"/></svg>',
        instagram: '<svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/></svg>',
        youtube: '<svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor"><path d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"/></svg>',
        facebook: '<svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor"><path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/></svg>',
        linkedin: '<svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor"><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/></svg>',
        twitter: '<svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor"><path d="M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"/></svg>',
        website: '<svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor"><path d="M12 0C5.373 0 0 5.373 0 12s5.373 12 12 12 12-5.373 12-12S18.627 0 12 0zm-1 19.93C6.945 19.442 4 16.075 4 12c0-.343.024-.681.07-1.013L9 16v1c0 1.1.9 2 2 2v.93zm6.186-2.186A1.99 1.99 0 0016 16h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41C17.927 5.73 20 8.615 20 12c0 2.22-.91 4.23-2.386 5.67l-.428.077z"/></svg>'
    };
    return icons[platform] || '<svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor"><circle cx="12" cy="12" r="10"/></svg>';
}

function showRealtorDetail(index, type) {
    const r = VIRAL_REALTORS[type][index];

    // Build social links HTML
    let socialLinksHtml = '';
    if (r.socialLinks) {
        socialLinksHtml = `
        <div class="card" style="margin-bottom: 1rem;">
            <h4 style="margin-bottom: 0.8rem;">&#128279; Social Media Profiles - Click to Visit</h4>
            <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 0.5rem;">
                ${Object.entries(r.socialLinks).map(([platform, data]) => `
                    <a href="${data.url}" target="_blank"
                       style="display: flex; align-items: center; gap: 0.5rem; padding: 0.6rem 0.8rem; border-radius: 8px; text-decoration: none; color: white; background: ${getSocialColor(platform)}; transition: all 0.2s;"
                       onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 4px 12px rgba(0,0,0,0.2)';"
                       onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='none';">
                        ${getSocialIcon(platform)}
                        <div style="flex: 1;">
                            <div style="font-weight: 600; font-size: 0.85rem;">${platform.charAt(0).toUpperCase() + platform.slice(1)}</div>
                            <div style="font-size: 0.75rem; opacity: 0.9;">${data.handle}</div>
                        </div>
                        ${data.followers ? `<div style="font-size: 0.75rem; font-weight: 600;">${data.followers}</div>` : ''}
                    </a>
                `).join('')}
            </div>
        </div>`;
    }

    openModal(
        `&#11088; ${r.name}`,
        `<div style="margin-bottom: 1rem;">
            <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 1rem;">
                <div class="realtor-avatar" style="width: 100px; height: 100px; font-size: 2rem; background: url('${r.photo || ''}') center/cover, linear-gradient(135deg, var(--primary), var(--secondary));">
                    ${!r.photo ? r.name.split(' ').map(n=>n[0]).join('') : ''}
                </div>
                <div>
                    <h3 style="margin-bottom: 0.3rem;">${r.name} ${r.isViral ? '<span class="viral-badge">&#128293; VIRAL</span>' : ''} ${r.isCincinnati ? '<span class="cincinnati-badge">CINCINNATI</span>' : ''}</h3>
                    <p style="color: var(--primary); font-weight: 600;">${r.handle}</p>
                    <p style="color: var(--gray);">${r.location} â€¢ ${r.brokerage || r.platform}</p>
                </div>
            </div>
            ${r.bio ? `<p style="font-size: 0.9rem; color: var(--navy); line-height: 1.5; background: var(--pale-blue); padding: 0.8rem; border-radius: 8px;">${r.bio}</p>` : ''}
        </div>

        <div class="grid-4" style="margin-bottom: 1rem;">
            <div class="stat-card"><div class="stat-number" style="font-size: 1.2rem;">${r.followers}</div><div class="stat-label">Total Followers</div></div>
            <div class="stat-card"><div class="stat-number" style="font-size: 1.2rem;">${r.transactions}</div><div class="stat-label">Transactions</div></div>
            <div class="stat-card"><div class="stat-number" style="font-size: 1.2rem;">${r.engagement || 'N/A'}</div><div class="stat-label">Engagement</div></div>
            <div class="stat-card"><div class="stat-number" style="font-size: 1.2rem;">${r.avgPrice || 'N/A'}</div><div class="stat-label">Avg Price</div></div>
        </div>

        ${socialLinksHtml}

        <div class="grid-2" style="margin-bottom: 1rem;">
            <div class="card" style="margin-bottom: 0;">
                <h4 style="margin-bottom: 0.5rem;">&#127919; Specialty</h4>
                <p style="font-size: 0.9rem;">${r.specialty}</p>
            </div>
            <div class="card" style="margin-bottom: 0;">
                <h4 style="margin-bottom: 0.5rem;">&#128250; Top Content Types</h4>
                <p style="font-size: 0.9rem;">${r.topContent || 'Various content types'}</p>
            </div>
        </div>

        ${r.recentViralPost ? `
        <div class="card" style="margin-bottom: 1rem; background: #fff5f5; border: 2px solid #ffcdd2;">
            <h4 style="margin-bottom: 0.5rem; color: var(--danger);">&#128293; Recent Viral Post</h4>
            <p style="font-size: 0.9rem;">${r.recentViralPost}</p>
        </div>
        ` : ''}

        <div class="card" style="background: linear-gradient(135deg, #e8f5e9, #c8e6c9);">
            <h4 style="margin-bottom: 0.5rem; color: var(--success);">&#128161; Strategy Tip for Ela</h4>
            <p style="font-weight: 500; font-size: 0.9rem;">${r.tip}</p>
        </div>

        <div style="margin-top: 1rem; padding: 1rem; background: var(--pale-blue); border-radius: 8px;">
            <h4 style="margin-bottom: 0.5rem;">&#128640; How to Study This Realtor</h4>
            <ol style="font-size: 0.85rem; margin-left: 1.2rem; line-height: 1.6;">
                <li>Click on their social links above to visit their profiles</li>
                <li>Study their most popular posts (sort by views/likes)</li>
                <li>Note their posting frequency and timing</li>
                <li>Analyze their captions, hooks, and calls to action</li>
                <li>Adapt their successful formats for Cincinnati market</li>
            </ol>
        </div>`,
        `<button class="btn btn-outline" onclick="closeModal()">Close</button>
         <button class="btn btn-primary" onclick="closeModal(); showToast('Opening AI Generator to create similar content...');">&#10024; Create Similar Content</button>`
    );
}

function renderTrendingContent() {
    return `
        <div class="card" style="background: linear-gradient(135deg, #667eea, #764ba2); color: white; margin-bottom: 1.5rem;">
            <h3 style="margin-bottom: 0.5rem;">&#128293; What's Working Right Now - January 2026</h3>
            <p>Based on analysis of 20M+ posts from top-performing real estate content across all platforms.</p>
        </div>
        ${TRENDING_CONTENT.map(t => `
            <div class="trending-item">
                <div style="display: flex; align-items: flex-start; gap: 1rem;">
                    <div class="trending-rank">#${t.rank}</div>
                    <div style="flex: 1;">
                        <span class="trending-type">${t.type}</span>
                        <h4 style="margin: 0.3rem 0;">${t.title}</h4>
                        <p style="font-size: 0.9rem; color: var(--gray); margin-bottom: 0.5rem;">${t.description}</p>
                        <div class="engagement-bar"><div class="engagement-fill" style="width: ${t.engagement}%;"></div></div>
                        <p style="font-size: 0.75rem; color: var(--gray); margin-top: 0.3rem;">${t.engagement}% engagement rate</p>
                        <div style="background: #e8f5e9; padding: 0.8rem; border-radius: 6px; margin-top: 0.8rem;">
                            <strong style="color: var(--success);">&#128161; Tip:</strong> ${t.tip}
                        </div>
                        <div style="background: #fff3cd; padding: 0.5rem 0.8rem; border-radius: 6px; margin-top: 0.5rem; font-size: 0.85rem;">
                            <strong>&#128202; Stat:</strong> ${t.stat}
                        </div>
                    </div>
                </div>
            </div>
        `).join('')}
    `;
}

// ========== VIRAL CONTENT PAGE ==========
function renderViralContent() {
    return `
    <section class="page-section" id="page-viral">
        <div class="page-header" style="background: linear-gradient(135deg, #ff6b6b, #ee5a5a);">
            <h2>&#128293; Viral Content Inspiration</h2>
            <p>Real examples from top realtors â€¢ Adapt these for your Cincinnati market</p>
        </div>

        <div class="card" style="background: #fff5f5; border: 2px solid #ffcdd2; margin-bottom: 1.5rem;">
            <h3 style="color: var(--danger); margin-bottom: 1rem;">&#128293; This Week's Viral Posts</h3>
            <p style="margin-bottom: 1rem;">These posts got millions of views. Study what worked and adapt for your audience!</p>
        </div>

        ${VIRAL_EXAMPLES.map(v => `
            <div class="viral-content-card">
                <div class="viral-source">
                    <strong>${v.source}</strong>
                    <span style="background: ${v.platform === 'TikTok' ? '#000' : v.platform === 'Instagram' ? '#e1306c' : '#ff0000'}; color: white; padding: 0.2rem 0.5rem; border-radius: 4px; font-size: 0.75rem;">${v.platform}</span>
                </div>
                <h4 style="margin: 0.5rem 0;">${v.content}</h4>
                <div class="viral-metrics">
                    <span>&#128065; ${v.views} views</span>
                    <span>&#128200; ${v.engagement} engagement</span>
                </div>
                <div style="margin-top: 1rem;">
                    <div style="background: #e8f5e9; padding: 0.8rem; border-radius: 6px; margin-bottom: 0.5rem;">
                        <strong style="color: var(--success);">&#128161; What Worked:</strong> ${v.whatWorked}
                    </div>
                    <div style="background: var(--pale-blue); padding: 0.8rem; border-radius: 6px;">
                        <strong style="color: var(--primary);">&#127919; Adapt for Cincinnati:</strong> ${v.adaptFor}
                    </div>
                </div>
                <button class="btn btn-sm btn-primary" style="margin-top: 1rem;" onclick="createInspiredPost('${v.source}')">&#10024; Create Similar Post</button>
            </div>
        `).join('')}

        <div class="card" style="background: linear-gradient(135deg, #667eea, #764ba2); color: white; margin-top: 1.5rem;">
            <h3>&#128640; Key Takeaways for Going Viral</h3>
            <div class="grid-3" style="margin-top: 1rem;">
                <div style="background: rgba(255,255,255,0.1); padding: 1rem; border-radius: 8px;">
                    <h4>&#127909; Video First</h4>
                    <p style="font-size: 0.9rem; opacity: 0.9;">Short-form video gets 1200% more shares than text + image combined</p>
                </div>
                <div style="background: rgba(255,255,255,0.1); padding: 1rem; border-radius: 8px;">
                    <h4>&#128161; Hook in 2 Seconds</h4>
                    <p style="font-size: 0.9rem; opacity: 0.9;">You have 2 seconds to stop the scroll. Make them count!</p>
                </div>
                <div style="background: rgba(255,255,255,0.1); padding: 1rem; border-radius: 8px;">
                    <h4>&#127775; Be Authentic</h4>
                    <p style="font-size: 0.9rem; opacity: 0.9;">Glennda Baker proves you don't need luxury to go viral - just personality!</p>
                </div>
            </div>
        </div>
    </section>`;
}

function createInspiredPost(source) {
    showToast('Opening AI Generator with ' + source + ' inspiration...');
    document.querySelector('[data-page="generator"]').click();
}

// ========== AI GENERATOR ==========
function renderGenerator() {
    return `
    <section class="page-section" id="page-generator">
        <div class="page-header">
            <h2>&#129302; AI Content Generator</h2>
            <p>Generate professional social media content instantly for Cincinnati & NKY</p>
        </div>

        <!-- Configuration Row -->
        <div class="card" style="margin-bottom: 1rem;">
            <div class="grid-3">
                <div class="form-group" style="margin-bottom: 0;">
                    <label class="form-label">Content Type</label>
                    <select class="form-select" id="gen-type">
                        <option value="market_update">&#128200; Market Update</option>
                        <option value="educational">&#128218; Buyer Tips</option>
                        <option value="seller_tips">&#127968; Seller Tips</option>
                        <option value="neighborhood">&#128205; Neighborhood Spotlight</option>
                        <option value="success_story">&#127881; Success Story</option>
                        <option value="myth_buster">&#128161; Myth Buster</option>
                        <option value="personal">&#128149; Personal/Why I Love RE</option>
                        <option value="cta">&#128640; Call to Action</option>
                        <option value="open_house">&#127968; Open House Promo</option>
                        <option value="just_listed">&#10024; Just Listed</option>
                        <option value="just_sold">&#127881; Just Sold</option>
                        <option value="testimonial">&#11088; Client Testimonial</option>
                    </select>
                </div>
                <div class="form-group" style="margin-bottom: 0;">
                    <label class="form-label">Platform</label>
                    <select class="form-select" id="gen-platform">
                        <option value="instagram">&#128248; Instagram</option>
                        <option value="facebook">&#128172; Facebook</option>
                        <option value="tiktok">&#127909; TikTok/Reels Script</option>
                        <option value="linkedin">&#128188; LinkedIn</option>
                        <option value="twitter">&#128038; Twitter/X</option>
                    </select>
                </div>
                <div class="form-group" style="margin-bottom: 0;">
                    <label class="form-label">Neighborhood</label>
                    <select class="form-select" id="gen-neighborhood">
                        <option value="">-- Select Neighborhood --</option>
                        <optgroup label="Cincinnati - East Side">
                            <option value="Hyde Park">Hyde Park</option>
                            <option value="Oakley">Oakley</option>
                            <option value="Mt. Lookout">Mt. Lookout</option>
                            <option value="Columbia Tusculum">Columbia Tusculum</option>
                            <option value="Mariemont">Mariemont</option>
                            <option value="Terrace Park">Terrace Park</option>
                            <option value="Indian Hill">Indian Hill</option>
                            <option value="Madeira">Madeira</option>
                        </optgroup>
                        <optgroup label="Cincinnati - North">
                            <option value="Montgomery">Montgomery</option>
                            <option value="Blue Ash">Blue Ash</option>
                            <option value="Sycamore Township">Sycamore Township</option>
                            <option value="Mason">Mason</option>
                            <option value="West Chester">West Chester</option>
                            <option value="Liberty Township">Liberty Township</option>
                            <option value="Loveland">Loveland</option>
                            <option value="Symmes Township">Symmes Township</option>
                        </optgroup>
                        <optgroup label="Cincinnati - West Side">
                            <option value="Westwood">Westwood</option>
                            <option value="Mt. Airy">Mt. Airy</option>
                            <option value="Green Township">Green Township</option>
                            <option value="Harrison">Harrison</option>
                            <option value="Delhi">Delhi</option>
                        </optgroup>
                        <optgroup label="Cincinnati - Urban">
                            <option value="Over-the-Rhine">Over-the-Rhine</option>
                            <option value="Downtown">Downtown</option>
                            <option value="Clifton">Clifton</option>
                            <option value="Northside">Northside</option>
                            <option value="Mt. Adams">Mt. Adams</option>
                            <option value="Pendleton">Pendleton</option>
                        </optgroup>
                        <optgroup label="Warren County">
                            <option value="Wyoming">Wyoming</option>
                            <option value="Lebanon">Lebanon</option>
                            <option value="Deerfield Township">Deerfield Township</option>
                            <option value="Springboro">Springboro</option>
                        </optgroup>
                        <optgroup label="Northern Kentucky">
                            <option value="Fort Thomas">Fort Thomas</option>
                            <option value="Fort Mitchell">Fort Mitchell</option>
                            <option value="Covington">Covington</option>
                            <option value="Newport">Newport</option>
                            <option value="Park Hills">Park Hills</option>
                            <option value="Edgewood">Edgewood</option>
                            <option value="Florence">Florence</option>
                            <option value="Union">Union</option>
                        </optgroup>
                    </select>
                </div>
            </div>
            <div style="margin-top: 1rem;">
                <button class="btn btn-gradient btn-lg" onclick="generateContent()" style="width: 100%;">&#10024; Generate Content</button>
            </div>
        </div>

        <!-- Large Generated Content Display -->
        <div class="card">
            <div class="card-header">
                <span class="card-title">&#128196; Generated Content</span>
                <div style="display: flex; gap: 0.5rem;">
                    <button class="btn btn-sm btn-outline" onclick="regenerateContent()">&#128260; Regenerate</button>
                    <button class="btn btn-sm btn-outline" onclick="clearGenerated()">&#128465; Clear</button>
                </div>
            </div>
            <div id="gen-result" style="min-height: 500px; max-height: 700px; overflow-y: auto; background: var(--pale-blue); border-radius: 10px; padding: 1.5rem;">
                <div style="text-align: center; color: var(--gray); padding: 3rem;">
                    <div style="font-size: 4rem; margin-bottom: 1rem;">&#128071;</div>
                    <h3 style="margin-bottom: 0.5rem;">Ready to Generate!</h3>
                    <p>Select your options above and click "Generate Content"</p>
                    <p style="font-size: 0.85rem; margin-top: 1rem;">Or use the Quick Generate buttons below for instant content!</p>
                </div>
            </div>
        </div>

        <!-- Quick Generate by Content Type -->
        <div class="card" style="margin-top: 1rem;">
            <div class="card-header"><span class="card-title">&#9889; Quick Generate by Type</span></div>
            <div style="display: flex; gap: 0.5rem; flex-wrap: wrap;">
                <button class="btn btn-outline" onclick="quickGenerate('market_update')">&#128200; Market Update</button>
                <button class="btn btn-outline" onclick="quickGenerate('educational')">&#128218; Buyer Tips</button>
                <button class="btn btn-outline" onclick="quickGenerate('seller_tips')">&#127968; Seller Tips</button>
                <button class="btn btn-outline" onclick="quickGenerate('myth_buster')">&#128161; Myth Buster</button>
                <button class="btn btn-outline" onclick="quickGenerate('cta')">&#128640; CTA Post</button>
                <button class="btn btn-outline" onclick="quickGenerate('open_house')">&#127968; Open House</button>
                <button class="btn btn-outline" onclick="quickGenerate('just_listed')">&#10024; Just Listed</button>
                <button class="btn btn-outline" onclick="quickGenerate('testimonial')">&#11088; Testimonial</button>
            </div>
        </div>

        <!-- Quick Generate by Neighborhood -->
        <div class="card" style="margin-top: 1rem;">
            <div class="card-header"><span class="card-title">&#128205; Quick Generate by Neighborhood</span></div>
            <div style="display: flex; gap: 0.5rem; flex-wrap: wrap;">
                <button class="btn btn-outline" onclick="quickGenerateNeighborhood('Hyde Park')" style="border-color: var(--success); color: var(--success);">&#127795; Hyde Park</button>
                <button class="btn btn-outline" onclick="quickGenerateNeighborhood('Indian Hill')" style="border-color: #9c27b0; color: #9c27b0;">&#127984; Indian Hill</button>
                <button class="btn btn-outline" onclick="quickGenerateNeighborhood('Montgomery')" style="border-color: var(--primary); color: var(--primary);">&#127961; Montgomery</button>
                <button class="btn btn-outline" onclick="quickGenerateNeighborhood('Blue Ash')" style="border-color: #00bcd4; color: #00bcd4;">&#127961; Blue Ash</button>
                <button class="btn btn-outline" onclick="quickGenerateNeighborhood('Wyoming')" style="border-color: #ff9800; color: #ff9800;">&#127795; Wyoming</button>
                <button class="btn btn-outline" onclick="quickGenerateNeighborhood('Mason')" style="border-color: #4caf50; color: #4caf50;">&#127961; Mason</button>
                <button class="btn btn-outline" onclick="quickGenerateNeighborhood('Sycamore Township')" style="border-color: #795548; color: #795548;">&#127795; Sycamore</button>
                <button class="btn btn-outline" onclick="quickGenerateNeighborhood('Mariemont')" style="border-color: #e91e63; color: #e91e63;">&#127984; Mariemont</button>
                <button class="btn btn-outline" onclick="quickGenerateNeighborhood('Oakley')" style="border-color: #607d8b; color: #607d8b;">&#127961; Oakley</button>
                <button class="btn btn-outline" onclick="quickGenerateNeighborhood('Over-the-Rhine')" style="border-color: #ff5722; color: #ff5722;">&#127961; OTR</button>
                <button class="btn btn-outline" onclick="quickGenerateNeighborhood('Fort Thomas')" style="border-color: #3f51b5; color: #3f51b5;">&#127961; Ft. Thomas</button>
                <button class="btn btn-outline" onclick="quickGenerateNeighborhood('Loveland')" style="border-color: #8bc34a; color: #8bc34a;">&#127795; Loveland</button>
            </div>
        </div>
    </section>`;
}

function regenerateContent() {
    generateContent();
}

function clearGenerated() {
    document.getElementById('gen-result').innerHTML = `
        <div style="text-align: center; color: var(--gray); padding: 3rem;">
            <div style="font-size: 4rem; margin-bottom: 1rem;">&#128071;</div>
            <h3 style="margin-bottom: 0.5rem;">Ready to Generate!</h3>
            <p>Select your options above and click "Generate Content"</p>
        </div>
    `;
}

function quickGenerateNeighborhood(neighborhood) {
    document.getElementById('gen-type').value = 'neighborhood';
    document.getElementById('gen-neighborhood').value = neighborhood;
    generateContent();
}

function generateContent() {
    const type = document.getElementById('gen-type').value;
    const platform = document.getElementById('gen-platform').value;

    let post;
    if (platform === 'tiktok') {
        post = VIDEO_SCRIPTS.find(v => v.category.toLowerCase().includes(type.split('_')[0])) || VIDEO_SCRIPTS[0];
        document.getElementById('gen-result').innerHTML = `
            <div class="post-platform video">VIDEO SCRIPT - ${post.duration}</div>
            <h4>${post.title}</h4>
            <div style="font-size: 0.85rem; color: var(--gray); margin-bottom: 0.5rem;">${post.platform}</div>
            <div class="post-content">${post.script}</div>
            <div style="background: #fff3cd; padding: 0.8rem; border-radius: 6px; margin-top: 0.5rem; font-size: 0.85rem;">
                <strong>Notes:</strong> ${post.notes}
            </div>
            <div class="post-actions" style="margin-top: 1rem;">
                <button class="btn btn-primary" onclick="copyToClipboard(\`${post.script.replace(/`/g, "'")}\`)">&#128203; Copy Script</button>
                <button class="btn btn-success" onclick="showToast('Saved to library!')">&#128190; Save</button>
            </div>
        `;
    } else {
        post = platform === 'facebook'
            ? FACEBOOK_POSTS.find(p => p.category.toLowerCase().includes(type.split('_')[0])) || FACEBOOK_POSTS[0]
            : INSTAGRAM_POSTS.find(p => p.type === type) || INSTAGRAM_POSTS[0];

        const content = platform === 'facebook' ? post.content : post.caption;
        document.getElementById('gen-result').innerHTML = `
            <div class="post-platform ${platform}">${platform.toUpperCase()}</div>
            <h4>${post.title}</h4>
            <div class="post-content">${content}</div>
            <div class="post-hashtags">${post.hashtags}</div>
            <div class="post-actions" style="margin-top: 1rem;">
                <button class="btn btn-primary" onclick="copyToClipboard(\`${content.replace(/`/g, "'")}\n\n${post.hashtags}\`)">&#128203; Copy</button>
                <button class="btn btn-success" onclick="showToast('Saved!')">&#128190; Save</button>
                <button class="btn btn-warning" onclick="quickPost('${platform}', 0)">&#128640; Post Now</button>
            </div>
        `;
    }
    showToast('Content generated!');
}

function quickGenerate(type) {
    document.getElementById('gen-type').value = type;
    generateContent();
}

// ========== PLACEHOLDER PAGES ==========
function renderLibrary() {
    return `
    <section class="page-section" id="page-library">
        <div class="page-header">
            <h2>&#128218; Content Library</h2>
            <p>${INSTAGRAM_POSTS.length + FACEBOOK_POSTS.length + VIDEO_SCRIPTS.length}+ ready-to-post pieces</p>
        </div>
        <div class="tabs">
            <button class="tab active" onclick="showLibraryTab('instagram')">Instagram (${INSTAGRAM_POSTS.length})</button>
            <button class="tab" onclick="showLibraryTab('facebook')">Facebook (${FACEBOOK_POSTS.length})</button>
            <button class="tab" onclick="showLibraryTab('video')">Video Scripts (${VIDEO_SCRIPTS.length})</button>
        </div>
        <div id="library-content">${renderLibraryPosts('instagram')}</div>
    </section>`;
}

function showLibraryTab(tab) {
    document.querySelectorAll('#page-library .tab').forEach(t => t.classList.remove('active'));
    event.target.classList.add('active');
    document.getElementById('library-content').innerHTML = renderLibraryPosts(tab);
}

function renderLibraryPosts(type) {
    if (type === 'instagram') {
        return `<div class="grid-2">${INSTAGRAM_POSTS.map((p, i) => `
            <div class="post-card">
                <div class="post-header">
                    <span class="post-platform instagram">INSTAGRAM</span>
                    <span style="font-size: 0.8rem; color: var(--gray);">${p.bestTime || ''}</span>
                </div>
                <div class="post-title">${p.title}</div>
                <div style="font-size: 0.75rem; background: var(--pale-blue); display: inline-block; padding: 0.2rem 0.5rem; border-radius: 4px; margin-bottom: 0.5rem;">${p.category || 'General'}</div>
                <div class="post-content">${p.caption}</div>
                <div class="post-hashtags">${p.hashtags}</div>
                <div class="post-actions">
                    <button class="btn btn-sm btn-primary" onclick="copyToClipboard(\`${p.caption.replace(/`/g, "'")}\n\n${p.hashtags}\`)">Copy</button>
                    <button class="btn btn-sm btn-success" onclick="quickPost('instagram', ${i})">Quick Post</button>
                </div>
            </div>
        `).join('')}</div>`;
    } else if (type === 'facebook') {
        return `<div class="grid-2">${FACEBOOK_POSTS.map((p, i) => `
            <div class="post-card">
                <div class="post-header">
                    <span class="post-platform facebook">FACEBOOK</span>
                </div>
                <div class="post-title">${p.title}</div>
                <div class="post-content">${p.content}</div>
                <div class="post-hashtags">${p.hashtags}</div>
                <div class="post-actions">
                    <button class="btn btn-sm btn-primary" onclick="copyToClipboard(\`${p.content.replace(/`/g, "'")}\n\n${p.hashtags}\`)">Copy</button>
                    <button class="btn btn-sm btn-success" onclick="quickPost('facebook', ${i})">Quick Post</button>
                </div>
            </div>
        `).join('')}</div>`;
    } else {
        return `<div class="grid-2">${VIDEO_SCRIPTS.map((v, i) => `
            <div class="post-card" style="border-left: 4px solid var(--youtube);">
                <div class="post-header">
                    <span class="post-platform video">VIDEO ${v.duration}</span>
                    <span style="font-size: 0.8rem; color: var(--gray);">${v.platform}</span>
                </div>
                <div class="post-title">${v.title}</div>
                <div class="post-content">${v.script}</div>
                <div style="background: #fff3cd; padding: 0.5rem; border-radius: 4px; margin-top: 0.5rem; font-size: 0.85rem;">
                    <strong>Notes:</strong> ${v.notes}
                </div>
                <div class="post-actions">
                    <button class="btn btn-sm btn-primary" onclick="copyToClipboard(\`${v.script.replace(/`/g, "'")}\`)">Copy Script</button>
                </div>
            </div>
        `).join('')}</div>`;
    }
}

function quickPost(platform, index) {
    const content = platform === 'instagram'
        ? INSTAGRAM_POSTS[index].caption + '\n\n' + INSTAGRAM_POSTS[index].hashtags
        : FACEBOOK_POSTS[index].content + '\n\n' + FACEBOOK_POSTS[index].hashtags;
    copyToClipboard(content);
    window.open(platform === 'instagram' ? 'https://instagram.com' : 'https://facebook.com', '_blank');
    postedHistory.push({ platform, date: new Date().toISOString(), title: platform === 'instagram' ? INSTAGRAM_POSTS[index].title : FACEBOOK_POSTS[index].title });
    localStorage.setItem('postedHistory', JSON.stringify(postedHistory));
    showToast('Copied! ' + platform + ' opened.');
}

function renderVideoScripts() {
    return `
    <section class="page-section" id="page-scripts">
        <div class="page-header" style="background: linear-gradient(135deg, #ff0000, #cc0000);">
            <h2>&#127909; Video Scripts & AI Video Creator</h2>
            <p>${VIDEO_SCRIPTS.length} ready-to-record scripts + AI-powered video generation tools</p>
        </div>

        <!-- AI Video Creator Section -->
        <div class="card" style="margin-bottom: 1.5rem; background: linear-gradient(135deg, #1a1a2e, #16213e); color: white;">
            <div class="card-header" style="border-bottom-color: rgba(255,255,255,0.1);">
                <span class="card-title" style="color: white;">&#129302; AI Video Creator</span>
                <span style="background: var(--danger); color: white; padding: 0.2rem 0.6rem; border-radius: 4px; font-size: 0.75rem;">NEW!</span>
            </div>
            <p style="color: rgba(255,255,255,0.8); margin-bottom: 1rem;">Create professional real estate videos in minutes using AI-powered tools</p>

            <div class="grid-3" style="margin-bottom: 1rem;">
                <!-- Video Type Selection -->
                <div style="background: rgba(255,255,255,0.1); padding: 1rem; border-radius: 8px;">
                    <h4 style="margin-bottom: 0.5rem; color: white;">1. Choose Video Type</h4>
                    <select class="form-select" id="video-type" style="background: rgba(255,255,255,0.9);">
                        <option value="listing_tour">&#127968; Property Listing Tour</option>
                        <option value="market_update">&#128200; Market Update</option>
                        <option value="neighborhood">&#128205; Neighborhood Spotlight</option>
                        <option value="tips">&#128161; Buyer/Seller Tips</option>
                        <option value="testimonial">&#11088; Client Testimonial</option>
                        <option value="intro">&#128075; Agent Introduction</option>
                        <option value="open_house">&#127968; Open House Promo</option>
                        <option value="just_sold">&#127881; Just Sold Celebration</option>
                    </select>
                </div>

                <!-- Platform Selection -->
                <div style="background: rgba(255,255,255,0.1); padding: 1rem; border-radius: 8px;">
                    <h4 style="margin-bottom: 0.5rem; color: white;">2. Select Platform</h4>
                    <select class="form-select" id="video-platform" style="background: rgba(255,255,255,0.9);">
                        <option value="tiktok">&#127909; TikTok (15-60 sec)</option>
                        <option value="reels">&#128248; Instagram Reels (15-90 sec)</option>
                        <option value="shorts">&#128250; YouTube Shorts (up to 60 sec)</option>
                        <option value="youtube">&#128250; YouTube Video (1-10 min)</option>
                        <option value="stories">&#128247; Instagram/FB Stories (15 sec)</option>
                    </select>
                </div>

                <!-- Style Selection -->
                <div style="background: rgba(255,255,255,0.1); padding: 1rem; border-radius: 8px;">
                    <h4 style="margin-bottom: 0.5rem; color: white;">3. Video Style</h4>
                    <select class="form-select" id="video-style" style="background: rgba(255,255,255,0.9);">
                        <option value="professional">&#128188; Professional & Polished</option>
                        <option value="casual">&#128522; Casual & Friendly</option>
                        <option value="energetic">&#128293; High Energy & Fun</option>
                        <option value="storytelling">&#128218; Storytelling</option>
                        <option value="educational">&#127891; Educational</option>
                    </select>
                </div>
            </div>

            <button class="btn btn-lg" style="background: linear-gradient(135deg, #667eea, #764ba2); color: white; width: 100%; margin-bottom: 1rem;" onclick="generateVideoScript()">
                &#10024; Generate AI Video Script
            </button>

            <div id="generated-video-script" style="background: rgba(255,255,255,0.1); padding: 1rem; border-radius: 8px; min-height: 150px;">
                <p style="color: rgba(255,255,255,0.6); text-align: center; padding: 2rem;">
                    &#128071; Select your options above and click "Generate AI Video Script"
                </p>
            </div>
        </div>

        <!-- AI Video Tools Integration -->
        <div class="card" style="margin-bottom: 1.5rem;">
            <div class="card-header">
                <span class="card-title">&#128279; AI Video Creation Tools</span>
                <span style="font-size: 0.8rem; color: var(--gray);">External tools for creating videos from scripts</span>
            </div>
            <p style="color: var(--gray); margin-bottom: 1rem;">Use these AI-powered tools to turn your scripts into professional videos:</p>

            <div class="grid-3" style="gap: 1rem;">
                <div style="border: 2px solid var(--primary); border-radius: 12px; padding: 1.2rem; text-align: center; cursor: pointer; transition: all 0.3s;" onmouseover="this.style.transform='translateY(-3px)'; this.style.boxShadow='0 8px 20px rgba(0,0,0,0.15)';" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='none';" onclick="window.open('https://www.synthesia.io', '_blank')">
                    <div style="font-size: 2rem; margin-bottom: 0.5rem;">&#129302;</div>
                    <h4 style="color: var(--primary); margin-bottom: 0.3rem;">Synthesia</h4>
                    <p style="font-size: 0.8rem; color: var(--gray);">AI avatars read your scripts. Great for market updates & tips!</p>
                    <span style="display: inline-block; background: var(--success); color: white; padding: 0.2rem 0.5rem; border-radius: 4px; font-size: 0.7rem; margin-top: 0.5rem;">RECOMMENDED</span>
                </div>

                <div style="border: 2px solid var(--secondary); border-radius: 12px; padding: 1.2rem; text-align: center; cursor: pointer; transition: all 0.3s;" onmouseover="this.style.transform='translateY(-3px)'; this.style.boxShadow='0 8px 20px rgba(0,0,0,0.15)';" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='none';" onclick="window.open('https://www.heygen.com', '_blank')">
                    <div style="font-size: 2rem; margin-bottom: 0.5rem;">&#127916;</div>
                    <h4 style="color: var(--secondary); margin-bottom: 0.3rem;">HeyGen</h4>
                    <p style="font-size: 0.8rem; color: var(--gray);">Create your AI clone! Record once, generate unlimited videos.</p>
                    <span style="display: inline-block; background: var(--warning); color: white; padding: 0.2rem 0.5rem; border-radius: 4px; font-size: 0.7rem; margin-top: 0.5rem;">BEST FOR CLONING</span>
                </div>

                <div style="border: 2px solid var(--instagram); border-radius: 12px; padding: 1.2rem; text-align: center; cursor: pointer; transition: all 0.3s;" onmouseover="this.style.transform='translateY(-3px)'; this.style.boxShadow='0 8px 20px rgba(0,0,0,0.15)';" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='none';" onclick="window.open('https://www.canva.com/create/videos', '_blank')">
                    <div style="font-size: 2rem; margin-bottom: 0.5rem;">&#127912;</div>
                    <h4 style="color: var(--instagram); margin-bottom: 0.3rem;">Canva Video</h4>
                    <p style="font-size: 0.8rem; color: var(--gray);">Easy drag-and-drop video editor with templates.</p>
                    <span style="display: inline-block; background: var(--primary); color: white; padding: 0.2rem 0.5rem; border-radius: 4px; font-size: 0.7rem; margin-top: 0.5rem;">EASIEST</span>
                </div>

                <div style="border: 2px solid var(--success); border-radius: 12px; padding: 1.2rem; text-align: center; cursor: pointer; transition: all 0.3s;" onmouseover="this.style.transform='translateY(-3px)'; this.style.boxShadow='0 8px 20px rgba(0,0,0,0.15)';" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='none';" onclick="window.open('https://invideo.io', '_blank')">
                    <div style="font-size: 2rem; margin-bottom: 0.5rem;">&#127902;</div>
                    <h4 style="color: var(--success); margin-bottom: 0.3rem;">InVideo</h4>
                    <p style="font-size: 0.8rem; color: var(--gray);">Text-to-video with AI. Paste script, get video!</p>
                    <span style="display: inline-block; background: var(--success); color: white; padding: 0.2rem 0.5rem; border-radius: 4px; font-size: 0.7rem; margin-top: 0.5rem;">TEXT TO VIDEO</span>
                </div>

                <div style="border: 2px solid #9c27b0; border-radius: 12px; padding: 1.2rem; text-align: center; cursor: pointer; transition: all 0.3s;" onmouseover="this.style.transform='translateY(-3px)'; this.style.boxShadow='0 8px 20px rgba(0,0,0,0.15)';" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='none';" onclick="window.open('https://pictory.ai', '_blank')">
                    <div style="font-size: 2rem; margin-bottom: 0.5rem;">&#128253;</div>
                    <h4 style="color: #9c27b0; margin-bottom: 0.3rem;">Pictory</h4>
                    <p style="font-size: 0.8rem; color: var(--gray);">Turn scripts into videos with stock footage & captions.</p>
                    <span style="display: inline-block; background: #9c27b0; color: white; padding: 0.2rem 0.5rem; border-radius: 4px; font-size: 0.7rem; margin-top: 0.5rem;">AUTO CAPTIONS</span>
                </div>

                <div style="border: 2px solid #ff5722; border-radius: 12px; padding: 1.2rem; text-align: center; cursor: pointer; transition: all 0.3s;" onmouseover="this.style.transform='translateY(-3px)'; this.style.boxShadow='0 8px 20px rgba(0,0,0,0.15)';" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='none';" onclick="window.open('https://www.lumen5.com', '_blank')">
                    <div style="font-size: 2rem; margin-bottom: 0.5rem;">&#127775;</div>
                    <h4 style="color: #ff5722; margin-bottom: 0.3rem;">Lumen5</h4>
                    <p style="font-size: 0.8rem; color: var(--gray);">Blog/script to video in minutes. Great for market reports!</p>
                    <span style="display: inline-block; background: #ff5722; color: white; padding: 0.2rem 0.5rem; border-radius: 4px; font-size: 0.7rem; margin-top: 0.5rem;">BLOG TO VIDEO</span>
                </div>
            </div>
        </div>

        <!-- Script Library -->
        <div class="card">
            <div class="card-header">
                <span class="card-title">&#128218; Video Script Library (${VIDEO_SCRIPTS.length} Scripts)</span>
            </div>
            <div class="grid-2">
                ${VIDEO_SCRIPTS.map((v, i) => `
                    <div class="post-card" style="border-left: 4px solid var(--youtube);">
                        <div class="post-header">
                            <span class="post-platform video">${v.duration}</span>
                            <span style="font-size: 0.8rem; color: var(--gray);">${v.platform}</span>
                        </div>
                        <div class="post-title">${v.title}</div>
                        <div style="font-size: 0.75rem; background: var(--pale-blue); display: inline-block; padding: 0.2rem 0.5rem; border-radius: 4px; margin-bottom: 0.5rem;">${v.category}</div>
                        <div class="post-content">${v.script}</div>
                        <div style="background: #fff3cd; padding: 0.5rem; border-radius: 4px; margin-top: 0.5rem; font-size: 0.85rem;">
                            <strong>&#128161; Notes:</strong> ${v.notes}
                        </div>
                        <div class="post-actions">
                            <button class="btn btn-sm btn-primary" onclick="copyToClipboard(\`${v.script.replace(/`/g, "'")}\`)">&#128203; Copy Script</button>
                            <button class="btn btn-sm btn-success" onclick="openVideoCreator(${i})">&#127909; Create Video</button>
                        </div>
                    </div>
                `).join('')}
            </div>
        </div>
    </section>`;
}

function generateVideoScript() {
    const type = document.getElementById('video-type').value;
    const platform = document.getElementById('video-platform').value;
    const style = document.getElementById('video-style').value;

    const scripts = {
        listing_tour: {
            tiktok: `[HOOK - 0:00-0:03]\n"This ${LIVE_DATA.ela.neighborhoods[0]} home just hit the market and it's STUNNING!" ðŸ˜\n\n[TOUR - 0:03-0:45]\nâ€¢ Quick walk through each room\nâ€¢ Highlight best features\nâ€¢ Show the neighborhood\n\n[CTA - 0:45-0:60]\n"Want a private showing? Drop a ðŸ  in the comments or DM me!\n\nI'm Ela with ${LIVE_DATA.ela.brokerage}, ${LIVE_DATA.ela.experience} helping Cincinnati families find their dream homes."`,
            reels: `[HOOK - First 3 seconds are CRUCIAL!]\n"I just found the PERFECT home in [neighborhood]..." ðŸ âœ¨\n\n[THE REVEAL - Show exterior]\n"Just wait until you see inside..."\n\n[ROOM BY ROOM - Quick cuts]\nâ€¢ Living room - "Look at this natural light!"\nâ€¢ Kitchen - "Chef's dream right here"\nâ€¢ Primary - "This closet though..."\nâ€¢ Backyard - "Summer parties HERE"\n\n[THE CLOSE]\n"This won't last long at [price]. Link in bio for details!\n\nðŸ“ž Call Ela: ${LIVE_DATA.ela.phone}"`
        },
        market_update: {
            tiktok: `[HOOK]\n"Cincinnati home buyers, here's what you NEED to know this week!" ðŸ“Š\n\n[THE DATA]\nâ€¢ Mortgage rates: ${LIVE_DATA.mortgageRate}%\nâ€¢ Homes are selling in ${LIVE_DATA.daysOnMarket} days\nâ€¢ Inventory is [UP/DOWN]\n\n[WHAT IT MEANS]\n"This means [buyer/seller] advantage right now!"\n\n[CTA]\n"Questions? Comment below or DM me!\nI'm Ela - ${LIVE_DATA.ela.experience} in Cincinnati real estate."`,
            reels: `[START WITH STATS ON SCREEN]\n"Cincinnati Market Update - January 2026"\n\n[FACE TO CAMERA]\n"Hey Cincinnati! Let's talk about what's happening in our housing market..."\n\n[KEY POINTS]\n1. Rates at ${LIVE_DATA.mortgageRate}% - still historically good!\n2. Homes selling in ${LIVE_DATA.daysOnMarket} days average\n3. [Specific neighborhood] is HOT right now\n\n[ADVICE]\n"My advice? [Buyers should... / Sellers should...]"\n\n[CLOSE]\n"Questions? I'm always here to help!\nðŸ“ž ${LIVE_DATA.ela.phone}"`
        },
        neighborhood: {
            tiktok: `[HOOK]\n"Let me show you why ${LIVE_DATA.ela.neighborhoods[0]} is one of Cincinnati's BEST kept secrets!" ðŸ˜ï¸\n\n[THE TOUR]\nâ€¢ Coffee shop you HAVE to try\nâ€¢ This park is amazing for families\nâ€¢ Schools rated [X]/10\nâ€¢ Average home price: $[XXX]K\n\n[LOCAL GEM]\n"But my favorite part? [Something unique]"\n\n[CTA]\n"Want to see homes here? Comment [neighborhood name]!"`,
            reels: `[HOOK - Walking shot]\n"Welcome to ${LIVE_DATA.ela.neighborhoods[0]}!" âœ¨\n\n[WHAT MAKES IT SPECIAL]\nâ€¢ Historic architecture\nâ€¢ Walkable to [restaurants/shops]\nâ€¢ Amazing community vibe\nâ€¢ Great schools nearby\n\n[LOCAL FAVORITES]\n"My clients love [specific spot]..."\n\n[REAL TALK]\n"Homes here range from $[X] to $[X]\nBest value? [Specific tip]"\n\n[CTA]\n"Thinking about ${LIVE_DATA.ela.neighborhoods[0]}? Let's chat!\nðŸ“ž Ela: ${LIVE_DATA.ela.phone}"`
        },
        tips: {
            tiktok: `[HOOK]\n"The #1 mistake first-time buyers make in Cincinnati..." ðŸš«\n\n[THE MISTAKE]\n"They [specific mistake]..."\n\n[WHY IT'S BAD]\n"This costs them [money/time/stress]"\n\n[THE FIX]\n"Instead, do THIS: [solution]"\n\n[BONUS TIP]\n"Pro tip: [additional advice]"\n\n[CTA]\n"Save this for later! ðŸ“Œ\nQuestions? I'm Ela - ${LIVE_DATA.ela.experience} helping Cincinnati families!"`,
            reels: `[PATTERN INTERRUPT]\n"STOP! Before you buy a home in Cincinnati..." âœ‹\n\n[THE PROBLEM]\n"Most buyers don't know [important fact]..."\n\n[STORY]\n"I had a client who [brief story]..."\n\n[THE LESSON]\n"Here's what you should do instead:"\nâ€¢ Step 1\nâ€¢ Step 2\nâ€¢ Step 3\n\n[CTA]\n"Follow for more tips! DM me your questions!\nðŸ“ž ${LIVE_DATA.ela.phone}"`
        },
        testimonial: {
            tiktok: `[CLIENT QUOTE ON SCREEN]\n"Best realtor experience ever!"\n- The [Last Name] Family\n\n[STORY]\n"When [clients] came to me, they were [situation]..."\n\n[THE JOURNEY]\n"We found their dream home in [neighborhood]..."\n\n[THE RESULT]\n"Now they're [happy outcome]!"\n\n[CTA]\n"Ready to write YOUR success story?\nðŸ“ž ${LIVE_DATA.ela.phone}"`,
            reels: `[BEFORE]\n"6 months ago, [clients] thought they'd never find a home in their budget..."\n\n[THE CHALLENGE]\n"The market was tough, but we got creative..."\n\n[THE WIN]\n"After [X] showings, we found THE ONE in [neighborhood]!"\n\n[CLIENT WORDS]\n"[Direct quote from client]"\n\n[CTA]\n"Your dream home is out there. Let's find it together!\nðŸ“ž Ela: ${LIVE_DATA.ela.phone}"`
        },
        intro: {
            tiktok: `[HOOK]\n"Hey Cincinnati! I'm Ela..." ðŸ‘‹\n\n[WHO I AM]\n"${LIVE_DATA.ela.experience} helping families find their dream homes"\n\n[WHY ME]\nâ€¢ Born & raised here\nâ€¢ Know every neighborhood\nâ€¢ [Unique value prop]\n\n[WHAT I DO]\n"Whether you're buying your first home or selling to upgrade..."\n\n[CTA]\n"Let's connect! Link in bio or DM me!\nðŸ“ž ${LIVE_DATA.ela.phone}"`,
            reels: `[INTRO]\n"Hi! I'm Ela with ${LIVE_DATA.ela.brokerage}..." âœ¨\n\n[MY STORY]\n"I've been helping Cincinnati families for ${LIVE_DATA.ela.experience}..."\n\n[MY APPROACH]\n"I believe buying a home should be [exciting/stress-free/fun]..."\n\n[WHAT SETS ME APART]\nâ€¢ [Point 1]\nâ€¢ [Point 2]\nâ€¢ [Point 3]\n\n[CTA]\n"Ready to start your home journey? Let's chat!\nðŸ“ž ${LIVE_DATA.ela.phone}"`
        },
        open_house: {
            tiktok: `[HOOK]\n"OPEN HOUSE ALERT! ðŸ âœ¨"\n\n[DETAILS]\nðŸ“ [Address]\nðŸ“… This [Day]\nâ° [Time]\n\n[PREVIEW]\nâ€¢ [X] beds, [X] baths\nâ€¢ [Standout feature]\nâ€¢ [Neighborhood]\n\n[CTA]\n"See you there! Drop a ðŸ  if you're coming!\nðŸ“ž Ela: ${LIVE_DATA.ela.phone}"`,
            reels: `[TEASER]\n"This [Day], this gorgeous home opens its doors..." ðŸšªâœ¨\n\n[QUICK TOUR]\nâ€¢ Show exterior\nâ€¢ Best interior shots\nâ€¢ Unique features\n\n[THE DETAILS]\nðŸ“ [Address], [Neighborhood]\nðŸ“… [Day, Date]\nâ° [Start Time] - [End Time]\nðŸ’° Listed at $[Price]\n\n[CTA]\n"Can't make it? DM me for a private showing!\nðŸ“ž ${LIVE_DATA.ela.phone}"`
        },
        just_sold: {
            tiktok: `[CELEBRATION]\n"SOLD! ðŸŽ‰ðŸ "\n\n[THE STORY]\n"Helped the [Family Name] family find their dream home in [neighborhood]!"\n\n[THE JOURNEY]\n"[X] showings, [X] offers, SOLD!"\n\n[THANK YOU]\n"Congratulations to my amazing clients!"\n\n[CTA]\n"Your turn next? Let's talk!\nðŸ“ž ${LIVE_DATA.ela.phone}"`,
            reels: `[KEYS SHOT]\n*Handing over keys* ðŸ”‘\n\n"Another Cincinnati family HOME!" ðŸ â¤ï¸\n\n[THE STORY]\n"When [clients] first reached out, they wanted [goal]..."\n\n[THE WIN]\n"[X] weeks later, they're officially homeowners in [neighborhood]!"\n\n[EMOTIONAL MOMENT]\n"Moments like this are why I love what I do..."\n\n[CTA]\n"Ready to find YOUR home? Let's make it happen!\nðŸ“ž Ela: ${LIVE_DATA.ela.phone}"`
        }
    };

    const platformKey = platform === 'shorts' ? 'tiktok' : (platform === 'stories' ? 'tiktok' : platform);
    const scriptContent = scripts[type]?.[platformKey] || scripts[type]?.tiktok || 'Script template coming soon!';

    document.getElementById('generated-video-script').innerHTML = `
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.8rem;">
            <h4 style="color: white; margin: 0;">Generated Script</h4>
            <button class="btn btn-sm" style="background: var(--success);" onclick="copyToClipboard(document.getElementById('script-text').innerText)">&#128203; Copy Script</button>
        </div>
        <div id="script-text" style="background: rgba(255,255,255,0.95); color: var(--navy); padding: 1rem; border-radius: 8px; white-space: pre-wrap; font-size: 0.9rem; line-height: 1.6;">${scriptContent}</div>
        <div style="margin-top: 0.8rem; display: flex; gap: 0.5rem; flex-wrap: wrap;">
            <button class="btn btn-sm" style="background: #9c27b0;" onclick="window.open('https://www.synthesia.io', '_blank')">&#129302; Create with Synthesia</button>
            <button class="btn btn-sm" style="background: var(--primary);" onclick="window.open('https://invideo.io', '_blank')">&#127902; Create with InVideo</button>
            <button class="btn btn-sm" style="background: var(--secondary);" onclick="window.open('https://www.canva.com/create/videos', '_blank')">&#127912; Edit in Canva</button>
        </div>
    `;

    showToast('Script generated!');
}

function openVideoCreator(scriptIndex) {
    const script = VIDEO_SCRIPTS[scriptIndex];
    document.getElementById('video-type').value = script.category.toLowerCase().includes('market') ? 'market_update' :
        script.category.toLowerCase().includes('tip') ? 'tips' :
        script.category.toLowerCase().includes('neighborhood') ? 'neighborhood' : 'listing_tour';
    document.getElementById('video-platform').value = script.platform.toLowerCase().includes('tiktok') ? 'tiktok' : 'reels';
    generateVideoScript();
    window.scrollTo({ top: 0, behavior: 'smooth' });
}

function renderScheduler() {
    const now = new Date();
    return `
    <section class="page-section" id="page-scheduler">
        <div class="page-header" style="background: linear-gradient(135deg, #667eea, #764ba2);">
            <h2>&#128197; Advanced Post Scheduler</h2>
            <p>Professional-grade content calendar with AI-powered optimal timing</p>
        </div>

        <!-- Quick Stats Row -->
        <div class="grid-5" style="margin-bottom: 1rem;">
            <div class="stat-card"><div class="stat-number" id="stat-scheduled">${scheduledPosts.length}</div><div class="stat-label">Scheduled</div></div>
            <div class="stat-card success"><div class="stat-number" id="stat-today">${scheduledPosts.filter(p => p.date === new Date().toISOString().split('T')[0]).length}</div><div class="stat-label">Today</div></div>
            <div class="stat-card warning"><div class="stat-number" id="stat-week">${scheduledPosts.filter(p => { const d = new Date(p.date); const today = new Date(); const weekFromNow = new Date(today.getTime() + 7*24*60*60*1000); return d >= today && d <= weekFromNow; }).length}</div><div class="stat-label">This Week</div></div>
            <div class="stat-card instagram"><div class="stat-number" id="stat-ig">${scheduledPosts.filter(p => p.platform === 'instagram').length}</div><div class="stat-label">Instagram</div></div>
            <div class="stat-card facebook"><div class="stat-number" id="stat-fb">${scheduledPosts.filter(p => p.platform === 'facebook').length}</div><div class="stat-label">Facebook</div></div>
        </div>

        <!-- Action Bar -->
        <div class="card" style="margin-bottom: 1rem;">
            <div style="display: flex; flex-wrap: wrap; gap: 0.5rem; align-items: center;">
                <button class="btn btn-primary" onclick="openScheduleModal()">&#10133; New Post</button>
                <button class="btn btn-success" onclick="openBulkScheduler()">&#128218; Bulk Schedule</button>
                <button class="btn btn-outline" onclick="openRecurringModal()">&#128260; Recurring Posts</button>
                <button class="btn btn-outline" onclick="openQueueModal()">&#128203; Queue Manager</button>
                <button class="btn btn-outline" onclick="openOptimalTimes()">&#128161; Best Times to Post</button>
                <button class="btn btn-outline" onclick="exportCalendar()">&#128229; Export</button>
                <div style="flex: 1;"></div>
                <div style="display: flex; gap: 0.3rem;">
                    <button class="btn btn-sm ${schedulerView === 'calendar' ? 'btn-primary' : 'btn-outline'}" onclick="setSchedulerView('calendar')">&#128197; Calendar</button>
                    <button class="btn btn-sm ${schedulerView === 'list' ? 'btn-primary' : 'btn-outline'}" onclick="setSchedulerView('list')">&#128203; List</button>
                    <button class="btn btn-sm ${schedulerView === 'week' ? 'btn-primary' : 'btn-outline'}" onclick="setSchedulerView('week')">&#128466; Week</button>
                </div>
            </div>
        </div>

        <!-- Calendar View -->
        <div class="card" id="scheduler-view-container">
            <div class="calendar-header-row">
                <div style="display: flex; align-items: center; gap: 0.5rem;">
                    <button class="btn btn-outline btn-sm" onclick="changeMonth(-1)">&lt;</button>
                    <button class="btn btn-sm btn-outline" onclick="goToToday()">Today</button>
                    <button class="btn btn-outline btn-sm" onclick="changeMonth(1)">&gt;</button>
                </div>
                <h3 id="calendar-title">${now.toLocaleString('default', {month: 'long'})} ${now.getFullYear()}</h3>
                <div style="display: flex; gap: 0.5rem;">
                    <select class="form-select" style="width: auto; padding: 0.4rem;" onchange="filterCalendarPlatform(this.value)">
                        <option value="all">All Platforms</option>
                        <option value="instagram">Instagram Only</option>
                        <option value="facebook">Facebook Only</option>
                        <option value="linkedin">LinkedIn Only</option>
                        <option value="tiktok">TikTok Only</option>
                    </select>
                </div>
            </div>
            <div class="calendar-grid" id="calendar-grid">${renderCalendar(now.getFullYear(), now.getMonth())}</div>
        </div>

        <!-- Optimal Posting Times Card -->
        <div class="card" style="margin-top: 1rem; background: linear-gradient(135deg, #e8f5e9, #c8e6c9);">
            <div class="card-header">
                <span class="card-title" style="color: var(--success);">&#128161; AI-Recommended Best Times to Post (Cincinnati Market)</span>
            </div>
            <div class="grid-4">
                <div style="padding: 1rem; background: white; border-radius: 8px; text-align: center;">
                    <div style="font-size: 0.8rem; color: var(--instagram); font-weight: 600;">INSTAGRAM</div>
                    <div style="font-size: 1.2rem; font-weight: 700; margin: 0.3rem 0;">Tue/Thu 9-11 AM</div>
                    <div style="font-size: 0.75rem; color: var(--gray);">Also: Wed 12 PM, Sat 10 AM</div>
                </div>
                <div style="padding: 1rem; background: white; border-radius: 8px; text-align: center;">
                    <div style="font-size: 0.8rem; color: var(--facebook); font-weight: 600;">FACEBOOK</div>
                    <div style="font-size: 1.2rem; font-weight: 700; margin: 0.3rem 0;">Wed/Fri 1-3 PM</div>
                    <div style="font-size: 0.75rem; color: var(--gray);">Also: Sun 12 PM, Thu 2 PM</div>
                </div>
                <div style="padding: 1rem; background: white; border-radius: 8px; text-align: center;">
                    <div style="font-size: 0.8rem; color: var(--linkedin); font-weight: 600;">LINKEDIN</div>
                    <div style="font-size: 1.2rem; font-weight: 700; margin: 0.3rem 0;">Tue-Thu 8-10 AM</div>
                    <div style="font-size: 0.75rem; color: var(--gray);">Also: Wed 12 PM, Thu 5 PM</div>
                </div>
                <div style="padding: 1rem; background: white; border-radius: 8px; text-align: center;">
                    <div style="font-size: 0.8rem; font-weight: 600;">TIKTOK</div>
                    <div style="font-size: 1.2rem; font-weight: 700; margin: 0.3rem 0;">Tue/Thu 7-9 PM</div>
                    <div style="font-size: 0.75rem; color: var(--gray);">Also: Fri 5 PM, Sat 11 AM</div>
                </div>
            </div>
        </div>

        <!-- Upcoming Posts Queue -->
        <div class="card" style="margin-top: 1rem;">
            <div class="card-header">
                <span class="card-title">&#128203; Upcoming Posts Queue</span>
                <div style="display: flex; gap: 0.5rem;">
                    <button class="btn btn-sm btn-outline" onclick="shuffleQueue()">&#128256; Shuffle</button>
                    <button class="btn btn-sm btn-outline" onclick="sortQueueByTime()">&#128337; Sort by Time</button>
                    <button class="btn btn-sm btn-danger" onclick="clearAllScheduled()">&#128465; Clear All</button>
                </div>
            </div>
            <div id="scheduled-list" style="max-height: 400px; overflow-y: auto;">${renderScheduledList()}</div>
        </div>

        <!-- Content Templates for Quick Scheduling -->
        <div class="card" style="margin-top: 1rem;">
            <div class="card-header">
                <span class="card-title">&#9889; Quick Schedule Templates</span>
            </div>
            <div style="display: flex; gap: 0.5rem; flex-wrap: wrap;">
                <button class="btn btn-outline" onclick="quickScheduleTemplate('market_update', 'instagram')">&#128200; Market Update (IG)</button>
                <button class="btn btn-outline" onclick="quickScheduleTemplate('buyer_tips', 'facebook')">&#128218; Buyer Tips (FB)</button>
                <button class="btn btn-outline" onclick="quickScheduleTemplate('neighborhood', 'instagram')">&#128205; Neighborhood (IG)</button>
                <button class="btn btn-outline" onclick="quickScheduleTemplate('just_listed', 'facebook')">&#10024; Just Listed (FB)</button>
                <button class="btn btn-outline" onclick="quickScheduleTemplate('testimonial', 'linkedin')">&#11088; Testimonial (LI)</button>
            </div>
        </div>

        <!-- Weekly Content Planner -->
        <div class="card" style="margin-top: 1rem; background: linear-gradient(135deg, #fff5f5, #fff);">
            <div class="card-header">
                <span class="card-title" style="color: var(--danger);">&#128640; Suggested Weekly Content Plan</span>
            </div>
            <div class="grid-2">
                <div>
                    <h4 style="margin-bottom: 0.5rem;">Monday: Motivation</h4>
                    <p style="font-size: 0.85rem; color: var(--gray);">Start week with inspiring homeownership quotes or success stories</p>
                    <h4 style="margin: 0.8rem 0 0.5rem;">Tuesday: Tips & Education</h4>
                    <p style="font-size: 0.85rem; color: var(--gray);">Buyer/seller tips, market insights, mortgage info</p>
                    <h4 style="margin: 0.8rem 0 0.5rem;">Wednesday: Neighborhood Spotlight</h4>
                    <p style="font-size: 0.85rem; color: var(--gray);">Feature a Cincinnati neighborhood with local gems</p>
                    <h4 style="margin: 0.8rem 0 0.5rem;">Thursday: Behind the Scenes</h4>
                    <p style="font-size: 0.85rem; color: var(--gray);">Day in the life, property previews, client meetings</p>
                </div>
                <div>
                    <h4 style="margin-bottom: 0.5rem;">Friday: Fun & Engagement</h4>
                    <p style="font-size: 0.85rem; color: var(--gray);">Polls, questions, weekend plans, local events</p>
                    <h4 style="margin: 0.8rem 0 0.5rem;">Saturday: Listings & Open Houses</h4>
                    <p style="font-size: 0.85rem; color: var(--gray);">Feature listings, open house invites, property tours</p>
                    <h4 style="margin: 0.8rem 0 0.5rem;">Sunday: Personal & Lifestyle</h4>
                    <p style="font-size: 0.85rem; color: var(--gray);">Family time, community involvement, gratitude posts</p>
                    <div style="margin-top: 1rem;">
                        <button class="btn btn-success" onclick="generateWeeklyPlan()">&#128197; Auto-Generate This Week's Plan</button>
                    </div>
                </div>
            </div>
        </div>
    </section>`;
}

let schedulerView = 'calendar';

function setSchedulerView(view) {
    schedulerView = view;
    document.querySelector('[data-page="scheduler"]').click();
}

function goToToday() {
    currentCalendarDate = new Date();
    document.getElementById('calendar-title').textContent = currentCalendarDate.toLocaleString('default', {month: 'long'}) + ' ' + currentCalendarDate.getFullYear();
    document.getElementById('calendar-grid').innerHTML = renderCalendar(currentCalendarDate.getFullYear(), currentCalendarDate.getMonth());
}

function filterCalendarPlatform(platform) {
    // Re-render calendar with filter
    document.getElementById('calendar-grid').innerHTML = renderCalendar(currentCalendarDate.getFullYear(), currentCalendarDate.getMonth(), platform);
}

function openBulkScheduler() {
    openModal('Bulk Schedule Posts',
        `<p style="margin-bottom: 1rem;">Quickly schedule multiple posts at once</p>
        <div class="form-group">
            <label class="form-label">Select Content (Hold Ctrl/Cmd to select multiple)</label>
            <select class="form-select" id="bulk-content" multiple size="8" style="min-height: 200px;">
                ${INSTAGRAM_POSTS.slice(0, 20).map((p, i) => `<option value="ig-${i}">[IG] ${p.title}</option>`).join('')}
                ${FACEBOOK_POSTS.map((p, i) => `<option value="fb-${i}">[FB] ${p.title}</option>`).join('')}
            </select>
        </div>
        <div class="grid-2">
            <div class="form-group">
                <label class="form-label">Start Date</label>
                <input type="date" class="form-input" id="bulk-start" value="${new Date().toISOString().split('T')[0]}">
            </div>
            <div class="form-group">
                <label class="form-label">Spacing</label>
                <select class="form-select" id="bulk-spacing">
                    <option value="1">Every day</option>
                    <option value="2">Every 2 days</option>
                    <option value="3">Every 3 days</option>
                    <option value="7">Weekly</option>
                </select>
            </div>
        </div>
        <div class="form-group">
            <label class="form-label">Preferred Time</label>
            <input type="time" class="form-input" id="bulk-time" value="10:00">
        </div>`,
        `<button class="btn btn-outline" onclick="closeModal()">Cancel</button>
         <button class="btn btn-primary" onclick="processBulkSchedule()">Schedule All</button>`
    );
}

function processBulkSchedule() {
    const selected = Array.from(document.getElementById('bulk-content').selectedOptions).map(o => o.value);
    const startDate = new Date(document.getElementById('bulk-start').value);
    const spacing = parseInt(document.getElementById('bulk-spacing').value);
    const time = document.getElementById('bulk-time').value;

    selected.forEach((contentVal, index) => {
        const schedDate = new Date(startDate);
        schedDate.setDate(schedDate.getDate() + (index * spacing));
        const dateStr = schedDate.toISOString().split('T')[0];
        const platform = contentVal.startsWith('ig-') ? 'instagram' : 'facebook';
        const postIndex = parseInt(contentVal.split('-')[1]);
        const title = contentVal.startsWith('ig-') ? INSTAGRAM_POSTS[postIndex].title : FACEBOOK_POSTS[postIndex].title;

        scheduledPosts.push({ date: dateStr, time, platform, title, contentVal });
    });

    localStorage.setItem('scheduledPosts', JSON.stringify(scheduledPosts));
    closeModal();
    document.querySelector('[data-page="scheduler"]').click();
    showToast(selected.length + ' posts scheduled!');
}

function openRecurringModal() {
    openModal('Create Recurring Post',
        `<p style="margin-bottom: 1rem;">Set up posts that repeat automatically</p>
        <div class="form-group">
            <label class="form-label">Content</label>
            <select class="form-select" id="recur-content">
                ${INSTAGRAM_POSTS.slice(0, 15).map((p, i) => `<option value="ig-${i}">[IG] ${p.title}</option>`).join('')}
                ${FACEBOOK_POSTS.map((p, i) => `<option value="fb-${i}">[FB] ${p.title}</option>`).join('')}
            </select>
        </div>
        <div class="form-group">
            <label class="form-label">Repeat</label>
            <select class="form-select" id="recur-frequency">
                <option value="daily">Daily</option>
                <option value="weekly" selected>Weekly</option>
                <option value="biweekly">Every 2 Weeks</option>
                <option value="monthly">Monthly</option>
            </select>
        </div>
        <div class="form-group">
            <label class="form-label">On Days (for weekly)</label>
            <div style="display: flex; gap: 0.5rem; flex-wrap: wrap;">
                <label><input type="checkbox" value="0"> Sun</label>
                <label><input type="checkbox" value="1"> Mon</label>
                <label><input type="checkbox" value="2" checked> Tue</label>
                <label><input type="checkbox" value="3"> Wed</label>
                <label><input type="checkbox" value="4" checked> Thu</label>
                <label><input type="checkbox" value="5"> Fri</label>
                <label><input type="checkbox" value="6"> Sat</label>
            </div>
        </div>
        <div class="form-group">
            <label class="form-label">Time</label>
            <input type="time" class="form-input" id="recur-time" value="10:00">
        </div>
        <div class="form-group">
            <label class="form-label">End After</label>
            <select class="form-select" id="recur-end">
                <option value="4">4 occurrences</option>
                <option value="8">8 occurrences</option>
                <option value="12">12 occurrences</option>
                <option value="52">1 year (52 weeks)</option>
            </select>
        </div>`,
        `<button class="btn btn-outline" onclick="closeModal()">Cancel</button>
         <button class="btn btn-primary" onclick="createRecurringPost()">Create Recurring</button>`
    );
}

function createRecurringPost() {
    showToast('Recurring post created! (Demo mode)');
    closeModal();
}

function openQueueModal() {
    openModal('Queue Manager',
        `<p style="margin-bottom: 1rem;">Manage your posting queue and time slots</p>
        <div style="background: var(--pale-blue); padding: 1rem; border-radius: 8px; margin-bottom: 1rem;">
            <h4>Default Time Slots</h4>
            <p style="font-size: 0.85rem; color: var(--gray);">Posts will be scheduled at these times when added to queue</p>
            <div class="grid-2" style="margin-top: 0.5rem; gap: 0.5rem;">
                <div><strong>Instagram:</strong> 9:00 AM, 12:00 PM, 6:00 PM</div>
                <div><strong>Facebook:</strong> 1:00 PM, 4:00 PM, 7:00 PM</div>
            </div>
        </div>
        <div style="max-height: 300px; overflow-y: auto;">
            ${scheduledPosts.length ? scheduledPosts.map((p, i) => `
                <div style="display: flex; align-items: center; gap: 0.5rem; padding: 0.5rem; background: white; border-radius: 6px; margin-bottom: 0.5rem;">
                    <span style="cursor: grab;">&#9776;</span>
                    <span class="post-platform ${p.platform}" style="font-size: 0.7rem;">${p.platform.substring(0,2).toUpperCase()}</span>
                    <span style="flex: 1;">${p.title.substring(0, 30)}...</span>
                    <span style="font-size: 0.8rem; color: var(--gray);">${p.date}</span>
                </div>
            `).join('') : '<p style="color: var(--gray); text-align: center;">Queue is empty</p>'}
        </div>`,
        `<button class="btn btn-outline" onclick="closeModal()">Close</button>`
    );
}

function openOptimalTimes() {
    openModal('Best Times to Post - Cincinnati Market',
        `<div style="margin-bottom: 1rem;">
            <p>Based on analysis of Cincinnati real estate engagement patterns</p>
        </div>
        <div class="grid-2" style="gap: 1rem;">
            <div style="padding: 1rem; background: linear-gradient(135deg, #fce4ec, #fff); border-radius: 8px;">
                <h4 style="color: var(--instagram);">&#128248; Instagram</h4>
                <ul style="font-size: 0.9rem; margin-left: 1rem; line-height: 1.8;">
                    <li><strong>Best:</strong> Tuesday & Thursday 9-11 AM</li>
                    <li><strong>Good:</strong> Wednesday 12 PM</li>
                    <li><strong>Good:</strong> Saturday 10 AM</li>
                    <li><strong>Avoid:</strong> Monday morning, Sunday night</li>
                </ul>
            </div>
            <div style="padding: 1rem; background: linear-gradient(135deg, #e3f2fd, #fff); border-radius: 8px;">
                <h4 style="color: var(--facebook);">&#128172; Facebook</h4>
                <ul style="font-size: 0.9rem; margin-left: 1rem; line-height: 1.8;">
                    <li><strong>Best:</strong> Wednesday & Friday 1-3 PM</li>
                    <li><strong>Good:</strong> Sunday 12 PM</li>
                    <li><strong>Good:</strong> Thursday 2 PM</li>
                    <li><strong>Avoid:</strong> Late night, early morning</li>
                </ul>
            </div>
            <div style="padding: 1rem; background: linear-gradient(135deg, #e8f5e9, #fff); border-radius: 8px;">
                <h4 style="color: var(--linkedin);">&#128188; LinkedIn</h4>
                <ul style="font-size: 0.9rem; margin-left: 1rem; line-height: 1.8;">
                    <li><strong>Best:</strong> Tuesday-Thursday 8-10 AM</li>
                    <li><strong>Good:</strong> Wednesday 12 PM</li>
                    <li><strong>Good:</strong> Thursday 5 PM</li>
                    <li><strong>Avoid:</strong> Weekends, after 6 PM</li>
                </ul>
            </div>
            <div style="padding: 1rem; background: linear-gradient(135deg, #f5f5f5, #fff); border-radius: 8px;">
                <h4>&#127909; TikTok</h4>
                <ul style="font-size: 0.9rem; margin-left: 1rem; line-height: 1.8;">
                    <li><strong>Best:</strong> Tuesday & Thursday 7-9 PM</li>
                    <li><strong>Good:</strong> Friday 5 PM</li>
                    <li><strong>Good:</strong> Saturday 11 AM</li>
                    <li><strong>Avoid:</strong> Early morning, Monday</li>
                </ul>
            </div>
        </div>`,
        `<button class="btn btn-outline" onclick="closeModal()">Close</button>
         <button class="btn btn-primary" onclick="closeModal(); openScheduleModal();">Schedule at Optimal Time</button>`
    );
}

function exportCalendar() {
    const data = JSON.stringify(scheduledPosts, null, 2);
    const blob = new Blob([data], { type: 'application/json' });
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = 'ela_content_calendar.json';
    a.click();
    showToast('Calendar exported!');
}

function shuffleQueue() {
    for (let i = scheduledPosts.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [scheduledPosts[i], scheduledPosts[j]] = [scheduledPosts[j], scheduledPosts[i]];
    }
    localStorage.setItem('scheduledPosts', JSON.stringify(scheduledPosts));
    document.getElementById('scheduled-list').innerHTML = renderScheduledList();
    showToast('Queue shuffled!');
}

function sortQueueByTime() {
    scheduledPosts.sort((a, b) => new Date(a.date + ' ' + a.time) - new Date(b.date + ' ' + b.time));
    localStorage.setItem('scheduledPosts', JSON.stringify(scheduledPosts));
    document.getElementById('scheduled-list').innerHTML = renderScheduledList();
    showToast('Queue sorted by time!');
}

function clearAllScheduled() {
    if (confirm('Are you sure you want to clear all scheduled posts?')) {
        scheduledPosts = [];
        localStorage.setItem('scheduledPosts', JSON.stringify(scheduledPosts));
        document.querySelector('[data-page="scheduler"]').click();
        showToast('All posts cleared');
    }
}

function quickScheduleTemplate(type, platform) {
    const tomorrow = new Date();
    tomorrow.setDate(tomorrow.getDate() + 1);
    document.getElementById('gen-type') && (document.getElementById('gen-type').value = type);
    openScheduleModal(tomorrow.toISOString().split('T')[0]);
}

function generateWeeklyPlan() {
    const types = ['personal', 'educational', 'neighborhood', 'personal', 'cta', 'just_listed', 'personal'];
    const platforms = ['instagram', 'instagram', 'instagram', 'facebook', 'instagram', 'facebook', 'instagram'];
    const times = ['09:00', '10:00', '11:00', '14:00', '10:00', '10:00', '12:00'];

    const today = new Date();
    const dayOfWeek = today.getDay();
    const monday = new Date(today);
    monday.setDate(today.getDate() - dayOfWeek + 1);

    for (let i = 0; i < 7; i++) {
        const date = new Date(monday);
        date.setDate(monday.getDate() + i);
        const dateStr = date.toISOString().split('T')[0];

        const existingPost = scheduledPosts.find(p => p.date === dateStr);
        if (!existingPost) {
            const postIndex = i % INSTAGRAM_POSTS.length;
            scheduledPosts.push({
                date: dateStr,
                time: times[i],
                platform: platforms[i],
                title: platforms[i] === 'instagram' ? INSTAGRAM_POSTS[postIndex].title : FACEBOOK_POSTS[postIndex % FACEBOOK_POSTS.length].title,
                contentVal: platforms[i] === 'instagram' ? `ig-${postIndex}` : `fb-${postIndex % FACEBOOK_POSTS.length}`
            });
        }
    }

    localStorage.setItem('scheduledPosts', JSON.stringify(scheduledPosts));
    document.querySelector('[data-page="scheduler"]').click();
    showToast('Weekly plan generated!');
}

let currentCalendarDate = new Date();

function renderCalendar(year, month) {
    const days = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];
    let html = days.map(d => `<div class="calendar-day-header">${d}</div>`).join('');
    const firstDay = new Date(year, month, 1).getDay();
    const daysInMonth = new Date(year, month + 1, 0).getDate();
    const today = new Date();
    for (let i = 0; i < firstDay; i++) html += '<div class="calendar-day other-month"></div>';
    for (let day = 1; day <= daysInMonth; day++) {
        const dateStr = `${year}-${String(month + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`;
        const isToday = today.getDate() === day && today.getMonth() === month && today.getFullYear() === year;
        const posts = scheduledPosts.filter(p => p.date === dateStr);
        html += `<div class="calendar-day ${isToday ? 'today' : ''}" onclick="openScheduleModal('${dateStr}')">
            <div class="calendar-day-num">${day}</div>
            ${posts.map(p => `<div class="calendar-event ${p.platform}">${p.title.substring(0, 10)}...</div>`).join('')}
        </div>`;
    }
    return html;
}

function changeMonth(dir) {
    currentCalendarDate.setMonth(currentCalendarDate.getMonth() + dir);
    document.getElementById('calendar-title').textContent = currentCalendarDate.toLocaleString('default', {month: 'long'}) + ' ' + currentCalendarDate.getFullYear();
    document.getElementById('calendar-grid').innerHTML = renderCalendar(currentCalendarDate.getFullYear(), currentCalendarDate.getMonth());
}

function renderScheduledList() {
    if (!scheduledPosts.length) return '<p style="color: var(--gray); text-align: center; padding: 1rem;">No posts scheduled. Click a calendar day to add.</p>';
    return scheduledPosts.map((p, i) => `
        <div style="display: flex; justify-content: space-between; padding: 0.8rem; background: var(--pale-blue); border-radius: 8px; margin-bottom: 0.5rem;">
            <div>
                <span class="post-platform ${p.platform}">${p.platform.toUpperCase()}</span>
                <strong>${p.title}</strong><br>
                <small>${p.date} at ${p.time}</small>
            </div>
            <div>
                <button class="btn btn-sm btn-success" onclick="postScheduledNow(${i})">Post</button>
                <button class="btn btn-sm btn-danger" onclick="deleteScheduled(${i})">X</button>
            </div>
        </div>
    `).join('');
}

function openScheduleModal(date = '') {
    const today = date || new Date().toISOString().split('T')[0];
    openModal('Schedule Post',
        `<div class="form-group"><label class="form-label">Date</label><input type="date" class="form-input" id="sched-date" value="${today}"></div>
        <div class="form-group"><label class="form-label">Time</label><input type="time" class="form-input" id="sched-time" value="09:00"></div>
        <div class="form-group"><label class="form-label">Platform</label><select class="form-select" id="sched-platform"><option value="instagram">Instagram</option><option value="facebook">Facebook</option></select></div>
        <div class="form-group"><label class="form-label">Content</label><select class="form-select" id="sched-content">${INSTAGRAM_POSTS.map((p, i) => `<option value="ig-${i}">${p.title} (IG)</option>`).join('')}${FACEBOOK_POSTS.map((p, i) => `<option value="fb-${i}">${p.title} (FB)</option>`).join('')}</select></div>`,
        `<button class="btn btn-outline" onclick="closeModal()">Cancel</button><button class="btn btn-primary" onclick="saveScheduledPost()">Schedule</button>`
    );
}

function saveScheduledPost() {
    const date = document.getElementById('sched-date').value;
    const time = document.getElementById('sched-time').value;
    const platform = document.getElementById('sched-platform').value;
    const contentVal = document.getElementById('sched-content').value;
    const title = contentVal.startsWith('ig-') ? INSTAGRAM_POSTS[parseInt(contentVal.split('-')[1])].title : FACEBOOK_POSTS[parseInt(contentVal.split('-')[1])].title;
    scheduledPosts.push({date, time, platform, title, contentVal});
    localStorage.setItem('scheduledPosts', JSON.stringify(scheduledPosts));
    closeModal();
    document.getElementById('scheduled-list').innerHTML = renderScheduledList();
    document.getElementById('calendar-grid').innerHTML = renderCalendar(currentCalendarDate.getFullYear(), currentCalendarDate.getMonth());
    showToast('Scheduled for ' + date);
}

function deleteScheduled(i) {
    scheduledPosts.splice(i, 1);
    localStorage.setItem('scheduledPosts', JSON.stringify(scheduledPosts));
    document.getElementById('scheduled-list').innerHTML = renderScheduledList();
    document.getElementById('calendar-grid').innerHTML = renderCalendar(currentCalendarDate.getFullYear(), currentCalendarDate.getMonth());
    showToast('Removed');
}

function postScheduledNow(i) {
    quickPost(scheduledPosts[i].platform, parseInt(scheduledPosts[i].contentVal.split('-')[1]));
    deleteScheduled(i);
}

function renderPosting() {
    return `
    <section class="page-section" id="page-posting">
        <div class="page-header" style="background: linear-gradient(135deg, #667eea, #764ba2);">
            <h2>&#128228; Professional Direct Posting Hub</h2>
            <p>Create, preview, optimize and post to all platforms in one place</p>
        </div>

        <!-- Quick Stats -->
        <div class="grid-5" style="margin-bottom: 1rem;">
            <div class="stat-card"><div class="stat-number">${postedHistory.length}</div><div class="stat-label">Total Posts</div></div>
            <div class="stat-card instagram"><div class="stat-number">${postedHistory.filter(p => p.platform === 'instagram').length}</div><div class="stat-label">Instagram</div></div>
            <div class="stat-card facebook"><div class="stat-number">${postedHistory.filter(p => p.platform === 'facebook').length}</div><div class="stat-label">Facebook</div></div>
            <div class="stat-card" style="border-left-color: var(--linkedin);"><div class="stat-number">${postedHistory.filter(p => p.platform === 'linkedin').length}</div><div class="stat-label">LinkedIn</div></div>
            <div class="stat-card" style="border-left-color: var(--tiktok);"><div class="stat-number">${postedHistory.filter(p => p.platform === 'tiktok').length}</div><div class="stat-label">TikTok</div></div>
        </div>

        <div class="grid-2">
            <!-- Content Creation Panel -->
            <div class="card">
                <div class="card-header">
                    <span class="card-title">&#9999; Create Your Post</span>
                    <div style="display: flex; gap: 0.3rem;">
                        <button class="btn btn-sm btn-outline" onclick="loadFromLibrary()">&#128218; Library</button>
                        <button class="btn btn-sm btn-outline" onclick="clearPostContent()">&#128465; Clear</button>
                    </div>
                </div>

                <!-- Content Type Quick Select -->
                <div class="form-group">
                    <label class="form-label">Quick Content Templates</label>
                    <div style="display: flex; gap: 0.3rem; flex-wrap: wrap; margin-bottom: 0.5rem;">
                        <button class="btn btn-sm btn-outline" onclick="loadQuickTemplate('market')">&#128200; Market</button>
                        <button class="btn btn-sm btn-outline" onclick="loadQuickTemplate('listing')">&#127968; Listing</button>
                        <button class="btn btn-sm btn-outline" onclick="loadQuickTemplate('tip')">&#128161; Tip</button>
                        <button class="btn btn-sm btn-outline" onclick="loadQuickTemplate('testimonial')">&#11088; Review</button>
                        <button class="btn btn-sm btn-outline" onclick="loadQuickTemplate('personal')">&#128149; Personal</button>
                    </div>
                </div>

                <!-- Main Content -->
                <div class="form-group">
                    <label class="form-label">Content <span id="char-count" style="font-weight: normal; color: var(--gray);">(0/2200)</span></label>
                    <textarea class="form-textarea" id="post-content" rows="12" placeholder="Write or paste your content here...

Tips for great posts:
â€¢ Start with a hook that grabs attention
â€¢ Use emojis to break up text
â€¢ Include a clear call to action
â€¢ Keep it authentic and personal!" oninput="updateCharCount()" style="min-height: 250px;"></textarea>
                </div>

                <!-- Hashtag Section -->
                <div class="form-group">
                    <label class="form-label">Hashtags <span id="tag-count" style="font-weight: normal; color: var(--gray);">(0/30)</span></label>
                    <input type="text" class="form-input" id="post-hashtags" placeholder="#CincinnatiRealEstate #NKYRealtor #SibcyCline..." oninput="updateTagCount()">
                    <div style="display: flex; gap: 0.3rem; flex-wrap: wrap; margin-top: 0.5rem;">
                        <button class="btn btn-sm btn-outline" onclick="addHashtagSet('cincy')">+ Cincy</button>
                        <button class="btn btn-sm btn-outline" onclick="addHashtagSet('realestate')">+ RE</button>
                        <button class="btn btn-sm btn-outline" onclick="addHashtagSet('buyer')">+ Buyer</button>
                        <button class="btn btn-sm btn-outline" onclick="addHashtagSet('seller')">+ Seller</button>
                        <button class="btn btn-sm btn-outline" onclick="addHashtagSet('luxury')">+ Luxury</button>
                    </div>
                </div>

                <!-- Media Section -->
                <div class="form-group">
                    <label class="form-label">Media (Optional)</label>
                    <div style="border: 2px dashed var(--light-gray); border-radius: 8px; padding: 1.5rem; text-align: center; cursor: pointer;" onclick="simulateMediaUpload()">
                        <div style="font-size: 2rem; margin-bottom: 0.5rem;">&#128247;</div>
                        <p style="color: var(--gray);">Click to add images or video</p>
                        <p style="font-size: 0.75rem; color: var(--gray);">Supports JPG, PNG, MP4 (simulated)</p>
                    </div>
                </div>

                <!-- Tone & Style -->
                <div class="form-group">
                    <label class="form-label">Tone & Style</label>
                    <div style="display: flex; gap: 0.5rem; flex-wrap: wrap;">
                        <label style="display: flex; align-items: center; gap: 0.3rem; padding: 0.3rem 0.6rem; background: var(--pale-blue); border-radius: 6px; cursor: pointer;">
                            <input type="radio" name="tone" value="professional" checked> Professional
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3rem; padding: 0.3rem 0.6rem; background: var(--pale-blue); border-radius: 6px; cursor: pointer;">
                            <input type="radio" name="tone" value="friendly"> Friendly
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3rem; padding: 0.3rem 0.6rem; background: var(--pale-blue); border-radius: 6px; cursor: pointer;">
                            <input type="radio" name="tone" value="casual"> Casual
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.3rem; padding: 0.3rem 0.6rem; background: var(--pale-blue); border-radius: 6px; cursor: pointer;">
                            <input type="radio" name="tone" value="urgent"> Urgent
                        </label>
                    </div>
                </div>
            </div>

            <!-- Right Panel: Preview & Post -->
            <div>
                <!-- Platform Selection & Post -->
                <div class="card" style="margin-bottom: 1rem;">
                    <div class="card-header"><span class="card-title">&#128640; Post To Platforms</span></div>
                    <p style="color: var(--gray); margin-bottom: 1rem; font-size: 0.85rem;">Click any platform to copy content and open for posting. Check multiple to post to all!</p>

                    <div style="display: grid; gap: 0.8rem;">
                        <div style="display: flex; align-items: center; gap: 0.8rem; padding: 0.8rem; background: linear-gradient(135deg, #fce4ec, #fff); border-radius: 8px; border: 2px solid var(--instagram);">
                            <input type="checkbox" id="post-ig" checked style="width: 20px; height: 20px;">
                            <div style="flex: 1;">
                                <strong style="color: var(--instagram);">&#128248; Instagram</strong>
                                <div style="font-size: 0.75rem; color: var(--gray);">Best: Images, Reels, Stories â€¢ 2,200 char limit</div>
                            </div>
                            <button class="btn btn-sm" style="background: var(--instagram); color: white;" onclick="directPost('instagram')">Post</button>
                        </div>

                        <div style="display: flex; align-items: center; gap: 0.8rem; padding: 0.8rem; background: linear-gradient(135deg, #e3f2fd, #fff); border-radius: 8px; border: 2px solid var(--facebook);">
                            <input type="checkbox" id="post-fb" checked style="width: 20px; height: 20px;">
                            <div style="flex: 1;">
                                <strong style="color: var(--facebook);">&#128172; Facebook</strong>
                                <div style="font-size: 0.75rem; color: var(--gray);">Best: Long posts, links, videos â€¢ 63,206 char limit</div>
                            </div>
                            <button class="btn btn-sm" style="background: var(--facebook); color: white;" onclick="directPost('facebook')">Post</button>
                        </div>

                        <div style="display: flex; align-items: center; gap: 0.8rem; padding: 0.8rem; background: linear-gradient(135deg, #e8f5e9, #fff); border-radius: 8px; border: 2px solid var(--linkedin);">
                            <input type="checkbox" id="post-li" style="width: 20px; height: 20px;">
                            <div style="flex: 1;">
                                <strong style="color: var(--linkedin);">&#128188; LinkedIn</strong>
                                <div style="font-size: 0.75rem; color: var(--gray);">Best: Professional content, articles â€¢ 3,000 char limit</div>
                            </div>
                            <button class="btn btn-sm" style="background: var(--linkedin); color: white;" onclick="directPost('linkedin')">Post</button>
                        </div>

                        <div style="display: flex; align-items: center; gap: 0.8rem; padding: 0.8rem; background: linear-gradient(135deg, #f5f5f5, #fff); border-radius: 8px; border: 2px solid var(--tiktok);">
                            <input type="checkbox" id="post-tt" style="width: 20px; height: 20px;">
                            <div style="flex: 1;">
                                <strong>&#127909; TikTok</strong>
                                <div style="font-size: 0.75rem; color: var(--gray);">Best: Short videos, trends â€¢ 2,200 char limit</div>
                            </div>
                            <button class="btn btn-sm" style="background: var(--tiktok); color: white;" onclick="directPost('tiktok')">Post</button>
                        </div>

                        <div style="display: flex; align-items: center; gap: 0.8rem; padding: 0.8rem; background: linear-gradient(135deg, #e3f2fd, #fff); border-radius: 8px; border: 2px solid var(--twitter);">
                            <input type="checkbox" id="post-tw" style="width: 20px; height: 20px;">
                            <div style="flex: 1;">
                                <strong style="color: var(--twitter);">&#128038; Twitter/X</strong>
                                <div style="font-size: 0.75rem; color: var(--gray);">Best: Quick updates, threads â€¢ 280 char limit</div>
                            </div>
                            <button class="btn btn-sm" style="background: var(--twitter); color: white;" onclick="directPost('twitter')">Post</button>
                        </div>
                    </div>

                    <div style="margin-top: 1rem; display: flex; gap: 0.5rem;">
                        <button class="btn btn-gradient btn-lg" style="flex: 1;" onclick="postToSelected()">&#128640; Post to All Selected</button>
                    </div>
                </div>

                <!-- Live Preview -->
                <div class="card">
                    <div class="card-header">
                        <span class="card-title">&#128065; Live Preview</span>
                        <select class="form-select" style="width: auto; padding: 0.3rem;" onchange="changePreviewPlatform(this.value)" id="preview-platform">
                            <option value="instagram">Instagram</option>
                            <option value="facebook">Facebook</option>
                            <option value="linkedin">LinkedIn</option>
                        </select>
                    </div>
                    <div id="post-preview" style="background: white; border: 1px solid var(--light-gray); border-radius: 8px; padding: 1rem;">
                        <div style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.8rem;">
                            <div style="width: 40px; height: 40px; border-radius: 50%; background: linear-gradient(135deg, var(--primary), var(--secondary));"></div>
                            <div>
                                <div style="font-weight: 600; font-size: 0.9rem;">Ela Mildner-Shapiro</div>
                                <div style="font-size: 0.75rem; color: var(--gray);">@sibcycline_ela â€¢ Just now</div>
                            </div>
                        </div>
                        <div id="preview-content" style="font-size: 0.9rem; line-height: 1.5; white-space: pre-wrap; color: var(--gray);">Your content preview will appear here...</div>
                        <div id="preview-hashtags" style="color: var(--primary); font-size: 0.85rem; margin-top: 0.5rem;"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Posting Tips -->
        <div class="card" style="margin-top: 1rem; background: linear-gradient(135deg, #fff5f5, #fff);">
            <div class="card-header"><span class="card-title" style="color: var(--danger);">&#128161; Pro Posting Tips</span></div>
            <div class="grid-4">
                <div style="padding: 0.8rem; background: white; border-radius: 8px;">
                    <h4 style="font-size: 0.9rem; margin-bottom: 0.3rem;">&#128293; Start Strong</h4>
                    <p style="font-size: 0.8rem; color: var(--gray);">First 2 lines must hook! Use questions, stats, or bold statements.</p>
                </div>
                <div style="padding: 0.8rem; background: white; border-radius: 8px;">
                    <h4 style="font-size: 0.9rem; margin-bottom: 0.3rem;">&#127775; Use Emojis</h4>
                    <p style="font-size: 0.8rem; color: var(--gray);">Posts with emojis get 48% more engagement. Don't overdo it!</p>
                </div>
                <div style="padding: 0.8rem; background: white; border-radius: 8px;">
                    <h4 style="font-size: 0.9rem; margin-bottom: 0.3rem;">&#128181; CTA Matters</h4>
                    <p style="font-size: 0.8rem; color: var(--gray);">Always end with a clear call to action: "Comment below", "DM me", etc.</p>
                </div>
                <div style="padding: 0.8rem; background: white; border-radius: 8px;">
                    <h4 style="font-size: 0.9rem; margin-bottom: 0.3rem;">&#128197; Timing</h4>
                    <p style="font-size: 0.8rem; color: var(--gray);">Best times: IG 9-11am, FB 1-3pm, LI 8-10am. Check scheduler for more!</p>
                </div>
            </div>
        </div>
    </section>`;
}

function updateCharCount() {
    const content = document.getElementById('post-content').value;
    document.getElementById('char-count').textContent = '(' + content.length + '/2200)';
    document.getElementById('char-count').style.color = content.length > 2200 ? 'var(--danger)' : 'var(--gray)';
    updatePreview();
}

function updateTagCount() {
    const hashtags = document.getElementById('post-hashtags').value;
    const count = (hashtags.match(/#/g) || []).length;
    document.getElementById('tag-count').textContent = '(' + count + '/30)';
    document.getElementById('tag-count').style.color = count > 30 ? 'var(--danger)' : 'var(--gray)';
    updatePreview();
}

function updatePreview() {
    const content = document.getElementById('post-content').value || 'Your content preview will appear here...';
    const hashtags = document.getElementById('post-hashtags').value;
    document.getElementById('preview-content').textContent = content;
    document.getElementById('preview-hashtags').textContent = hashtags;
}

function changePreviewPlatform(platform) {
    // Could update preview styling based on platform
    updatePreview();
}

function clearPostContent() {
    document.getElementById('post-content').value = '';
    document.getElementById('post-hashtags').value = '';
    updateCharCount();
    updateTagCount();
    showToast('Content cleared');
}

function loadQuickTemplate(type) {
    const templates = {
        market: "ðŸ  Cincinnati Market Update - January 2026\n\nðŸ“Š Here's what you need to know:\n\nâœ… Current mortgage rate: " + LIVE_DATA.mortgageRate + "%\nâœ… Average days on market: " + LIVE_DATA.daysOnMarket + " days\nâœ… Buyer activity is STRONG\n\nðŸ’¡ What does this mean for you?\n\nWhether you're buying or selling, NOW is a great time to make your move!\n\nðŸ“ž Ready to chat? DM me or call " + LIVE_DATA.ela.phone,
        listing: "âœ¨ NEW LISTING ALERT! âœ¨\n\nðŸ¡ [Address]\nðŸ“ [Neighborhood], Cincinnati\n\nðŸ›ï¸ X Beds | ðŸ› X Baths | ðŸ“ X,XXX sqft\n\nðŸ”‘ Highlights:\nâ€¢ [Feature 1]\nâ€¢ [Feature 2]\nâ€¢ [Feature 3]\n\nðŸ’° Listed at $XXX,XXX\n\nðŸ‘€ Want a private showing? Drop a ðŸ  in the comments or DM me!\n\nðŸ“ž " + LIVE_DATA.ela.phone,
        tip: "ðŸ’¡ First-Time Buyer Tip!\n\nDid you know? ðŸ¤”\n\n[Insert valuable tip here]\n\nâœ… This can save you thousands!\nâœ… Most buyers don't know this\nâœ… It only takes 5 minutes\n\nComment 'INFO' and I'll send you more details!\n\nAfter 22 years helping families find their dream homes, I love sharing these insider tips. ðŸ â¤ï¸\n\n#FirstTimeBuyer #CincinnatiRealEstate #HomeBuyingTips",
        testimonial: "â­â­â­â­â­\n\n\"[Client quote here]\"\n\nâ€” [Client Name], [Neighborhood]\n\nðŸ  Helping this amazing family find their dream home was such a joy!\n\nðŸ’¬ Thank you for trusting me with one of life's biggest decisions.\n\nðŸ‘‰ Ready to write YOUR success story? Let's connect!\n\nðŸ“ž " + LIVE_DATA.ela.phone,
        personal: "ðŸ’­ Why I Love What I Do...\n\n[Personal story here]\n\nAfter " + LIVE_DATA.ela.experience + " in real estate, I've learned that this job isn't just about houses â€” it's about HOMES. It's about families. It's about new chapters.\n\nðŸ  Every key I hand over represents someone's dream coming true.\n\nThat never gets old. â¤ï¸\n\nWhat made you fall in love with YOUR home?"
    };
    document.getElementById('post-content').value = templates[type] || templates.market;
    updateCharCount();
    showToast('Template loaded!');
}

function addHashtagSet(type) {
    const sets = {
        cincy: '#CincinnatiRealEstate #CincyHomes #QueenCity #Cincinnati #NKYRealtor #OhioRealEstate',
        realestate: '#RealEstate #Realtor #HomeForSale #DreamHome #HouseHunting #JustListed',
        buyer: '#FirstTimeBuyer #HomeBuyer #BuyingAHome #NewHomeOwner #HouseShopping',
        seller: '#SellYourHome #HomeForSale #JustListed #ListingAgent #HotMarket',
        luxury: '#LuxuryRealEstate #LuxuryHomes #MillionDollarListing #LuxuryLiving #DreamHome'
    };
    const current = document.getElementById('post-hashtags').value;
    document.getElementById('post-hashtags').value = (current + ' ' + sets[type]).trim();
    updateTagCount();
}

function simulateMediaUpload() {
    showToast('Media upload simulated! In production, this would open a file picker.');
}

function postToSelected() {
    const platforms = [];
    if (document.getElementById('post-ig').checked) platforms.push('instagram');
    if (document.getElementById('post-fb').checked) platforms.push('facebook');
    if (document.getElementById('post-li').checked) platforms.push('linkedin');
    if (document.getElementById('post-tt').checked) platforms.push('tiktok');
    if (document.getElementById('post-tw').checked) platforms.push('twitter');

    if (!platforms.length) {
        showToast('Select at least one platform!', 'error');
        return;
    }

    const content = document.getElementById('post-content').value;
    if (!content.trim()) {
        showToast('Write content first!', 'error');
        return;
    }

    platforms.forEach((platform, index) => {
        setTimeout(() => directPost(platform), index * 500);
    });
}

function loadFromLibrary() {
    openModal('Select Content',
        `<div style="max-height: 400px; overflow-y: auto;">
            <h4>Instagram</h4>
            ${INSTAGRAM_POSTS.slice(0, 10).map((p, i) => `<div style="padding: 0.8rem; background: var(--pale-blue); border-radius: 8px; margin-bottom: 0.5rem; cursor: pointer;" onclick="loadPost('ig', ${i})"><span class="post-platform instagram">IG</span> ${p.title}</div>`).join('')}
            <h4 style="margin-top: 1rem;">Facebook</h4>
            ${FACEBOOK_POSTS.map((p, i) => `<div style="padding: 0.8rem; background: var(--pale-blue); border-radius: 8px; margin-bottom: 0.5rem; cursor: pointer;" onclick="loadPost('fb', ${i})"><span class="post-platform facebook">FB</span> ${p.title}</div>`).join('')}
        </div>`,
        `<button class="btn btn-outline" onclick="closeModal()">Cancel</button>`
    );
}

function loadPost(type, index) {
    const content = type === 'ig' ? INSTAGRAM_POSTS[index].caption : FACEBOOK_POSTS[index].content;
    const hashtags = type === 'ig' ? INSTAGRAM_POSTS[index].hashtags : FACEBOOK_POSTS[index].hashtags;
    document.getElementById('post-content').value = content;
    document.getElementById('post-hashtags').value = hashtags;
    closeModal();
    showToast('Loaded!');
}

function directPost(platform) {
    const content = document.getElementById('post-content').value;
    const hashtags = document.getElementById('post-hashtags').value;
    if (!content.trim()) { showToast('Write content first!', 'error'); return; }
    copyToClipboard(content + '\n\n' + hashtags);
    const urls = { instagram: 'https://instagram.com', facebook: 'https://facebook.com', linkedin: 'https://linkedin.com/feed', tiktok: 'https://tiktok.com' };
    window.open(urls[platform], '_blank');
    postedHistory.push({ platform, date: new Date().toISOString(), title: content.substring(0, 30) + '...' });
    localStorage.setItem('postedHistory', JSON.stringify(postedHistory));
    showToast(platform + ' opened! Paste content.');
}

function renderAutoPost() {
    return `
    <section class="page-section" id="page-autopost">
        <div class="page-header" style="background: linear-gradient(135deg, #27ae60, #2ecc71);">
            <h2>&#9881; Auto-Post Automation Center</h2>
            <p>Set up automated posting, content queues, and smart scheduling</p>
        </div>

        <!-- Connection Status -->
        <div class="grid-4" style="margin-bottom: 1rem;">
            <div class="stat-card" style="border-left-color: ${autoPostSettings.instagram ? 'var(--success)' : 'var(--gray)'};">
                <div style="font-size: 1.5rem;">${autoPostSettings.instagram ? '&#9989;' : '&#10060;'}</div>
                <div class="stat-label">Instagram</div>
            </div>
            <div class="stat-card" style="border-left-color: ${autoPostSettings.facebook ? 'var(--success)' : 'var(--gray)'};">
                <div style="font-size: 1.5rem;">${autoPostSettings.facebook ? '&#9989;' : '&#10060;'}</div>
                <div class="stat-label">Facebook</div>
            </div>
            <div class="stat-card" style="border-left-color: ${autoPostSettings.linkedin ? 'var(--success)' : 'var(--gray)'};">
                <div style="font-size: 1.5rem;">${autoPostSettings.linkedin ? '&#9989;' : '&#10060;'}</div>
                <div class="stat-label">LinkedIn</div>
            </div>
            <div class="stat-card" style="border-left-color: ${autoPostSettings.tiktok ? 'var(--success)' : 'var(--gray)'};">
                <div style="font-size: 1.5rem;">${autoPostSettings.tiktok ? '&#9989;' : '&#10060;'}</div>
                <div class="stat-label">TikTok</div>
            </div>
        </div>

        <div class="grid-2">
            <!-- Connect Accounts -->
            <div class="card">
                <div class="card-header"><span class="card-title">&#128279; Connect Your Accounts</span></div>

                <div style="margin-bottom: 1rem;">
                    <div style="display: flex; align-items: center; justify-content: space-between; padding: 1rem; background: linear-gradient(135deg, #fce4ec, #fff); border-radius: 8px; margin-bottom: 0.5rem;">
                        <div style="display: flex; align-items: center; gap: 0.8rem;">
                            <div style="width: 40px; height: 40px; border-radius: 8px; background: var(--instagram); display: flex; align-items: center; justify-content: center; color: white; font-size: 1.2rem;">&#128248;</div>
                            <div>
                                <strong>Instagram Business</strong>
                                <div style="font-size: 0.75rem; color: var(--gray);">via Meta Business Suite</div>
                            </div>
                        </div>
                        <button class="btn btn-sm ${autoPostSettings.instagram ? 'btn-outline' : 'btn-primary'}" onclick="toggleConnection('instagram')">
                            ${autoPostSettings.instagram ? '&#128275; Disconnect' : '&#128274; Connect'}
                        </button>
                    </div>

                    <div style="display: flex; align-items: center; justify-content: space-between; padding: 1rem; background: linear-gradient(135deg, #e3f2fd, #fff); border-radius: 8px; margin-bottom: 0.5rem;">
                        <div style="display: flex; align-items: center; gap: 0.8rem;">
                            <div style="width: 40px; height: 40px; border-radius: 8px; background: var(--facebook); display: flex; align-items: center; justify-content: center; color: white; font-size: 1.2rem;">&#128172;</div>
                            <div>
                                <strong>Facebook Page</strong>
                                <div style="font-size: 0.75rem; color: var(--gray);">via Meta Business Suite</div>
                            </div>
                        </div>
                        <button class="btn btn-sm ${autoPostSettings.facebook ? 'btn-outline' : 'btn-primary'}" onclick="toggleConnection('facebook')">
                            ${autoPostSettings.facebook ? '&#128275; Disconnect' : '&#128274; Connect'}
                        </button>
                    </div>

                    <div style="display: flex; align-items: center; justify-content: space-between; padding: 1rem; background: linear-gradient(135deg, #e8f5e9, #fff); border-radius: 8px; margin-bottom: 0.5rem;">
                        <div style="display: flex; align-items: center; gap: 0.8rem;">
                            <div style="width: 40px; height: 40px; border-radius: 8px; background: var(--linkedin); display: flex; align-items: center; justify-content: center; color: white; font-size: 1.2rem;">&#128188;</div>
                            <div>
                                <strong>LinkedIn</strong>
                                <div style="font-size: 0.75rem; color: var(--gray);">via LinkedIn API</div>
                            </div>
                        </div>
                        <button class="btn btn-sm ${autoPostSettings.linkedin ? 'btn-outline' : 'btn-primary'}" onclick="toggleConnection('linkedin')">
                            ${autoPostSettings.linkedin ? '&#128275; Disconnect' : '&#128274; Connect'}
                        </button>
                    </div>

                    <div style="display: flex; align-items: center; justify-content: space-between; padding: 1rem; background: linear-gradient(135deg, #f5f5f5, #fff); border-radius: 8px; margin-bottom: 0.5rem;">
                        <div style="display: flex; align-items: center; gap: 0.8rem;">
                            <div style="width: 40px; height: 40px; border-radius: 8px; background: var(--tiktok); display: flex; align-items: center; justify-content: center; color: white; font-size: 1.2rem;">&#127909;</div>
                            <div>
                                <strong>TikTok Business</strong>
                                <div style="font-size: 0.75rem; color: var(--gray);">via TikTok API</div>
                            </div>
                        </div>
                        <button class="btn btn-sm ${autoPostSettings.tiktok ? 'btn-outline' : 'btn-primary'}" onclick="toggleConnection('tiktok')">
                            ${autoPostSettings.tiktok ? '&#128275; Disconnect' : '&#128274; Connect'}
                        </button>
                    </div>
                </div>

                <div style="background: var(--pale-blue); padding: 1rem; border-radius: 8px; font-size: 0.85rem;">
                    <strong>&#128161; Note:</strong> This is a demo simulation. In production, clicking Connect would open OAuth authentication flows for each platform.
                </div>
            </div>

            <!-- Auto-Post Settings -->
            <div class="card">
                <div class="card-header"><span class="card-title">&#9881; Automation Settings</span></div>

                <div class="form-group">
                    <label class="form-label">Auto-Post Mode</label>
                    <select class="form-select" id="autopost-mode" onchange="updateAutoPostMode()">
                        <option value="manual">Manual Only - No Auto Posting</option>
                        <option value="scheduled">Scheduled - Post at Set Times</option>
                        <option value="queue">Queue - Post from Content Queue</option>
                        <option value="smart">Smart - AI Optimal Times</option>
                    </select>
                </div>

                <div class="form-group">
                    <label class="form-label">Default Posting Times</label>
                    <div class="grid-2" style="gap: 0.5rem;">
                        <div>
                            <label style="font-size: 0.8rem; color: var(--gray);">Morning</label>
                            <input type="time" class="form-input" value="09:00" id="time-morning">
                        </div>
                        <div>
                            <label style="font-size: 0.8rem; color: var(--gray);">Afternoon</label>
                            <input type="time" class="form-input" value="13:00" id="time-afternoon">
                        </div>
                        <div>
                            <label style="font-size: 0.8rem; color: var(--gray);">Evening</label>
                            <input type="time" class="form-input" value="18:00" id="time-evening">
                        </div>
                        <div>
                            <label style="font-size: 0.8rem; color: var(--gray);">Posts/Day</label>
                            <select class="form-select" id="posts-per-day">
                                <option value="1">1 post/day</option>
                                <option value="2" selected>2 posts/day</option>
                                <option value="3">3 posts/day</option>
                                <option value="5">5 posts/day</option>
                            </select>
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label class="form-label">Content Preferences</label>
                    <div style="display: flex; flex-direction: column; gap: 0.5rem;">
                        <label style="display: flex; align-items: center; gap: 0.5rem;">
                            <input type="checkbox" checked> Auto-add Cincinnati hashtags
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.5rem;">
                            <input type="checkbox" checked> Include call to action
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.5rem;">
                            <input type="checkbox"> Cross-post to all connected platforms
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.5rem;">
                            <input type="checkbox" checked> Optimize content length per platform
                        </label>
                    </div>
                </div>

                <button class="btn btn-success" style="width: 100%;" onclick="saveAutoPostSettings()">&#128190; Save Settings</button>
            </div>
        </div>

        <!-- Content Queue -->
        <div class="card" style="margin-top: 1rem;">
            <div class="card-header">
                <span class="card-title">&#128203; Auto-Post Content Queue</span>
                <div style="display: flex; gap: 0.5rem;">
                    <button class="btn btn-sm btn-primary" onclick="addToAutoQueue()">&#10133; Add Content</button>
                    <button class="btn btn-sm btn-success" onclick="fillQueueFromLibrary()">&#128218; Fill from Library</button>
                    <button class="btn btn-sm btn-outline" onclick="shuffleAutoQueue()">&#128256; Shuffle</button>
                </div>
            </div>
            <div id="auto-queue-list" style="max-height: 300px; overflow-y: auto;">
                ${autoPostQueue.length ? autoPostQueue.map((item, i) => `
                    <div style="display: flex; align-items: center; gap: 0.5rem; padding: 0.8rem; background: var(--pale-blue); border-radius: 8px; margin-bottom: 0.5rem;">
                        <span style="color: var(--gray);">${i + 1}.</span>
                        <span class="post-platform ${item.platform}" style="font-size: 0.7rem;">${item.platform.substring(0,2).toUpperCase()}</span>
                        <span style="flex: 1;">${item.title}</span>
                        <span style="font-size: 0.8rem; color: var(--gray);">${item.scheduledFor || 'Queued'}</span>
                        <button class="btn btn-sm btn-danger" onclick="removeFromAutoQueue(${i})">&#128465;</button>
                    </div>
                `).join('') : '<p style="color: var(--gray); text-align: center; padding: 2rem;">Queue is empty. Add content to start auto-posting!</p>'}
            </div>
        </div>

        <!-- Automation Rules -->
        <div class="card" style="margin-top: 1rem;">
            <div class="card-header">
                <span class="card-title">&#129302; Smart Automation Rules</span>
                <button class="btn btn-sm btn-primary" onclick="openNewRuleModal()">&#10133; New Rule</button>
            </div>

            <div style="display: grid; gap: 0.8rem;">
                <div style="display: flex; align-items: center; gap: 1rem; padding: 1rem; background: linear-gradient(135deg, #e8f5e9, #fff); border-radius: 8px; border-left: 4px solid var(--success);">
                    <input type="checkbox" checked style="width: 20px; height: 20px;">
                    <div style="flex: 1;">
                        <strong>Market Update Monday</strong>
                        <div style="font-size: 0.8rem; color: var(--gray);">Auto-post market update every Monday at 9 AM</div>
                    </div>
                    <span style="background: var(--success); color: white; padding: 0.2rem 0.5rem; border-radius: 4px; font-size: 0.75rem;">Active</span>
                </div>

                <div style="display: flex; align-items: center; gap: 1rem; padding: 1rem; background: linear-gradient(135deg, #e3f2fd, #fff); border-radius: 8px; border-left: 4px solid var(--primary);">
                    <input type="checkbox" checked style="width: 20px; height: 20px;">
                    <div style="flex: 1;">
                        <strong>Tip Tuesday</strong>
                        <div style="font-size: 0.8rem; color: var(--gray);">Auto-post buyer/seller tip every Tuesday at 10 AM</div>
                    </div>
                    <span style="background: var(--success); color: white; padding: 0.2rem 0.5rem; border-radius: 4px; font-size: 0.75rem;">Active</span>
                </div>

                <div style="display: flex; align-items: center; gap: 1rem; padding: 1rem; background: linear-gradient(135deg, #fff5f5, #fff); border-radius: 8px; border-left: 4px solid var(--warning);">
                    <input type="checkbox" style="width: 20px; height: 20px;">
                    <div style="flex: 1;">
                        <strong>Weekend Engagement Boost</strong>
                        <div style="font-size: 0.8rem; color: var(--gray);">Post engagement content Saturday & Sunday mornings</div>
                    </div>
                    <span style="background: var(--warning); color: white; padding: 0.2rem 0.5rem; border-radius: 4px; font-size: 0.75rem;">Paused</span>
                </div>

                <div style="display: flex; align-items: center; gap: 1rem; padding: 1rem; background: linear-gradient(135deg, #f3e5f5, #fff); border-radius: 8px; border-left: 4px solid #9c27b0;">
                    <input type="checkbox" checked style="width: 20px; height: 20px;">
                    <div style="flex: 1;">
                        <strong>Neighborhood Thursday</strong>
                        <div style="font-size: 0.8rem; color: var(--gray);">Spotlight a Cincinnati neighborhood every Thursday at 11 AM</div>
                    </div>
                    <span style="background: var(--success); color: white; padding: 0.2rem 0.5rem; border-radius: 4px; font-size: 0.75rem;">Active</span>
                </div>
            </div>
        </div>

        <!-- Integration Guide -->
        <div class="card" style="margin-top: 1rem; background: linear-gradient(135deg, #fff5f5, #fff);">
            <div class="card-header">
                <span class="card-title" style="color: var(--danger);">&#128214; How Auto-Posting Works</span>
            </div>
            <div class="grid-3">
                <div style="padding: 1rem; background: white; border-radius: 8px; text-align: center;">
                    <div style="font-size: 2rem; margin-bottom: 0.5rem;">1&#65039;&#8419;</div>
                    <h4 style="margin-bottom: 0.3rem;">Connect Accounts</h4>
                    <p style="font-size: 0.8rem; color: var(--gray);">Link your Instagram, Facebook, LinkedIn, and TikTok business accounts</p>
                </div>
                <div style="padding: 1rem; background: white; border-radius: 8px; text-align: center;">
                    <div style="font-size: 2rem; margin-bottom: 0.5rem;">2&#65039;&#8419;</div>
                    <h4 style="margin-bottom: 0.3rem;">Fill Your Queue</h4>
                    <p style="font-size: 0.8rem; color: var(--gray);">Add content from your library or create new posts to fill your queue</p>
                </div>
                <div style="padding: 1rem; background: white; border-radius: 8px; text-align: center;">
                    <div style="font-size: 2rem; margin-bottom: 0.5rem;">3&#65039;&#8419;</div>
                    <h4 style="margin-bottom: 0.3rem;">Sit Back & Relax</h4>
                    <p style="font-size: 0.8rem; color: var(--gray);">Content posts automatically at optimal times. You stay consistent!</p>
                </div>
            </div>
        </div>
    </section>`;
}

// Auto-Post State
let autoPostSettings = JSON.parse(localStorage.getItem('autoPostSettings')) || {
    instagram: false,
    facebook: false,
    linkedin: false,
    tiktok: false,
    mode: 'manual'
};

let autoPostQueue = JSON.parse(localStorage.getItem('autoPostQueue')) || [];

function toggleConnection(platform) {
    autoPostSettings[platform] = !autoPostSettings[platform];
    localStorage.setItem('autoPostSettings', JSON.stringify(autoPostSettings));
    document.querySelector('[data-page="autopost"]').click();
    showToast(platform.charAt(0).toUpperCase() + platform.slice(1) + (autoPostSettings[platform] ? ' connected!' : ' disconnected'));
}

function updateAutoPostMode() {
    autoPostSettings.mode = document.getElementById('autopost-mode').value;
    localStorage.setItem('autoPostSettings', JSON.stringify(autoPostSettings));
}

function saveAutoPostSettings() {
    localStorage.setItem('autoPostSettings', JSON.stringify(autoPostSettings));
    showToast('Settings saved!');
}

function addToAutoQueue() {
    openModal('Add to Auto-Post Queue',
        `<div class="form-group">
            <label class="form-label">Select Content</label>
            <select class="form-select" id="queue-content">
                ${INSTAGRAM_POSTS.slice(0, 20).map((p, i) => `<option value="ig-${i}">[IG] ${p.title}</option>`).join('')}
                ${FACEBOOK_POSTS.map((p, i) => `<option value="fb-${i}">[FB] ${p.title}</option>`).join('')}
            </select>
        </div>
        <div class="form-group">
            <label class="form-label">Platform</label>
            <select class="form-select" id="queue-platform">
                <option value="instagram">Instagram</option>
                <option value="facebook">Facebook</option>
                <option value="linkedin">LinkedIn</option>
                <option value="tiktok">TikTok</option>
            </select>
        </div>`,
        `<button class="btn btn-outline" onclick="closeModal()">Cancel</button>
         <button class="btn btn-primary" onclick="addQueueItem()">Add to Queue</button>`
    );
}

function addQueueItem() {
    const contentVal = document.getElementById('queue-content').value;
    const platform = document.getElementById('queue-platform').value;
    const postIndex = parseInt(contentVal.split('-')[1]);
    const title = contentVal.startsWith('ig-') ? INSTAGRAM_POSTS[postIndex].title : FACEBOOK_POSTS[postIndex].title;

    autoPostQueue.push({ title, platform, contentVal });
    localStorage.setItem('autoPostQueue', JSON.stringify(autoPostQueue));
    closeModal();
    document.querySelector('[data-page="autopost"]').click();
    showToast('Added to queue!');
}

function fillQueueFromLibrary() {
    const platforms = ['instagram', 'facebook', 'instagram', 'linkedin', 'instagram'];
    for (let i = 0; i < 10; i++) {
        const postIndex = i % INSTAGRAM_POSTS.length;
        autoPostQueue.push({
            title: INSTAGRAM_POSTS[postIndex].title,
            platform: platforms[i % platforms.length],
            contentVal: `ig-${postIndex}`
        });
    }
    localStorage.setItem('autoPostQueue', JSON.stringify(autoPostQueue));
    document.querySelector('[data-page="autopost"]').click();
    showToast('Queue filled with 10 posts!');
}

function shuffleAutoQueue() {
    for (let i = autoPostQueue.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [autoPostQueue[i], autoPostQueue[j]] = [autoPostQueue[j], autoPostQueue[i]];
    }
    localStorage.setItem('autoPostQueue', JSON.stringify(autoPostQueue));
    document.querySelector('[data-page="autopost"]').click();
    showToast('Queue shuffled!');
}

function removeFromAutoQueue(index) {
    autoPostQueue.splice(index, 1);
    localStorage.setItem('autoPostQueue', JSON.stringify(autoPostQueue));
    document.querySelector('[data-page="autopost"]').click();
    showToast('Removed from queue');
}

function openNewRuleModal() {
    showToast('Rule builder coming in next update!');
}

function renderAnalytics() {
    const thisMonth = postedHistory.filter(p => { const d = new Date(p.date); const now = new Date(); return d.getMonth() === now.getMonth() && d.getFullYear() === now.getFullYear(); });
    const igCount = thisMonth.filter(p => p.platform === 'instagram').length;
    const fbCount = thisMonth.filter(p => p.platform === 'facebook').length;
    return `
    <section class="page-section" id="page-analytics">
        <div class="page-header">
            <h2>&#128202; Analytics Pro</h2>
            <p>Track your posting performance</p>
        </div>
        <div class="grid-4" style="margin-bottom: 1.5rem;">
            <div class="stat-card"><div class="stat-number">${thisMonth.length}</div><div class="stat-label">Posts This Month</div></div>
            <div class="stat-card instagram"><div class="stat-number">${igCount}</div><div class="stat-label">Instagram</div></div>
            <div class="stat-card facebook"><div class="stat-number">${fbCount}</div><div class="stat-label">Facebook</div></div>
            <div class="stat-card success"><div class="stat-number">${Math.round((thisMonth.length / 30) * 100)}%</div><div class="stat-label">Monthly Goal</div></div>
        </div>
        <div class="card">
            <div class="card-header"><span class="card-title">Posting History</span></div>
            ${postedHistory.length ? `<div style="max-height: 300px; overflow-y: auto;">${postedHistory.slice().reverse().map(p => `<div style="display: flex; justify-content: space-between; padding: 0.8rem; border-bottom: 1px solid var(--light-gray);"><div><span class="post-platform ${p.platform}">${p.platform.toUpperCase()}</span> ${p.title}</div><span style="color: var(--gray); font-size: 0.85rem;">${new Date(p.date).toLocaleDateString()}</span></div>`).join('')}</div>` : '<p style="color: var(--gray); text-align: center; padding: 2rem;">Start posting to see history!</p>'}
        </div>
    </section>`;
}

// Competitor Analysis Data
const COMPETITOR_ANALYSIS = {
    scottOyler: {
        name: "Scott Oyler / Oyler Hines",
        brokerage: "Coldwell Banker",
        ranking: "#1 Team by Volume in Cincinnati",
        transactions: "200+/year",
        avgPrice: "$500K",
        totalVolume: "$100M+/year",
        strengths: [
            "Dominates new construction market - partners with builders",
            "Massive team allows for 24/7 availability",
            "Strong referral network with relocation companies",
            "Multiple office locations for coverage",
            "Award-winning: #1 team 2020, 2021, 2022"
        ],
        weaknesses: [
            "Team model means less personal touch",
            "Clients may work with different team members",
            "Focus on volume over relationships",
            "Premium pricing may alienate budget buyers"
        ],
        marketingStrategy: [
            "Heavy Zillow Premier Agent spend",
            "Builder partnerships for exclusive listings",
            "Team YouTube channel with property tours",
            "Strong Google business presence with reviews",
            "Corporate relocation contracts"
        ],
        socialPresence: {
            facebook: "Active - team updates, listings",
            instagram: "Moderate - property photos",
            youtube: "Active - virtual tours",
            linkedin: "Professional networking"
        },
        howToBeat: "Compete on PERSONAL service. Emphasize that YOU will handle their transaction personally - not a team member. Highlight your 22 years of experience and one-on-one attention. Target clients who feel lost in big team environments."
    },
    rickFinn: {
        name: "Rick J Finn / Finn Team",
        brokerage: "Keller Williams",
        ranking: "Top 1% Nationally",
        transactions: "191/year",
        avgPrice: "$450K",
        totalVolume: "$85M+/year",
        strengths: [
            "Known for incredible responsiveness",
            "Deep local market knowledge",
            "Strong luxury home expertise",
            "364 transactions in 2 years - consistent",
            "HOA and condo expertise"
        ],
        weaknesses: [
            "Spreads across many price points",
            "May not specialize in any one niche",
            "Team structure similar to Oyler"
        ],
        marketingStrategy: [
            "Heavy online review generation",
            "Market update emails to sphere",
            "Luxury listing showcases",
            "First-time buyer seminars"
        ],
        socialPresence: {
            facebook: "Very Active - daily posts",
            instagram: "Active - property highlights",
            youtube: "Moderate - occasional tours"
        },
        howToBeat: "Match his responsiveness and exceed it. Target specific neighborhoods where you can position as THE expert. Create more educational content than he does."
    },
    caldwellGroup: {
        name: "Caldwell Group",
        brokerage: "RE/MAX",
        ranking: "Top 1% in Region",
        transactions: "145/year",
        avgPrice: "$400K",
        totalVolume: "$58M+/year",
        strengths: [
            "Strong team coverage model",
            "VA loan expertise - military families",
            "First-time buyer focus",
            "305 transactions in 2 years",
            "Excellent client reviews"
        ],
        weaknesses: [
            "Generalist approach - no specific niche",
            "Team handoffs can frustrate clients",
            "Less luxury market presence"
        ],
        marketingStrategy: [
            "Heavy focus on testimonials",
            "Military community outreach",
            "First-time buyer education content",
            "Team approach marketing"
        ],
        socialPresence: {
            facebook: "Active - client stories",
            instagram: "Moderate",
            youtube: "Limited"
        },
        howToBeat: "You have 22 years experience vs their team. Position yourself as the seasoned expert who provides continuity. Target their first-time buyers who want wisdom over just a transaction."
    }
};

function renderCompetitors() {
    return `
    <section class="page-section" id="page-competitors">
        <div class="page-header" style="background: linear-gradient(135deg, #2c3e50, #3498db);">
            <h2>&#128373; Competitor Intelligence Center</h2>
            <p>Deep analysis of your Cincinnati competition - know their strategies, find your advantage</p>
        </div>

        <!-- Why This Matters -->
        <div class="card" style="background: linear-gradient(135deg, #667eea, #764ba2); color: white; margin-bottom: 1.5rem;">
            <div style="display: flex; align-items: center; gap: 1rem;">
                <div style="font-size: 3rem;">&#128640;</div>
                <div>
                    <h3>Ela, Knowledge is Power!</h3>
                    <p style="opacity: 0.9;">Understanding your competition helps you differentiate. Your 22 years of experience is your BIGGEST advantage - use it!</p>
                </div>
            </div>
            <div class="grid-4" style="margin-top: 1rem;">
                <div style="background: rgba(255,255,255,0.15); padding: 0.8rem; border-radius: 8px; text-align: center;">
                    <div style="font-size: 1.5rem; font-weight: bold;">10+</div>
                    <div style="font-size: 0.8rem;">Top Competitors</div>
                </div>
                <div style="background: rgba(255,255,255,0.15); padding: 0.8rem; border-radius: 8px; text-align: center;">
                    <div style="font-size: 1.5rem; font-weight: bold;">SWOT</div>
                    <div style="font-size: 0.8rem;">Analysis</div>
                </div>
                <div style="background: rgba(255,255,255,0.15); padding: 0.8rem; border-radius: 8px; text-align: center;">
                    <div style="font-size: 1.5rem; font-weight: bold;">&#128161;</div>
                    <div style="font-size: 0.8rem;">Beat Strategies</div>
                </div>
                <div style="background: rgba(255,255,255,0.15); padding: 0.8rem; border-radius: 8px; text-align: center;">
                    <div style="font-size: 1.5rem; font-weight: bold;">22</div>
                    <div style="font-size: 0.8rem;">Your Experience</div>
                </div>
            </div>
        </div>

        <!-- Your Competitive Advantages -->
        <div class="card" style="border-left: 4px solid var(--success); margin-bottom: 1.5rem;">
            <h3 style="color: var(--success);">&#127942; YOUR Competitive Advantages vs ALL Competitors</h3>
            <div class="grid-3" style="margin-top: 1rem;">
                <div style="padding: 1rem; background: #e8f5e9; border-radius: 8px;">
                    <div style="font-size: 1.5rem; text-align: center;">22</div>
                    <div style="text-align: center; font-weight: 600;">Years Experience</div>
                    <p style="font-size: 0.85rem; color: var(--gray); margin-top: 0.5rem;">Most competitors are teams of newer agents. YOU have seen multiple market cycles and can guide clients through uncertainty.</p>
                </div>
                <div style="padding: 1rem; background: #e8f5e9; border-radius: 8px;">
                    <div style="font-size: 1.5rem; text-align: center;">&#128100;</div>
                    <div style="text-align: center; font-weight: 600;">Personal Service</div>
                    <p style="font-size: 0.85rem; color: var(--gray); margin-top: 0.5rem;">Big teams hand clients off. YOU work personally with every client from start to finish. This is HUGE for client satisfaction.</p>
                </div>
                <div style="padding: 1rem; background: #e8f5e9; border-radius: 8px;">
                    <div style="font-size: 1.5rem; text-align: center;">&#127961;</div>
                    <div style="text-align: center; font-weight: 600;">Local Knowledge</div>
                    <p style="font-size: 0.85rem; color: var(--gray); margin-top: 0.5rem;">You know Cincinnati neighborhoods intimately. School districts, commute times, hidden gems - this expertise can't be replicated by teams.</p>
                </div>
            </div>
        </div>

        <!-- Top Competitor Deep Dives -->
        <h3 style="margin: 1.5rem 0 1rem 0;">&#128269; Deep Dive Analysis - Click to Study</h3>

        ${Object.entries(COMPETITOR_ANALYSIS).map(([key, comp]) => `
            <div class="card" style="margin-bottom: 1rem; border-left: 4px solid var(--primary);">
                <div style="display: flex; justify-content: space-between; align-items: flex-start; flex-wrap: wrap; gap: 1rem;">
                    <div style="flex: 1; min-width: 200px;">
                        <h3 style="margin-bottom: 0.5rem;">${comp.name}</h3>
                        <div style="display: flex; flex-wrap: wrap; gap: 0.5rem; margin-bottom: 0.5rem;">
                            <span style="background: var(--navy); color: white; padding: 0.2rem 0.6rem; border-radius: 4px; font-size: 0.75rem;">${comp.brokerage}</span>
                            <span style="background: #f39c12; color: white; padding: 0.2rem 0.6rem; border-radius: 4px; font-size: 0.75rem;">${comp.ranking}</span>
                        </div>
                        <div style="display: flex; gap: 1rem; flex-wrap: wrap; font-size: 0.85rem; color: var(--gray);">
                            <span>&#128200; ${comp.transactions}</span>
                            <span>&#128176; ${comp.avgPrice} avg</span>
                            <span>&#128181; ${comp.totalVolume}</span>
                        </div>
                    </div>
                    <button class="btn btn-primary" onclick="showCompetitorDetail('${key}')">&#128269; Full Analysis</button>
                </div>

                <div id="competitor-detail-${key}" style="display: none; margin-top: 1.5rem; padding-top: 1.5rem; border-top: 2px solid var(--light-gray);">
                    <div class="grid-2" style="gap: 1.5rem;">
                        <!-- Strengths -->
                        <div>
                            <h4 style="color: var(--success); margin-bottom: 0.8rem;">&#9989; Their Strengths</h4>
                            <ul style="margin-left: 1.2rem; font-size: 0.9rem;">
                                ${comp.strengths.map(s => `<li style="margin-bottom: 0.4rem;">${s}</li>`).join('')}
                            </ul>
                        </div>
                        <!-- Weaknesses -->
                        <div>
                            <h4 style="color: var(--danger); margin-bottom: 0.8rem;">&#10060; Their Weaknesses</h4>
                            <ul style="margin-left: 1.2rem; font-size: 0.9rem;">
                                ${comp.weaknesses.map(w => `<li style="margin-bottom: 0.4rem;">${w}</li>`).join('')}
                            </ul>
                        </div>
                    </div>

                    <div class="grid-2" style="gap: 1.5rem; margin-top: 1.5rem;">
                        <!-- Marketing Strategy -->
                        <div>
                            <h4 style="color: var(--primary); margin-bottom: 0.8rem;">&#128640; Their Marketing Strategy</h4>
                            <ul style="margin-left: 1.2rem; font-size: 0.9rem;">
                                ${comp.marketingStrategy.map(m => `<li style="margin-bottom: 0.4rem;">${m}</li>`).join('')}
                            </ul>
                        </div>
                        <!-- Social Presence -->
                        <div>
                            <h4 style="color: #9b59b6; margin-bottom: 0.8rem;">&#128241; Their Social Media</h4>
                            <div style="font-size: 0.9rem;">
                                ${Object.entries(comp.socialPresence).map(([platform, status]) => `
                                    <div style="margin-bottom: 0.4rem;"><strong>${platform}:</strong> ${status}</div>
                                `).join('')}
                            </div>
                        </div>
                    </div>

                    <!-- How to Beat Them -->
                    <div style="background: linear-gradient(135deg, #e8f5e9, #c8e6c9); padding: 1.2rem; border-radius: 8px; margin-top: 1.5rem;">
                        <h4 style="color: var(--success); margin-bottom: 0.8rem;">&#127942; HOW YOU BEAT THEM, ELA!</h4>
                        <p style="font-size: 0.95rem; line-height: 1.6;">${comp.howToBeat}</p>
                    </div>
                </div>
            </div>
        `).join('')}

        <!-- All Cincinnati Competitors Quick View -->
        <h3 style="margin: 1.5rem 0 1rem 0;">&#128202; All Cincinnati Top Agents</h3>
        <div class="card">
            <div style="overflow-x: auto;">
                <table style="width: 100%; border-collapse: collapse; font-size: 0.9rem;">
                    <thead>
                        <tr style="background: var(--navy); color: white;">
                            <th style="padding: 0.8rem; text-align: left;">Agent/Team</th>
                            <th style="padding: 0.8rem; text-align: left;">Specialty</th>
                            <th style="padding: 0.8rem; text-align: center;">Transactions</th>
                            <th style="padding: 0.8rem; text-align: center;">Avg Price</th>
                            <th style="padding: 0.8rem; text-align: center;">Action</th>
                        </tr>
                    </thead>
                    <tbody>
                        ${VIRAL_REALTORS.cincinnati.map((r, idx) => `
                            <tr style="border-bottom: 1px solid var(--light-gray); ${idx % 2 === 0 ? 'background: var(--pale-blue);' : ''}">
                                <td style="padding: 0.8rem;"><strong>${r.name}</strong><div style="font-size: 0.8rem; color: var(--gray);">${r.handle}</div></td>
                                <td style="padding: 0.8rem; font-size: 0.85rem;">${r.specialty}</td>
                                <td style="padding: 0.8rem; text-align: center;"><strong>${r.transactions}</strong></td>
                                <td style="padding: 0.8rem; text-align: center;">${r.avgPrice}</td>
                                <td style="padding: 0.8rem; text-align: center;">
                                    <button class="btn btn-sm btn-outline" onclick="showRealtorDetail(${idx}, 'cincinnati')">Study</button>
                                </td>
                            </tr>
                        `).join('')}
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Competitive Strategy Tips -->
        <h3 style="margin: 1.5rem 0 1rem 0;">&#128161; Ela's Winning Strategy Guide</h3>
        <div class="grid-2">
            <div class="card" style="border-left: 4px solid #3498db;">
                <h4>&#127919; Positioning Against Big Teams</h4>
                <ul style="margin-left: 1.2rem; margin-top: 0.8rem; font-size: 0.9rem;">
                    <li style="margin-bottom: 0.5rem;"><strong>Lead with experience:</strong> "With 22 years in Cincinnati real estate..."</li>
                    <li style="margin-bottom: 0.5rem;"><strong>Emphasize personal service:</strong> "I personally handle every aspect..."</li>
                    <li style="margin-bottom: 0.5rem;"><strong>Highlight availability:</strong> "You'll always reach ME, not a team member"</li>
                    <li style="margin-bottom: 0.5rem;"><strong>Share market wisdom:</strong> Reference past market cycles you've navigated</li>
                </ul>
            </div>
            <div class="card" style="border-left: 4px solid #27ae60;">
                <h4>&#128170; Your Unique Value Props</h4>
                <ul style="margin-left: 1.2rem; margin-top: 0.8rem; font-size: 0.9rem;">
                    <li style="margin-bottom: 0.5rem;"><strong>Sibcy Cline brand:</strong> Trusted, established Cincinnati brokerage</li>
                    <li style="margin-bottom: 0.5rem;"><strong>22 years experience:</strong> More than most competitors combined</li>
                    <li style="margin-bottom: 0.5rem;"><strong>Personal relationships:</strong> You remember clients' names and stories</li>
                    <li style="margin-bottom: 0.5rem;"><strong>Neighborhood expertise:</strong> You know every street and school</li>
                </ul>
            </div>
        </div>

        <div class="grid-2">
            <div class="card" style="border-left: 4px solid #f39c12;">
                <h4>&#128172; Talking Points vs Competition</h4>
                <div style="margin-top: 0.8rem; font-size: 0.9rem;">
                    <p style="margin-bottom: 0.8rem;"><strong>When clients mention big teams:</strong></p>
                    <p style="background: var(--pale-blue); padding: 0.8rem; border-radius: 8px; font-style: italic;">"I understand the appeal of a big team, but here's what I've found in 22 years: clients want to work with someone who knows THEM, not just their file number. When you work with me, you get ME - not a rotating cast of team members. I'll know your kids' names, your timeline, and what really matters to you."</p>
                </div>
            </div>
            <div class="card" style="border-left: 4px solid #9b59b6;">
                <h4>&#128200; Content That Beats Competitors</h4>
                <ul style="margin-left: 1.2rem; margin-top: 0.8rem; font-size: 0.9rem;">
                    <li style="margin-bottom: 0.5rem;"><strong>Market history posts:</strong> "In 2008 I helped clients through... today I see..."</li>
                    <li style="margin-bottom: 0.5rem;"><strong>Personal touch stories:</strong> Share client relationship moments</li>
                    <li style="margin-bottom: 0.5rem;"><strong>Deep neighborhood dives:</strong> Show expertise they can't match</li>
                    <li style="margin-bottom: 0.5rem;"><strong>Educational content:</strong> Teach, don't just sell</li>
                </ul>
            </div>
        </div>
    </section>`;
}

function showCompetitorDetail(key) {
    const detail = document.getElementById('competitor-detail-' + key);
    if (detail.style.display === 'none') {
        detail.style.display = 'block';
    } else {
        detail.style.display = 'none';
    }
}

function renderHashtags() {
    return `
    <section class="page-section" id="page-hashtags">
        <div class="page-header" style="background: linear-gradient(135deg, #9c27b0, #673ab7);">
            <h2># Hashtag Research Center</h2>
            <p>300+ researched hashtags organized for maximum reach and engagement</p>
        </div>

        <!-- Quick Copy Sets -->
        <div class="card" style="background: linear-gradient(135deg, #667eea, #764ba2); color: white; margin-bottom: 1.5rem;">
            <h3 style="margin-bottom: 1rem;">&#128293; One-Click Hashtag Sets - Ready to Copy!</h3>
            <p style="opacity: 0.9; margin-bottom: 1rem;">Pre-optimized combinations tested for maximum engagement. Just click and paste!</p>
            <div class="grid-3">
                ${Object.entries(HASHTAG_SETS).slice(0, 6).map(([key, set]) => `
                    <div style="background: rgba(255,255,255,0.15); padding: 1rem; border-radius: 8px;">
                        <div style="font-weight: 600; margin-bottom: 0.3rem;">${set.name}</div>
                        <div style="font-size: 0.8rem; opacity: 0.8; margin-bottom: 0.5rem;">${set.description}</div>
                        <div style="display: flex; gap: 0.5rem; font-size: 0.75rem; margin-bottom: 0.5rem;">
                            <span style="background: rgba(255,255,255,0.2); padding: 0.2rem 0.4rem; border-radius: 4px;">Reach: ${set.reach}</span>
                            <span style="background: rgba(39,174,96,0.5); padding: 0.2rem 0.4rem; border-radius: 4px;">${set.engagement}</span>
                        </div>
                        <button class="btn btn-sm" style="background: white; color: #667eea; width: 100%;" onclick="copyToClipboard('${set.tags}')">&#128203; Copy Set</button>
                    </div>
                `).join('')}
            </div>
            <div class="grid-3" style="margin-top: 1rem;">
                ${Object.entries(HASHTAG_SETS).slice(6).map(([key, set]) => `
                    <div style="background: rgba(255,255,255,0.15); padding: 1rem; border-radius: 8px;">
                        <div style="font-weight: 600; margin-bottom: 0.3rem;">${set.name}</div>
                        <div style="font-size: 0.8rem; opacity: 0.8; margin-bottom: 0.5rem;">${set.description}</div>
                        <div style="display: flex; gap: 0.5rem; font-size: 0.75rem; margin-bottom: 0.5rem;">
                            <span style="background: rgba(255,255,255,0.2); padding: 0.2rem 0.4rem; border-radius: 4px;">Reach: ${set.reach}</span>
                            <span style="background: rgba(39,174,96,0.5); padding: 0.2rem 0.4rem; border-radius: 4px;">${set.engagement}</span>
                        </div>
                        <button class="btn btn-sm" style="background: white; color: #667eea; width: 100%;" onclick="copyToClipboard('${set.tags}')">&#128203; Copy Set</button>
                    </div>
                `).join('')}
            </div>
        </div>

        <!-- Hashtag Strategy Tips -->
        <div class="card" style="border-left: 4px solid #f39c12; margin-bottom: 1.5rem;">
            <h3>&#128161; Ela's Hashtag Strategy Guide</h3>
            <div class="grid-4" style="margin-top: 1rem;">
                <div style="text-align: center; padding: 1rem; background: var(--pale-blue); border-radius: 8px;">
                    <div style="font-size: 2rem;">30</div>
                    <div style="font-size: 0.85rem; font-weight: 600;">Max on Instagram</div>
                    <div style="font-size: 0.75rem; color: var(--gray);">Use 25-30 for best reach</div>
                </div>
                <div style="text-align: center; padding: 1rem; background: #e8f5e9; border-radius: 8px;">
                    <div style="font-size: 2rem;">5-7</div>
                    <div style="font-size: 0.85rem; font-weight: 600;">Best for TikTok</div>
                    <div style="font-size: 0.75rem; color: var(--gray);">Less is more on TikTok</div>
                </div>
                <div style="text-align: center; padding: 1rem; background: #fff3cd; border-radius: 8px;">
                    <div style="font-size: 2rem;">Mix</div>
                    <div style="font-size: 0.85rem; font-weight: 600;">Big + Small Tags</div>
                    <div style="font-size: 0.75rem; color: var(--gray);">Use varied popularity</div>
                </div>
                <div style="text-align: center; padding: 1rem; background: #fce4ec; border-radius: 8px;">
                    <div style="font-size: 2rem;">Local</div>
                    <div style="font-size: 0.85rem; font-weight: 600;">Always Include Cincinnati</div>
                    <div style="font-size: 0.75rem; color: var(--gray);">Target your market</div>
                </div>
            </div>
        </div>

        <!-- Cincinnati Hashtags -->
        <div class="grid-2">
            <div class="card">
                <div class="card-header"><span class="card-title" style="color: var(--success);">&#127961; Cincinnati - Primary</span><span class="nav-badge success">${HASHTAGS.cincinnati.primary.length}</span></div>
                <p style="font-size: 0.85rem; color: var(--gray); margin-bottom: 1rem;">High-volume Cincinnati tags - use 2-3 per post</p>
                <div style="margin-bottom: 1rem;">${HASHTAGS.cincinnati.primary.map(h => `<span style="background: #e8f5e9; padding: 0.3rem 0.6rem; border-radius: 4px; margin: 0.2rem; display: inline-block; font-size: 0.8rem; cursor: pointer;" onclick="copyToClipboard('${h}')">${h}</span>`).join('')}</div>
                <button class="btn btn-sm btn-success" onclick="copyToClipboard('${HASHTAGS.cincinnati.primary.join(' ')}')">Copy All Primary</button>
            </div>
            <div class="card">
                <div class="card-header"><span class="card-title" style="color: var(--primary);">&#127961; Cincinnati - Secondary</span><span class="nav-badge">${HASHTAGS.cincinnati.secondary.length}</span></div>
                <p style="font-size: 0.85rem; color: var(--gray); margin-bottom: 1rem;">Medium-volume tags for broader reach</p>
                <div style="margin-bottom: 1rem;">${HASHTAGS.cincinnati.secondary.map(h => `<span style="background: var(--pale-blue); padding: 0.3rem 0.6rem; border-radius: 4px; margin: 0.2rem; display: inline-block; font-size: 0.8rem; cursor: pointer;" onclick="copyToClipboard('${h}')">${h}</span>`).join('')}</div>
                <button class="btn btn-sm btn-primary" onclick="copyToClipboard('${HASHTAGS.cincinnati.secondary.join(' ')}')">Copy All Secondary</button>
            </div>
        </div>

        <div class="grid-2">
            <div class="card">
                <div class="card-header"><span class="card-title" style="color: #f39c12;">&#127968; Cincinnati Neighborhoods</span><span class="nav-badge" style="background: #f39c12;">${HASHTAGS.cincinnati.neighborhoods.length}</span></div>
                <p style="font-size: 0.85rem; color: var(--gray); margin-bottom: 1rem;">Hyper-local tags - BEST for engagement!</p>
                <div style="margin-bottom: 1rem; max-height: 200px; overflow-y: auto;">${HASHTAGS.cincinnati.neighborhoods.map(h => `<span style="background: #fff3cd; padding: 0.3rem 0.6rem; border-radius: 4px; margin: 0.2rem; display: inline-block; font-size: 0.8rem; cursor: pointer;" onclick="copyToClipboard('${h}')">${h}</span>`).join('')}</div>
                <button class="btn btn-sm btn-warning" onclick="copyToClipboard('${HASHTAGS.cincinnati.neighborhoods.slice(0,10).join(' ')}')">Copy Top 10</button>
            </div>
            <div class="card">
                <div class="card-header"><span class="card-title" style="color: #e74c3c;">&#128293; Cincinnati Trending</span><span class="nav-badge" style="background: #e74c3c;">${HASHTAGS.cincinnati.trending.length + HASHTAGS.cincinnati.lifestyle.length}</span></div>
                <p style="font-size: 0.85rem; color: var(--gray); margin-bottom: 1rem;">Trending & lifestyle tags for virality</p>
                <div style="margin-bottom: 0.5rem;">${HASHTAGS.cincinnati.trending.map(h => `<span style="background: #ffebee; padding: 0.3rem 0.6rem; border-radius: 4px; margin: 0.2rem; display: inline-block; font-size: 0.8rem; cursor: pointer;" onclick="copyToClipboard('${h}')">${h}</span>`).join('')}</div>
                <div style="margin-bottom: 1rem;">${HASHTAGS.cincinnati.lifestyle.map(h => `<span style="background: #fce4ec; padding: 0.3rem 0.6rem; border-radius: 4px; margin: 0.2rem; display: inline-block; font-size: 0.8rem; cursor: pointer;" onclick="copyToClipboard('${h}')">${h}</span>`).join('')}</div>
                <button class="btn btn-sm btn-danger" onclick="copyToClipboard('${HASHTAGS.cincinnati.trending.join(' ')} ${HASHTAGS.cincinnati.lifestyle.join(' ')}')">Copy All Trending</button>
            </div>
        </div>

        <!-- Real Estate Hashtags -->
        <h3 style="margin: 1.5rem 0 1rem 0;">&#127758; Real Estate Industry Hashtags</h3>
        <div class="grid-3">
            <div class="card">
                <div class="card-header"><span class="card-title">&#127968; Buying</span><span class="nav-badge">${HASHTAGS.realEstate.buying.length}</span></div>
                <div style="margin-bottom: 1rem; max-height: 180px; overflow-y: auto;">${HASHTAGS.realEstate.buying.map(h => `<span style="background: var(--pale-blue); padding: 0.3rem 0.6rem; border-radius: 4px; margin: 0.2rem; display: inline-block; font-size: 0.8rem; cursor: pointer;" onclick="copyToClipboard('${h}')">${h}</span>`).join('')}</div>
                <button class="btn btn-sm btn-outline" onclick="copyToClipboard('${HASHTAGS.realEstate.buying.join(' ')}')">Copy All</button>
            </div>
            <div class="card">
                <div class="card-header"><span class="card-title">&#128184; Selling</span><span class="nav-badge">${HASHTAGS.realEstate.selling.length}</span></div>
                <div style="margin-bottom: 1rem; max-height: 180px; overflow-y: auto;">${HASHTAGS.realEstate.selling.map(h => `<span style="background: #fce4ec; padding: 0.3rem 0.6rem; border-radius: 4px; margin: 0.2rem; display: inline-block; font-size: 0.8rem; cursor: pointer;" onclick="copyToClipboard('${h}')">${h}</span>`).join('')}</div>
                <button class="btn btn-sm btn-outline" onclick="copyToClipboard('${HASHTAGS.realEstate.selling.join(' ')}')">Copy All</button>
            </div>
            <div class="card">
                <div class="card-header"><span class="card-title">&#127775; General</span><span class="nav-badge">${HASHTAGS.realEstate.general.length}</span></div>
                <div style="margin-bottom: 1rem; max-height: 180px; overflow-y: auto;">${HASHTAGS.realEstate.general.map(h => `<span style="background: var(--light-gray); padding: 0.3rem 0.6rem; border-radius: 4px; margin: 0.2rem; display: inline-block; font-size: 0.8rem; cursor: pointer;" onclick="copyToClipboard('${h}')">${h}</span>`).join('')}</div>
                <button class="btn btn-sm btn-outline" onclick="copyToClipboard('${HASHTAGS.realEstate.general.join(' ')}')">Copy All</button>
            </div>
        </div>

        <div class="grid-3">
            <div class="card">
                <div class="card-header"><span class="card-title">&#128142; Luxury</span><span class="nav-badge" style="background: #9b59b6;">${HASHTAGS.realEstate.luxury.length}</span></div>
                <div style="margin-bottom: 1rem; max-height: 180px; overflow-y: auto;">${HASHTAGS.realEstate.luxury.map(h => `<span style="background: #f3e5f5; padding: 0.3rem 0.6rem; border-radius: 4px; margin: 0.2rem; display: inline-block; font-size: 0.8rem; cursor: pointer;" onclick="copyToClipboard('${h}')">${h}</span>`).join('')}</div>
                <button class="btn btn-sm btn-outline" onclick="copyToClipboard('${HASHTAGS.realEstate.luxury.join(' ')}')">Copy All</button>
            </div>
            <div class="card">
                <div class="card-header"><span class="card-title">&#128200; Investment</span><span class="nav-badge" style="background: #27ae60;">${HASHTAGS.realEstate.investment.length}</span></div>
                <div style="margin-bottom: 1rem; max-height: 180px; overflow-y: auto;">${HASHTAGS.realEstate.investment.map(h => `<span style="background: #e8f5e9; padding: 0.3rem 0.6rem; border-radius: 4px; margin: 0.2rem; display: inline-block; font-size: 0.8rem; cursor: pointer;" onclick="copyToClipboard('${h}')">${h}</span>`).join('')}</div>
                <button class="btn btn-sm btn-outline" onclick="copyToClipboard('${HASHTAGS.realEstate.investment.join(' ')}')">Copy All</button>
            </div>
            <div class="card">
                <div class="card-header"><span class="card-title">&#128181; Mortgage</span><span class="nav-badge" style="background: #3498db;">${HASHTAGS.realEstate.mortgage.length}</span></div>
                <div style="margin-bottom: 1rem; max-height: 180px; overflow-y: auto;">${HASHTAGS.realEstate.mortgage.map(h => `<span style="background: #e3f2fd; padding: 0.3rem 0.6rem; border-radius: 4px; margin: 0.2rem; display: inline-block; font-size: 0.8rem; cursor: pointer;" onclick="copyToClipboard('${h}')">${h}</span>`).join('')}</div>
                <button class="btn btn-sm btn-outline" onclick="copyToClipboard('${HASHTAGS.realEstate.mortgage.join(' ')}')">Copy All</button>
            </div>
        </div>

        <!-- Content Type Hashtags -->
        <h3 style="margin: 1.5rem 0 1rem 0;">&#128221; By Content Type</h3>
        <div class="grid-3">
            <div class="card">
                <div class="card-header"><span class="card-title">&#128200; Market Update</span></div>
                <div style="margin-bottom: 1rem;">${HASHTAGS.contentType.marketUpdate.map(h => `<span style="background: #e3f2fd; padding: 0.3rem 0.6rem; border-radius: 4px; margin: 0.2rem; display: inline-block; font-size: 0.8rem; cursor: pointer;" onclick="copyToClipboard('${h}')">${h}</span>`).join('')}</div>
                <button class="btn btn-sm btn-outline" onclick="copyToClipboard('${HASHTAGS.contentType.marketUpdate.join(' ')}')">Copy All</button>
            </div>
            <div class="card">
                <div class="card-header"><span class="card-title">&#128295; Home Tips</span></div>
                <div style="margin-bottom: 1rem;">${HASHTAGS.contentType.homeTips.map(h => `<span style="background: #fff3e0; padding: 0.3rem 0.6rem; border-radius: 4px; margin: 0.2rem; display: inline-block; font-size: 0.8rem; cursor: pointer;" onclick="copyToClipboard('${h}')">${h}</span>`).join('')}</div>
                <button class="btn btn-sm btn-outline" onclick="copyToClipboard('${HASHTAGS.contentType.homeTips.join(' ')}')">Copy All</button>
            </div>
            <div class="card">
                <div class="card-header"><span class="card-title">&#127961; Neighborhood</span></div>
                <div style="margin-bottom: 1rem;">${HASHTAGS.contentType.neighborhoodGuide.map(h => `<span style="background: #e8f5e9; padding: 0.3rem 0.6rem; border-radius: 4px; margin: 0.2rem; display: inline-block; font-size: 0.8rem; cursor: pointer;" onclick="copyToClipboard('${h}')">${h}</span>`).join('')}</div>
                <button class="btn btn-sm btn-outline" onclick="copyToClipboard('${HASHTAGS.contentType.neighborhoodGuide.join(' ')}')">Copy All</button>
            </div>
        </div>

        <div class="grid-3">
            <div class="card">
                <div class="card-header"><span class="card-title">&#128682; Open House</span></div>
                <div style="margin-bottom: 1rem;">${HASHTAGS.contentType.openHouse.map(h => `<span style="background: #e1f5fe; padding: 0.3rem 0.6rem; border-radius: 4px; margin: 0.2rem; display: inline-block; font-size: 0.8rem; cursor: pointer;" onclick="copyToClipboard('${h}')">${h}</span>`).join('')}</div>
                <button class="btn btn-sm btn-outline" onclick="copyToClipboard('${HASHTAGS.contentType.openHouse.join(' ')}')">Copy All</button>
            </div>
            <div class="card">
                <div class="card-header"><span class="card-title">&#127881; Just Sold</span></div>
                <div style="margin-bottom: 1rem;">${HASHTAGS.contentType.justSold.map(h => `<span style="background: #c8e6c9; padding: 0.3rem 0.6rem; border-radius: 4px; margin: 0.2rem; display: inline-block; font-size: 0.8rem; cursor: pointer;" onclick="copyToClipboard('${h}')">${h}</span>`).join('')}</div>
                <button class="btn btn-sm btn-outline" onclick="copyToClipboard('${HASHTAGS.contentType.justSold.join(' ')}')">Copy All</button>
            </div>
            <div class="card">
                <div class="card-header"><span class="card-title">&#128153; Testimonial</span></div>
                <div style="margin-bottom: 1rem;">${HASHTAGS.contentType.testimonial.map(h => `<span style="background: #f3e5f5; padding: 0.3rem 0.6rem; border-radius: 4px; margin: 0.2rem; display: inline-block; font-size: 0.8rem; cursor: pointer;" onclick="copyToClipboard('${h}')">${h}</span>`).join('')}</div>
                <button class="btn btn-sm btn-outline" onclick="copyToClipboard('${HASHTAGS.contentType.testimonial.join(' ')}')">Copy All</button>
            </div>
        </div>

        <!-- Platform Specific -->
        <h3 style="margin: 1.5rem 0 1rem 0;">&#128241; Platform-Specific Hashtags</h3>
        <div class="grid-5">
            <div class="card" style="border-top: 3px solid var(--instagram);">
                <div style="text-align: center; margin-bottom: 1rem;">
                    <div style="font-size: 1.5rem;">&#128247;</div>
                    <strong>Instagram</strong>
                </div>
                <div style="font-size: 0.75rem;">${HASHTAGS.platform.instagram.slice(0,5).map(h => `<span style="background: #fce4ec; padding: 0.2rem 0.4rem; border-radius: 4px; margin: 0.1rem; display: inline-block; cursor: pointer;" onclick="copyToClipboard('${h}')">${h}</span>`).join('')}</div>
                <button class="btn btn-sm btn-outline" style="width: 100%; margin-top: 0.5rem;" onclick="copyToClipboard('${HASHTAGS.platform.instagram.join(' ')}')">Copy</button>
            </div>
            <div class="card" style="border-top: 3px solid var(--tiktok);">
                <div style="text-align: center; margin-bottom: 1rem;">
                    <div style="font-size: 1.5rem;">&#127909;</div>
                    <strong>TikTok</strong>
                </div>
                <div style="font-size: 0.75rem;">${HASHTAGS.platform.tiktok.slice(0,5).map(h => `<span style="background: #f5f5f5; padding: 0.2rem 0.4rem; border-radius: 4px; margin: 0.1rem; display: inline-block; cursor: pointer;" onclick="copyToClipboard('${h}')">${h}</span>`).join('')}</div>
                <button class="btn btn-sm btn-outline" style="width: 100%; margin-top: 0.5rem;" onclick="copyToClipboard('${HASHTAGS.platform.tiktok.join(' ')}')">Copy</button>
            </div>
            <div class="card" style="border-top: 3px solid var(--facebook);">
                <div style="text-align: center; margin-bottom: 1rem;">
                    <div style="font-size: 1.5rem;">&#128101;</div>
                    <strong>Facebook</strong>
                </div>
                <div style="font-size: 0.75rem;">${HASHTAGS.platform.facebook.slice(0,5).map(h => `<span style="background: #e3f2fd; padding: 0.2rem 0.4rem; border-radius: 4px; margin: 0.1rem; display: inline-block; cursor: pointer;" onclick="copyToClipboard('${h}')">${h}</span>`).join('')}</div>
                <button class="btn btn-sm btn-outline" style="width: 100%; margin-top: 0.5rem;" onclick="copyToClipboard('${HASHTAGS.platform.facebook.join(' ')}')">Copy</button>
            </div>
            <div class="card" style="border-top: 3px solid var(--youtube);">
                <div style="text-align: center; margin-bottom: 1rem;">
                    <div style="font-size: 1.5rem;">&#128250;</div>
                    <strong>YouTube</strong>
                </div>
                <div style="font-size: 0.75rem;">${HASHTAGS.platform.youtube.slice(0,5).map(h => `<span style="background: #ffebee; padding: 0.2rem 0.4rem; border-radius: 4px; margin: 0.1rem; display: inline-block; cursor: pointer;" onclick="copyToClipboard('${h}')">${h}</span>`).join('')}</div>
                <button class="btn btn-sm btn-outline" style="width: 100%; margin-top: 0.5rem;" onclick="copyToClipboard('${HASHTAGS.platform.youtube.join(' ')}')">Copy</button>
            </div>
            <div class="card" style="border-top: 3px solid var(--linkedin);">
                <div style="text-align: center; margin-bottom: 1rem;">
                    <div style="font-size: 1.5rem;">&#128188;</div>
                    <strong>LinkedIn</strong>
                </div>
                <div style="font-size: 0.75rem;">${HASHTAGS.platform.linkedin.slice(0,5).map(h => `<span style="background: #e8eaf6; padding: 0.2rem 0.4rem; border-radius: 4px; margin: 0.1rem; display: inline-block; cursor: pointer;" onclick="copyToClipboard('${h}')">${h}</span>`).join('')}</div>
                <button class="btn btn-sm btn-outline" style="width: 100%; margin-top: 0.5rem;" onclick="copyToClipboard('${HASHTAGS.platform.linkedin.join(' ')}')">Copy</button>
            </div>
        </div>

        <!-- Seasonal -->
        <h3 style="margin: 1.5rem 0 1rem 0;">&#127796; Seasonal Hashtags</h3>
        <div class="grid-5">
            <div class="card" style="background: linear-gradient(135deg, #e8f5e9, #c8e6c9);">
                <div style="text-align: center;">
                    <div style="font-size: 1.5rem;">&#127800;</div>
                    <strong>Spring</strong>
                </div>
                <button class="btn btn-sm btn-success" style="width: 100%; margin-top: 0.5rem;" onclick="copyToClipboard('${HASHTAGS.seasonal.spring.join(' ')}')">Copy</button>
            </div>
            <div class="card" style="background: linear-gradient(135deg, #fff8e1, #ffecb3);">
                <div style="text-align: center;">
                    <div style="font-size: 1.5rem;">&#9728;</div>
                    <strong>Summer</strong>
                </div>
                <button class="btn btn-sm btn-warning" style="width: 100%; margin-top: 0.5rem;" onclick="copyToClipboard('${HASHTAGS.seasonal.summer.join(' ')}')">Copy</button>
            </div>
            <div class="card" style="background: linear-gradient(135deg, #fff3e0, #ffe0b2);">
                <div style="text-align: center;">
                    <div style="font-size: 1.5rem;">&#127810;</div>
                    <strong>Fall</strong>
                </div>
                <button class="btn btn-sm" style="background: #ff9800; color: white; width: 100%; margin-top: 0.5rem;" onclick="copyToClipboard('${HASHTAGS.seasonal.fall.join(' ')}')">Copy</button>
            </div>
            <div class="card" style="background: linear-gradient(135deg, #e3f2fd, #bbdefb);">
                <div style="text-align: center;">
                    <div style="font-size: 1.5rem;">&#10052;</div>
                    <strong>Winter</strong>
                </div>
                <button class="btn btn-sm btn-primary" style="width: 100%; margin-top: 0.5rem;" onclick="copyToClipboard('${HASHTAGS.seasonal.winter.join(' ')}')">Copy</button>
            </div>
            <div class="card" style="background: linear-gradient(135deg, #fce4ec, #f8bbd9);">
                <div style="text-align: center;">
                    <div style="font-size: 1.5rem;">&#127876;</div>
                    <strong>Holidays</strong>
                </div>
                <button class="btn btn-sm btn-danger" style="width: 100%; margin-top: 0.5rem;" onclick="copyToClipboard('${HASHTAGS.seasonal.holidays.join(' ')}')">Copy</button>
            </div>
        </div>

        <!-- Demographics -->
        <h3 style="margin: 1.5rem 0 1rem 0;">&#128101; Target Audience Hashtags</h3>
        <div class="grid-5">
            <div class="card">
                <div style="text-align: center; margin-bottom: 0.5rem;">
                    <div style="font-size: 1.5rem;">&#127968;</div>
                    <strong style="font-size: 0.85rem;">First-Time Buyers</strong>
                </div>
                <button class="btn btn-sm btn-outline" style="width: 100%;" onclick="copyToClipboard('${HASHTAGS.demographics.firstTimeBuyers.join(' ')}')">Copy Set</button>
            </div>
            <div class="card">
                <div style="text-align: center; margin-bottom: 0.5rem;">
                    <div style="font-size: 1.5rem;">&#128106;</div>
                    <strong style="font-size: 0.85rem;">Families</strong>
                </div>
                <button class="btn btn-sm btn-outline" style="width: 100%;" onclick="copyToClipboard('${HASHTAGS.demographics.families.join(' ')}')">Copy Set</button>
            </div>
            <div class="card">
                <div style="text-align: center; margin-bottom: 0.5rem;">
                    <div style="font-size: 1.5rem;">&#128200;</div>
                    <strong style="font-size: 0.85rem;">Investors</strong>
                </div>
                <button class="btn btn-sm btn-outline" style="width: 100%;" onclick="copyToClipboard('${HASHTAGS.demographics.investors.join(' ')}')">Copy Set</button>
            </div>
            <div class="card">
                <div style="text-align: center; margin-bottom: 0.5rem;">
                    <div style="font-size: 1.5rem;">&#127969;</div>
                    <strong style="font-size: 0.85rem;">Seniors</strong>
                </div>
                <button class="btn btn-sm btn-outline" style="width: 100%;" onclick="copyToClipboard('${HASHTAGS.demographics.seniors.join(' ')}')">Copy Set</button>
            </div>
            <div class="card">
                <div style="text-align: center; margin-bottom: 0.5rem;">
                    <div style="font-size: 1.5rem;">&#128666;</div>
                    <strong style="font-size: 0.85rem;">Relocating</strong>
                </div>
                <button class="btn btn-sm btn-outline" style="width: 100%;" onclick="copyToClipboard('${HASHTAGS.demographics.relocating.join(' ')}')">Copy Set</button>
            </div>
        </div>

        <!-- Engagement -->
        <h3 style="margin: 1.5rem 0 1rem 0;">&#128640; Engagement Boosters</h3>
        <div class="grid-4">
            <div class="card">
                <div class="card-header"><span class="card-title">&#128172; Call to Action</span></div>
                <div style="margin-bottom: 1rem;">${HASHTAGS.engagement.callToAction.map(h => `<span style="background: #e1f5fe; padding: 0.3rem 0.6rem; border-radius: 4px; margin: 0.2rem; display: inline-block; font-size: 0.8rem; cursor: pointer;" onclick="copyToClipboard('${h}')">${h}</span>`).join('')}</div>
                <button class="btn btn-sm btn-outline" onclick="copyToClipboard('${HASHTAGS.engagement.callToAction.join(' ')}')">Copy All</button>
            </div>
            <div class="card">
                <div class="card-header"><span class="card-title">&#128293; Trending 2026</span></div>
                <div style="margin-bottom: 1rem;">${HASHTAGS.engagement.trending2026.map(h => `<span style="background: #ffebee; padding: 0.3rem 0.6rem; border-radius: 4px; margin: 0.2rem; display: inline-block; font-size: 0.8rem; cursor: pointer;" onclick="copyToClipboard('${h}')">${h}</span>`).join('')}</div>
                <button class="btn btn-sm btn-outline" onclick="copyToClipboard('${HASHTAGS.engagement.trending2026.join(' ')}')">Copy All</button>
            </div>
            <div class="card">
                <div class="card-header"><span class="card-title">&#128218; Educational</span></div>
                <div style="margin-bottom: 1rem;">${HASHTAGS.engagement.educational.map(h => `<span style="background: #e8f5e9; padding: 0.3rem 0.6rem; border-radius: 4px; margin: 0.2rem; display: inline-block; font-size: 0.8rem; cursor: pointer;" onclick="copyToClipboard('${h}')">${h}</span>`).join('')}</div>
                <button class="btn btn-sm btn-outline" onclick="copyToClipboard('${HASHTAGS.engagement.educational.join(' ')}')">Copy All</button>
            </div>
            <div class="card">
                <div class="card-header"><span class="card-title">&#128170; Motivational</span></div>
                <div style="margin-bottom: 1rem;">${HASHTAGS.engagement.motivational.map(h => `<span style="background: #f3e5f5; padding: 0.3rem 0.6rem; border-radius: 4px; margin: 0.2rem; display: inline-block; font-size: 0.8rem; cursor: pointer;" onclick="copyToClipboard('${h}')">${h}</span>`).join('')}</div>
                <button class="btn btn-sm btn-outline" onclick="copyToClipboard('${HASHTAGS.engagement.motivational.join(' ')}')">Copy All</button>
            </div>
        </div>
    </section>`;
}

function renderNeighborhoods() {
    return `
    <section class="page-section" id="page-neighborhoods">
        <div class="page-header" style="background: linear-gradient(135deg, #27ae60, #2ecc71);">
            <h2>&#127969; Cincinnati Market Reports</h2>
            <p>Neighborhood-by-neighborhood data for your posts</p>
        </div>
        <div class="grid-2">
            ${Object.values(NEIGHBORHOODS).map(n => `
                <div class="card">
                    <div class="card-header">
                        <span class="card-title">${n.name}</span>
                        <span style="color: var(--success);">&#9650; ${n.priceChange}% YoY</span>
                    </div>
                    <div class="grid-3" style="margin-bottom: 1rem;">
                        <div class="stat-card" style="padding: 0.8rem;"><div class="stat-number" style="font-size: 1.2rem;">$${(n.medianPrice/1000).toFixed(0)}K</div><div class="stat-label">Median Price</div></div>
                        <div class="stat-card" style="padding: 0.8rem;"><div class="stat-number" style="font-size: 1.2rem;">${n.daysOnMarket}</div><div class="stat-label">Days on Market</div></div>
                        <div class="stat-card" style="padding: 0.8rem;"><div class="stat-number" style="font-size: 1.2rem;">${n.walkScore}</div><div class="stat-label">Walk Score</div></div>
                    </div>
                    <div style="font-size: 0.85rem; color: var(--gray); margin-bottom: 0.5rem;">&#127891; ${n.schools}</div>
                    <div>${n.highlights.map(h => `<span style="background: var(--pale-blue); padding: 0.2rem 0.5rem; border-radius: 4px; margin: 0.2rem; display: inline-block; font-size: 0.8rem;">${h}</span>`).join('')}</div>
                    <button class="btn btn-sm btn-primary" style="margin-top: 1rem; width: 100%;" onclick="generateNeighborhoodPost('${n.name}')">&#10024; Generate ${n.name} Post</button>
                </div>
            `).join('')}
        </div>
    </section>`;
}

function generateNeighborhoodPost(name) {
    showToast('Generating ' + name + ' spotlight post...');
    document.getElementById('gen-type').value = 'neighborhood';
    document.getElementById('gen-topic').value = name;
    document.querySelector('[data-page="generator"]').click();
    setTimeout(() => generateContent(), 100);
}

function renderLeads() {
    const activeTab = leadActiveTab || 'pipeline';
    return `
    <section class="page-section" id="page-leads">
        <div class="page-header" style="background: linear-gradient(135deg, #f39c12, #e67e22);">
            <h2>&#128101; Lead Command Center</h2>
            <p>Enterprise-grade lead management, scoring, nurturing & conversion</p>
        </div>

        <!-- Lead Navigation Tabs -->
        <div class="card" style="padding: 0; margin-bottom: 1.5rem;">
            <div style="display: flex; flex-wrap: wrap; border-bottom: 2px solid var(--border);">
                <button class="btn ${activeTab === 'pipeline' ? 'btn-primary' : ''}" onclick="switchLeadTab('pipeline')" style="border-radius: 0; flex: 1; min-width: 120px;">ðŸ“Š Pipeline</button>
                <button class="btn ${activeTab === 'add' ? 'btn-primary' : ''}" onclick="switchLeadTab('add')" style="border-radius: 0; flex: 1; min-width: 120px;">âž• Add Lead</button>
                <button class="btn ${activeTab === 'smart-lists' ? 'btn-primary' : ''}" onclick="switchLeadTab('smart-lists')" style="border-radius: 0; flex: 1; min-width: 120px;">ðŸŽ¯ Smart Lists</button>
                <button class="btn ${activeTab === 'nurture' ? 'btn-primary' : ''}" onclick="switchLeadTab('nurture')" style="border-radius: 0; flex: 1; min-width: 120px;">ðŸ¤– Auto-Nurture</button>
                <button class="btn ${activeTab === 'tasks' ? 'btn-primary' : ''}" onclick="switchLeadTab('tasks')" style="border-radius: 0; flex: 1; min-width: 120px;">âœ… Tasks</button>
                <button class="btn ${activeTab === 'magnets' ? 'btn-primary' : ''}" onclick="switchLeadTab('magnets')" style="border-radius: 0; flex: 1; min-width: 120px;">ðŸ§² Lead Magnets</button>
                <button class="btn ${activeTab === 'scripts' ? 'btn-primary' : ''}" onclick="switchLeadTab('scripts')" style="border-radius: 0; flex: 1; min-width: 120px;">ðŸ“ Scripts</button>
                <button class="btn ${activeTab === 'analytics' ? 'btn-primary' : ''}" onclick="switchLeadTab('analytics')" style="border-radius: 0; flex: 1; min-width: 120px;">ðŸ“ˆ Analytics</button>
            </div>
        </div>

        <!-- Lead Stats Dashboard - Always Visible -->
        <div class="grid-6" style="margin-bottom: 1.5rem;">
            <div class="stat-card" style="border-top: 4px solid #e74c3c;">
                <div class="stat-number" id="hot-leads-count">0</div>
                <div class="stat-label">ðŸ”¥ Hot</div>
            </div>
            <div class="stat-card" style="border-top: 4px solid #f39c12;">
                <div class="stat-number" id="warm-leads-count">0</div>
                <div class="stat-label">â˜€ï¸ Warm</div>
            </div>
            <div class="stat-card" style="border-top: 4px solid #3498db;">
                <div class="stat-number" id="cold-leads-count">0</div>
                <div class="stat-label">â„ï¸ Cold</div>
            </div>
            <div class="stat-card" style="border-top: 4px solid #9b59b6;">
                <div class="stat-number" id="nurturing-count">0</div>
                <div class="stat-label">ðŸ¤– Nurturing</div>
            </div>
            <div class="stat-card" style="border-top: 4px solid #27ae60;">
                <div class="stat-number" id="tasks-due-count">0</div>
                <div class="stat-label">âœ… Tasks Due</div>
            </div>
            <div class="stat-card" style="border-top: 4px solid #1abc9c;">
                <div class="stat-number" id="total-leads-count">0</div>
                <div class="stat-label">ðŸ“Š Total</div>
            </div>
        </div>

        <!-- Dynamic Content Area -->
        <div id="lead-tab-content">
            ${renderLeadTabContent(activeTab)}
        </div>
    </section>`;
}

let leadActiveTab = 'pipeline';

function switchLeadTab(tab) {
    leadActiveTab = tab;
    document.getElementById('lead-tab-content').innerHTML = renderLeadTabContent(tab);
    // Re-render the tabs to update active state
    const tabButtons = document.querySelectorAll('#page-leads .card:first-of-type button');
    tabButtons.forEach(btn => {
        btn.classList.remove('btn-primary');
        if (btn.textContent.toLowerCase().includes(tab.replace('-', ' ').split(' ')[0])) {
            btn.classList.add('btn-primary');
        }
    });
    if (tab === 'pipeline') { renderLeadsPipeline(); updateLeadStats(); }
    if (tab === 'smart-lists') { renderSmartLists(); }
    if (tab === 'tasks') { renderLeadTasks(); }
    if (tab === 'analytics') { renderLeadAnalytics(); }
}

function renderLeadTabContent(tab) {
    switch(tab) {
        case 'pipeline': return renderPipelineTab();
        case 'add': return renderAddLeadTab();
        case 'smart-lists': return renderSmartListsTab();
        case 'nurture': return renderNurtureTab();
        case 'tasks': return renderTasksTab();
        case 'magnets': return renderMagnetsTab();
        case 'scripts': return renderScriptsTab();
        case 'analytics': return renderAnalyticsTab();
        default: return renderPipelineTab();
    }
}

// ==================== PIPELINE TAB ====================
function renderPipelineTab() {
    return `
    <!-- Kanban Pipeline View -->
    <div class="card">
        <div class="card-header" style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 1rem;">
            <span class="card-title">ðŸŽ¯ Lead Pipeline</span>
            <div style="display: flex; gap: 0.5rem; flex-wrap: wrap;">
                <input type="text" class="form-input" id="lead-search" placeholder="ðŸ” Search leads..." style="width: 200px;" onkeyup="filterLeadsPipeline()">
                <select class="form-input" id="pipeline-filter" onchange="filterLeadsPipeline()" style="width: auto;">
                    <option value="all">All Stages</option>
                    <option value="new">New Leads</option>
                    <option value="contacted">Contacted</option>
                    <option value="qualified">Qualified</option>
                    <option value="showing">Showing</option>
                    <option value="offer">Offer</option>
                    <option value="under-contract">Under Contract</option>
                    <option value="closed">Closed</option>
                </select>
                <select class="form-input" id="pipeline-type-filter" onchange="filterLeadsPipeline()" style="width: auto;">
                    <option value="all">All Types</option>
                    <option value="buyer">Buyers</option>
                    <option value="seller">Sellers</option>
                    <option value="investor">Investors</option>
                </select>
                <button class="btn" onclick="exportLeads()">ðŸ“¥ Export</button>
            </div>
        </div>

        <!-- Kanban Board -->
        <div style="overflow-x: auto; padding: 1rem 0;">
            <div id="pipeline-board" style="display: flex; gap: 1rem; min-width: max-content;">
                <div class="pipeline-column" data-stage="new" style="min-width: 280px; background: var(--surface); border-radius: 8px; padding: 0.75rem;">
                    <div style="font-weight: bold; padding: 0.5rem; background: #3498db; color: white; border-radius: 4px; margin-bottom: 0.75rem; text-align: center;">
                        ðŸ†• New Leads <span id="stage-new-count" class="badge" style="background: white; color: #3498db;">0</span>
                    </div>
                    <div id="stage-new" class="pipeline-items" style="min-height: 200px;"></div>
                </div>
                <div class="pipeline-column" data-stage="contacted" style="min-width: 280px; background: var(--surface); border-radius: 8px; padding: 0.75rem;">
                    <div style="font-weight: bold; padding: 0.5rem; background: #9b59b6; color: white; border-radius: 4px; margin-bottom: 0.75rem; text-align: center;">
                        ðŸ“ž Contacted <span id="stage-contacted-count" class="badge" style="background: white; color: #9b59b6;">0</span>
                    </div>
                    <div id="stage-contacted" class="pipeline-items" style="min-height: 200px;"></div>
                </div>
                <div class="pipeline-column" data-stage="qualified" style="min-width: 280px; background: var(--surface); border-radius: 8px; padding: 0.75rem;">
                    <div style="font-weight: bold; padding: 0.5rem; background: #f39c12; color: white; border-radius: 4px; margin-bottom: 0.75rem; text-align: center;">
                        âœ… Qualified <span id="stage-qualified-count" class="badge" style="background: white; color: #f39c12;">0</span>
                    </div>
                    <div id="stage-qualified" class="pipeline-items" style="min-height: 200px;"></div>
                </div>
                <div class="pipeline-column" data-stage="showing" style="min-width: 280px; background: var(--surface); border-radius: 8px; padding: 0.75rem;">
                    <div style="font-weight: bold; padding: 0.5rem; background: #e67e22; color: white; border-radius: 4px; margin-bottom: 0.75rem; text-align: center;">
                        ðŸ  Showing <span id="stage-showing-count" class="badge" style="background: white; color: #e67e22;">0</span>
                    </div>
                    <div id="stage-showing" class="pipeline-items" style="min-height: 200px;"></div>
                </div>
                <div class="pipeline-column" data-stage="offer" style="min-width: 280px; background: var(--surface); border-radius: 8px; padding: 0.75rem;">
                    <div style="font-weight: bold; padding: 0.5rem; background: #e74c3c; color: white; border-radius: 4px; margin-bottom: 0.75rem; text-align: center;">
                        ðŸ“ Offer <span id="stage-offer-count" class="badge" style="background: white; color: #e74c3c;">0</span>
                    </div>
                    <div id="stage-offer" class="pipeline-items" style="min-height: 200px;"></div>
                </div>
                <div class="pipeline-column" data-stage="under-contract" style="min-width: 280px; background: var(--surface); border-radius: 8px; padding: 0.75rem;">
                    <div style="font-weight: bold; padding: 0.5rem; background: #1abc9c; color: white; border-radius: 4px; margin-bottom: 0.75rem; text-align: center;">
                        ðŸ“‹ Under Contract <span id="stage-under-contract-count" class="badge" style="background: white; color: #1abc9c;">0</span>
                    </div>
                    <div id="stage-under-contract" class="pipeline-items" style="min-height: 200px;"></div>
                </div>
                <div class="pipeline-column" data-stage="closed" style="min-width: 280px; background: var(--surface); border-radius: 8px; padding: 0.75rem;">
                    <div style="font-weight: bold; padding: 0.5rem; background: #27ae60; color: white; border-radius: 4px; margin-bottom: 0.75rem; text-align: center;">
                        ðŸŽ‰ Closed <span id="stage-closed-count" class="badge" style="background: white; color: #27ae60;">0</span>
                    </div>
                    <div id="stage-closed" class="pipeline-items" style="min-height: 200px;"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Quick Actions -->
    <div class="grid-4" style="margin-top: 1.5rem;">
        <button class="btn btn-primary" onclick="switchLeadTab('add')" style="padding: 1rem;">âž• Add New Lead</button>
        <button class="btn" onclick="showBulkActions()" style="padding: 1rem;">ðŸ“¦ Bulk Actions</button>
        <button class="btn" onclick="showImportModal()" style="padding: 1rem;">ðŸ“¤ Import Leads</button>
        <button class="btn" onclick="switchLeadTab('smart-lists')" style="padding: 1rem;">ðŸŽ¯ Smart Lists</button>
    </div>`;
}

// ==================== ADD LEAD TAB ====================
function renderAddLeadTab() {
    return `
    <div class="grid-2">
        <!-- Lead Capture Form -->
        <div class="card" style="border-left: 5px solid #f39c12;">
            <div class="card-header"><span class="card-title">âž• Add New Lead</span></div>

            <!-- Contact Information -->
            <h4 style="margin: 1rem 0 0.5rem; color: var(--primary);">ðŸ“‹ Contact Information</h4>
            <div class="grid-2">
                <div class="form-group">
                    <label class="form-label">First Name *</label>
                    <input type="text" class="form-input" id="lead-firstname" placeholder="John">
                </div>
                <div class="form-group">
                    <label class="form-label">Last Name *</label>
                    <input type="text" class="form-input" id="lead-lastname" placeholder="Smith">
                </div>
            </div>
            <div class="grid-2">
                <div class="form-group">
                    <label class="form-label">Email</label>
                    <input type="email" class="form-input" id="lead-email" placeholder="john@email.com">
                </div>
                <div class="form-group">
                    <label class="form-label">Phone</label>
                    <input type="tel" class="form-input" id="lead-phone" placeholder="(513) 555-1234">
                </div>
            </div>
            <div class="form-group">
                <label class="form-label">Address</label>
                <input type="text" class="form-input" id="lead-address" placeholder="123 Main St, Cincinnati, OH 45202">
            </div>

            <!-- Lead Classification -->
            <h4 style="margin: 1.5rem 0 0.5rem; color: var(--primary);">ðŸ·ï¸ Lead Classification</h4>
            <div class="grid-3">
                <div class="form-group">
                    <label class="form-label">Lead Type</label>
                    <select class="form-input" id="lead-type">
                        <option value="buyer">ðŸ  Buyer</option>
                        <option value="seller">ðŸ’° Seller</option>
                        <option value="both">ðŸ”„ Buyer & Seller</option>
                        <option value="investor">ðŸ“ˆ Investor</option>
                        <option value="renter">ðŸ”‘ Renter</option>
                        <option value="fsbo">ðŸ¡ FSBO</option>
                        <option value="expired">â° Expired Listing</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Lead Source</label>
                    <select class="form-input" id="lead-source">
                        <option value="instagram">ðŸ“¸ Instagram</option>
                        <option value="facebook">ðŸ“˜ Facebook</option>
                        <option value="google">ðŸ” Google Ads</option>
                        <option value="website">ðŸŒ Website</option>
                        <option value="referral">ðŸ‘¥ Referral</option>
                        <option value="open-house">ðŸ  Open House</option>
                        <option value="zillow">Z Zillow</option>
                        <option value="realtor">R Realtor.com</option>
                        <option value="redfin">ðŸ”´ Redfin</option>
                        <option value="sign-call">ðŸ“ž Sign Call</option>
                        <option value="sphere">ðŸŒ Sphere of Influence</option>
                        <option value="cold-call">ðŸ“± Cold Call</option>
                        <option value="door-knock">ðŸšª Door Knock</option>
                        <option value="past-client">â­ Past Client</option>
                        <option value="other">ðŸ“ Other</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Pipeline Stage</label>
                    <select class="form-input" id="lead-stage">
                        <option value="new">ðŸ†• New Lead</option>
                        <option value="contacted">ðŸ“ž Contacted</option>
                        <option value="qualified">âœ… Qualified</option>
                        <option value="showing">ðŸ  Showing</option>
                        <option value="offer">ðŸ“ Offer</option>
                        <option value="under-contract">ðŸ“‹ Under Contract</option>
                        <option value="closed">ðŸŽ‰ Closed</option>
                    </select>
                </div>
            </div>
            <div class="grid-2">
                <div class="form-group">
                    <label class="form-label">Temperature</label>
                    <select class="form-input" id="lead-priority">
                        <option value="hot">ðŸ”¥ Hot - Ready Now</option>
                        <option value="warm">â˜€ï¸ Warm - 1-3 Months</option>
                        <option value="cold">â„ï¸ Cold - 6+ Months</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Timeline</label>
                    <select class="form-input" id="lead-timeline">
                        <option value="immediate">âš¡ Immediate (0-30 days)</option>
                        <option value="short">ðŸ“… Short (1-3 months)</option>
                        <option value="medium">ðŸ“† Medium (3-6 months)</option>
                        <option value="long">ðŸ—“ï¸ Long (6-12 months)</option>
                        <option value="exploring">ðŸ” Just Exploring</option>
                    </select>
                </div>
            </div>
        </div>

        <!-- Property Preferences & Additional Info -->
        <div class="card">
            <div class="card-header"><span class="card-title">ðŸ  Property & Financial Details</span></div>

            <!-- Buyer Fields -->
            <div id="buyer-fields">
                <h4 style="margin: 0 0 0.5rem; color: var(--primary);">ðŸ’° Budget & Financing</h4>
                <div class="grid-2">
                    <div class="form-group">
                        <label class="form-label">Min Price</label>
                        <input type="text" class="form-input" id="lead-min-price" placeholder="$250,000">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Max Price</label>
                        <input type="text" class="form-input" id="lead-max-price" placeholder="$450,000">
                    </div>
                </div>
                <div class="grid-2">
                    <div class="form-group">
                        <label class="form-label">Pre-Approved?</label>
                        <select class="form-input" id="lead-preapproved">
                            <option value="unknown">â“ Unknown</option>
                            <option value="yes">âœ… Yes - Pre-Approved</option>
                            <option value="no">âŒ Not Yet</option>
                            <option value="cash">ðŸ’µ Cash Buyer</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Lender</label>
                        <input type="text" class="form-input" id="lead-lender" placeholder="Lender name">
                    </div>
                </div>

                <h4 style="margin: 1.5rem 0 0.5rem; color: var(--primary);">ðŸ¡ Property Preferences</h4>
                <div class="grid-3">
                    <div class="form-group">
                        <label class="form-label">Bedrooms</label>
                        <select class="form-input" id="lead-beds">
                            <option value="">Any</option>
                            <option value="1+">1+</option>
                            <option value="2+">2+</option>
                            <option value="3+">3+</option>
                            <option value="4+">4+</option>
                            <option value="5+">5+</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Bathrooms</label>
                        <select class="form-input" id="lead-baths">
                            <option value="">Any</option>
                            <option value="1+">1+</option>
                            <option value="2+">2+</option>
                            <option value="3+">3+</option>
                            <option value="4+">4+</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Property Type</label>
                        <select class="form-input" id="lead-proptype">
                            <option value="">Any</option>
                            <option value="single-family">Single Family</option>
                            <option value="condo">Condo/Townhome</option>
                            <option value="multi-family">Multi-Family</option>
                            <option value="land">Land</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label class="form-label">Preferred Neighborhoods</label>
                    <input type="text" class="form-input" id="lead-areas" placeholder="Hyde Park, Oakley, Anderson Township">
                </div>
                <div class="form-group">
                    <label class="form-label">Must-Haves</label>
                    <input type="text" class="form-input" id="lead-musthaves" placeholder="Garage, yard, updated kitchen...">
                </div>
            </div>

            <!-- Communication Preferences -->
            <h4 style="margin: 1.5rem 0 0.5rem; color: var(--primary);">ðŸ“± Communication</h4>
            <div class="grid-2">
                <div class="form-group">
                    <label class="form-label">Preferred Contact Method</label>
                    <select class="form-input" id="lead-contact-pref">
                        <option value="any">ðŸ“ž Any</option>
                        <option value="call">ðŸ“± Phone Call</option>
                        <option value="text">ðŸ’¬ Text Message</option>
                        <option value="email">ðŸ“§ Email</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Best Time to Contact</label>
                    <select class="form-input" id="lead-best-time">
                        <option value="any">ðŸ• Anytime</option>
                        <option value="morning">ðŸŒ… Morning (8am-12pm)</option>
                        <option value="afternoon">â˜€ï¸ Afternoon (12pm-5pm)</option>
                        <option value="evening">ðŸŒ™ Evening (5pm-8pm)</option>
                    </select>
                </div>
            </div>

            <!-- Notes -->
            <div class="form-group" style="margin-top: 1rem;">
                <label class="form-label">Notes & Special Requirements</label>
                <textarea class="form-input" id="lead-notes" rows="3" placeholder="First-time buyer, needs to sell current home first, relocating from Chicago..."></textarea>
            </div>

            <!-- Action Buttons -->
            <div style="display: flex; gap: 1rem; margin-top: 1.5rem;">
                <button class="btn btn-primary" onclick="addLead()" style="flex: 1;">âž• Add Lead</button>
                <button class="btn" onclick="addLeadAndStartNurture()" style="flex: 1;">âž• Add & Start Nurture</button>
            </div>
        </div>
    </div>`;
}

// ==================== SMART LISTS TAB ====================
function renderSmartListsTab() {
    return `
    <div class="card">
        <div class="card-header">
            <span class="card-title">ðŸŽ¯ Smart Lists</span>
            <span class="badge badge-primary">Auto-Updating</span>
        </div>
        <p style="margin-bottom: 1rem; color: #666;">Smart Lists automatically categorize your leads based on behavior and status. Click any list to see matching leads.</p>

        <div class="grid-3" id="smart-lists-container">
            <!-- Hot Leads -->
            <div class="smart-list-card" onclick="viewSmartList('hot')" style="padding: 1.5rem; background: linear-gradient(135deg, #e74c3c, #c0392b); color: white; border-radius: 12px; cursor: pointer; transition: transform 0.2s;">
                <div style="font-size: 2rem; margin-bottom: 0.5rem;">ðŸ”¥</div>
                <h3 style="margin: 0;">Hot Leads</h3>
                <p style="opacity: 0.9; font-size: 0.9rem; margin: 0.5rem 0;">Ready to transact NOW</p>
                <div style="font-size: 2rem; font-weight: bold;" id="smart-hot-count">0</div>
            </div>

            <!-- Needs Follow-Up -->
            <div class="smart-list-card" onclick="viewSmartList('followup')" style="padding: 1.5rem; background: linear-gradient(135deg, #f39c12, #d68910); color: white; border-radius: 12px; cursor: pointer; transition: transform 0.2s;">
                <div style="font-size: 2rem; margin-bottom: 0.5rem;">ðŸ“ž</div>
                <h3 style="margin: 0;">Needs Follow-Up</h3>
                <p style="opacity: 0.9; font-size: 0.9rem; margin: 0.5rem 0;">No contact in 7+ days</p>
                <div style="font-size: 2rem; font-weight: bold;" id="smart-followup-count">0</div>
            </div>

            <!-- New This Week -->
            <div class="smart-list-card" onclick="viewSmartList('new-week')" style="padding: 1.5rem; background: linear-gradient(135deg, #3498db, #2980b9); color: white; border-radius: 12px; cursor: pointer; transition: transform 0.2s;">
                <div style="font-size: 2rem; margin-bottom: 0.5rem;">ðŸ†•</div>
                <h3 style="margin: 0;">New This Week</h3>
                <p style="opacity: 0.9; font-size: 0.9rem; margin: 0.5rem 0;">Added in last 7 days</p>
                <div style="font-size: 2rem; font-weight: bold;" id="smart-newweek-count">0</div>
            </div>

            <!-- Pre-Approved Buyers -->
            <div class="smart-list-card" onclick="viewSmartList('preapproved')" style="padding: 1.5rem; background: linear-gradient(135deg, #27ae60, #1e8449); color: white; border-radius: 12px; cursor: pointer; transition: transform 0.2s;">
                <div style="font-size: 2rem; margin-bottom: 0.5rem;">ðŸ’°</div>
                <h3 style="margin: 0;">Pre-Approved</h3>
                <p style="opacity: 0.9; font-size: 0.9rem; margin: 0.5rem 0;">Ready to make offers</p>
                <div style="font-size: 2rem; font-weight: bold;" id="smart-preapproved-count">0</div>
            </div>

            <!-- Seller Leads -->
            <div class="smart-list-card" onclick="viewSmartList('sellers')" style="padding: 1.5rem; background: linear-gradient(135deg, #9b59b6, #8e44ad); color: white; border-radius: 12px; cursor: pointer; transition: transform 0.2s;">
                <div style="font-size: 2rem; margin-bottom: 0.5rem;">ðŸ¡</div>
                <h3 style="margin: 0;">Sellers</h3>
                <p style="opacity: 0.9; font-size: 0.9rem; margin: 0.5rem 0;">Listing opportunities</p>
                <div style="font-size: 2rem; font-weight: bold;" id="smart-sellers-count">0</div>
            </div>

            <!-- In Nurture Campaign -->
            <div class="smart-list-card" onclick="viewSmartList('nurturing')" style="padding: 1.5rem; background: linear-gradient(135deg, #1abc9c, #16a085); color: white; border-radius: 12px; cursor: pointer; transition: transform 0.2s;">
                <div style="font-size: 2rem; margin-bottom: 0.5rem;">ðŸ¤–</div>
                <h3 style="margin: 0;">In Nurture</h3>
                <p style="opacity: 0.9; font-size: 0.9rem; margin: 0.5rem 0;">Active drip campaigns</p>
                <div style="font-size: 2rem; font-weight: bold;" id="smart-nurture-count">0</div>
            </div>

            <!-- Stale Leads -->
            <div class="smart-list-card" onclick="viewSmartList('stale')" style="padding: 1.5rem; background: linear-gradient(135deg, #95a5a6, #7f8c8d); color: white; border-radius: 12px; cursor: pointer; transition: transform 0.2s;">
                <div style="font-size: 2rem; margin-bottom: 0.5rem;">ðŸ˜´</div>
                <h3 style="margin: 0;">Stale Leads</h3>
                <p style="opacity: 0.9; font-size: 0.9rem; margin: 0.5rem 0;">No activity 30+ days</p>
                <div style="font-size: 2rem; font-weight: bold;" id="smart-stale-count">0</div>
            </div>

            <!-- High Score -->
            <div class="smart-list-card" onclick="viewSmartList('high-score')" style="padding: 1.5rem; background: linear-gradient(135deg, #e67e22, #d35400); color: white; border-radius: 12px; cursor: pointer; transition: transform 0.2s;">
                <div style="font-size: 2rem; margin-bottom: 0.5rem;">â­</div>
                <h3 style="margin: 0;">High Score</h3>
                <p style="opacity: 0.9; font-size: 0.9rem; margin: 0.5rem 0;">Lead score 80+</p>
                <div style="font-size: 2rem; font-weight: bold;" id="smart-highscore-count">0</div>
            </div>

            <!-- Birthdays This Month -->
            <div class="smart-list-card" onclick="viewSmartList('birthdays')" style="padding: 1.5rem; background: linear-gradient(135deg, #E4405F, #C13584); color: white; border-radius: 12px; cursor: pointer; transition: transform 0.2s;">
                <div style="font-size: 2rem; margin-bottom: 0.5rem;">ðŸŽ‚</div>
                <h3 style="margin: 0;">Birthdays</h3>
                <p style="opacity: 0.9; font-size: 0.9rem; margin: 0.5rem 0;">This month</p>
                <div style="font-size: 2rem; font-weight: bold;" id="smart-birthdays-count">0</div>
            </div>
        </div>
    </div>

    <!-- Smart List Results -->
    <div class="card" style="margin-top: 1.5rem;" id="smart-list-results" style="display: none;">
        <div class="card-header">
            <span class="card-title" id="smart-list-title">Select a Smart List</span>
        </div>
        <div id="smart-list-leads"></div>
    </div>`;
}

// ==================== NURTURE TAB ====================
function renderNurtureTab() {
    return `
    <div class="grid-2">
        <!-- Drip Campaigns -->
        <div class="card">
            <div class="card-header">
                <span class="card-title">ðŸ¤– Drip Campaigns</span>
                <span class="badge badge-success">Automated Follow-Up</span>
            </div>
            <p style="margin-bottom: 1rem; color: #666;">Select a campaign to assign to leads. Messages will be sent automatically based on the schedule.</p>

            <div id="drip-campaigns">
                <!-- New Buyer Nurture -->
                <div style="padding: 1rem; border: 2px solid var(--border); border-radius: 8px; margin-bottom: 1rem; cursor: pointer;" onclick="selectDripCampaign('new-buyer')">
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <div>
                            <h4 style="margin: 0;">ðŸ  New Buyer Nurture</h4>
                            <p style="font-size: 0.85rem; color: #666; margin: 0.25rem 0;">21-day sequence for new buyer leads</p>
                        </div>
                        <span class="badge">12 messages</span>
                    </div>
                    <div style="margin-top: 0.5rem; font-size: 0.8rem; color: #888;">
                        Day 1: Welcome â€¢ Day 3: Buyer Guide â€¢ Day 7: Market Update â€¢ Day 14: Check-in â€¢ Day 21: Re-engage
                    </div>
                </div>

                <!-- Seller Nurture -->
                <div style="padding: 1rem; border: 2px solid var(--border); border-radius: 8px; margin-bottom: 1rem; cursor: pointer;" onclick="selectDripCampaign('seller')">
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <div>
                            <h4 style="margin: 0;">ðŸ’° Seller Nurture</h4>
                            <p style="font-size: 0.85rem; color: #666; margin: 0.25rem 0;">30-day sequence for seller leads</p>
                        </div>
                        <span class="badge">15 messages</span>
                    </div>
                    <div style="margin-top: 0.5rem; font-size: 0.8rem; color: #888;">
                        Day 1: CMA Offer â€¢ Day 5: Market Stats â€¢ Day 10: Success Story â€¢ Day 20: Price Trends
                    </div>
                </div>

                <!-- Long-Term Nurture -->
                <div style="padding: 1rem; border: 2px solid var(--border); border-radius: 8px; margin-bottom: 1rem; cursor: pointer;" onclick="selectDripCampaign('long-term')">
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <div>
                            <h4 style="margin: 0;">ðŸ—“ï¸ Long-Term Nurture</h4>
                            <p style="font-size: 0.85rem; color: #666; margin: 0.25rem 0;">12-month sequence for cold leads</p>
                        </div>
                        <span class="badge">24 messages</span>
                    </div>
                    <div style="margin-top: 0.5rem; font-size: 0.8rem; color: #888;">
                        Monthly: Market Updates, Neighborhood Spotlights, Home Tips, Success Stories
                    </div>
                </div>

                <!-- Re-Engagement -->
                <div style="padding: 1rem; border: 2px solid var(--border); border-radius: 8px; margin-bottom: 1rem; cursor: pointer;" onclick="selectDripCampaign('re-engage')">
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <div>
                            <h4 style="margin: 0;">ðŸ”„ Re-Engagement</h4>
                            <p style="font-size: 0.85rem; color: #666; margin: 0.25rem 0;">Win back stale leads</p>
                        </div>
                        <span class="badge">5 messages</span>
                    </div>
                    <div style="margin-top: 0.5rem; font-size: 0.8rem; color: #888;">
                        Day 1: "Still Looking?" â€¢ Day 4: Market Change Alert â€¢ Day 7: New Listings â€¢ Day 14: Final Check
                    </div>
                </div>

                <!-- Past Client -->
                <div style="padding: 1rem; border: 2px solid var(--border); border-radius: 8px; margin-bottom: 1rem; cursor: pointer;" onclick="selectDripCampaign('past-client')">
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <div>
                            <h4 style="margin: 0;">â­ Past Client Nurture</h4>
                            <p style="font-size: 0.85rem; color: #666; margin: 0.25rem 0;">Stay top-of-mind for referrals</p>
                        </div>
                        <span class="badge">12 messages/year</span>
                    </div>
                    <div style="margin-top: 0.5rem; font-size: 0.8rem; color: #888;">
                        Anniversaries, Holidays, Market Updates, Referral Requests
                    </div>
                </div>
            </div>
        </div>

        <!-- Message Templates -->
        <div class="card">
            <div class="card-header">
                <span class="card-title">ðŸ’¬ Quick Message Templates</span>
            </div>

            <div style="margin-bottom: 1rem;">
                <select class="form-input" id="message-category" onchange="filterMessageTemplates()">
                    <option value="all">All Categories</option>
                    <option value="initial">Initial Contact</option>
                    <option value="followup">Follow-Up</option>
                    <option value="nurture">Nurture</option>
                    <option value="closing">Closing</option>
                    <option value="referral">Referral Request</option>
                </select>
            </div>

            <div id="message-templates" style="max-height: 500px; overflow-y: auto;">
                <!-- Initial Contact Templates -->
                <div class="template-item" data-category="initial" style="padding: 1rem; border-bottom: 1px solid var(--border);">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.5rem;">
                        <strong>New Lead - Text</strong>
                        <button class="btn btn-sm" onclick="copyTemplate('new-lead-text')">Copy</button>
                    </div>
                    <p style="font-size: 0.85rem; color: #666; margin: 0;" id="new-lead-text">Hi [NAME]! This is Ela with Sibcy Cline. Thanks for your interest in Cincinnati real estate! Are you looking to buy or sell? I'd love to help! ðŸ </p>
                </div>

                <div class="template-item" data-category="initial" style="padding: 1rem; border-bottom: 1px solid var(--border);">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.5rem;">
                        <strong>Zillow Lead Response</strong>
                        <button class="btn btn-sm" onclick="copyTemplate('zillow-response')">Copy</button>
                    </div>
                    <p style="font-size: 0.85rem; color: #666; margin: 0;" id="zillow-response">Hi [NAME]! I saw you were looking at [ADDRESS] on Zillow. Great choice! Would you like to schedule a showing? I'm available [DAYS]. Let me know what works for you! - Ela ðŸ¡</p>
                </div>

                <div class="template-item" data-category="followup" style="padding: 1rem; border-bottom: 1px solid var(--border);">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.5rem;">
                        <strong>Follow-Up #1 (Day 2)</strong>
                        <button class="btn btn-sm" onclick="copyTemplate('followup-1')">Copy</button>
                    </div>
                    <p style="font-size: 0.85rem; color: #666; margin: 0;" id="followup-1">Hi [NAME]! Just following up on my message from yesterday. I'd love to learn more about your home search. Do you have a few minutes for a quick call today? ðŸ“ž</p>
                </div>

                <div class="template-item" data-category="followup" style="padding: 1rem; border-bottom: 1px solid var(--border);">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.5rem;">
                        <strong>Follow-Up #2 (Day 5)</strong>
                        <button class="btn btn-sm" onclick="copyTemplate('followup-2')">Copy</button>
                    </div>
                    <p style="font-size: 0.85rem; color: #666; margin: 0;" id="followup-2">Hey [NAME]! I came across some new listings in [AREA] that match what you're looking for. Want me to send them over? Just let me know your email! ðŸ“§</p>
                </div>

                <div class="template-item" data-category="nurture" style="padding: 1rem; border-bottom: 1px solid var(--border);">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.5rem;">
                        <strong>Market Update</strong>
                        <button class="btn btn-sm" onclick="copyTemplate('market-update')">Copy</button>
                    </div>
                    <p style="font-size: 0.85rem; color: #666; margin: 0;" id="market-update">Hi [NAME]! Quick market update: Cincinnati homes are selling in just 21 days on average, and prices are up 8.7%! Great time to [buy/sell]. Want to chat about your options? ðŸ“ˆ</p>
                </div>

                <div class="template-item" data-category="closing" style="padding: 1rem; border-bottom: 1px solid var(--border);">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.5rem;">
                        <strong>After Showing</strong>
                        <button class="btn btn-sm" onclick="copyTemplate('after-showing')">Copy</button>
                    </div>
                    <p style="font-size: 0.85rem; color: #666; margin: 0;" id="after-showing">Hi [NAME]! Great seeing you today! What did you think of [ADDRESS]? That [FEATURE] was pretty amazing! Let me know if you want to see it again or make an offer! ðŸ âœ¨</p>
                </div>

                <div class="template-item" data-category="referral" style="padding: 1rem; border-bottom: 1px solid var(--border);">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.5rem;">
                        <strong>Referral Request</strong>
                        <button class="btn btn-sm" onclick="copyTemplate('referral-request')">Copy</button>
                    </div>
                    <p style="font-size: 0.85rem; color: #666; margin: 0;" id="referral-request">Hi [NAME]! Hope you're loving your home! ðŸ¡ Quick question - do you know anyone thinking about buying or selling? I'd love to help them the same way I helped you! A referral is the greatest compliment I can receive. â­</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Active Nurture Campaigns -->
    <div class="card" style="margin-top: 1.5rem;">
        <div class="card-header">
            <span class="card-title">ðŸ“Š Active Nurture Campaigns</span>
        </div>
        <div id="active-campaigns">
            <p style="color: #888; text-align: center; padding: 2rem;">No active nurture campaigns. Assign leads to a drip campaign above.</p>
        </div>
    </div>`;
}

// ==================== TASKS TAB ====================
function renderTasksTab() {
    return `
    <div class="grid-2">
        <!-- Add Task -->
        <div class="card">
            <div class="card-header"><span class="card-title">âž• Add Task</span></div>
            <div class="form-group">
                <label class="form-label">Task Description</label>
                <input type="text" class="form-input" id="task-description" placeholder="Call John Smith about showing">
            </div>
            <div class="grid-2">
                <div class="form-group">
                    <label class="form-label">Due Date</label>
                    <input type="date" class="form-input" id="task-date">
                </div>
                <div class="form-group">
                    <label class="form-label">Due Time</label>
                    <input type="time" class="form-input" id="task-time">
                </div>
            </div>
            <div class="grid-2">
                <div class="form-group">
                    <label class="form-label">Task Type</label>
                    <select class="form-input" id="task-type">
                        <option value="call">ðŸ“ž Phone Call</option>
                        <option value="text">ðŸ’¬ Send Text</option>
                        <option value="email">ðŸ“§ Send Email</option>
                        <option value="showing">ðŸ  Showing</option>
                        <option value="meeting">ðŸ¤ Meeting</option>
                        <option value="follow-up">ðŸ”„ Follow-Up</option>
                        <option value="other">ðŸ“ Other</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Related Lead</label>
                    <select class="form-input" id="task-lead">
                        <option value="">-- Select Lead --</option>
                    </select>
                </div>
            </div>
            <div class="form-group">
                <label class="form-label">Priority</label>
                <select class="form-input" id="task-priority">
                    <option value="high">ðŸ”´ High Priority</option>
                    <option value="medium">ðŸŸ¡ Medium Priority</option>
                    <option value="low">ðŸŸ¢ Low Priority</option>
                </select>
            </div>
            <button class="btn btn-primary" onclick="addTask()">âž• Add Task</button>
        </div>

        <!-- Today's Tasks -->
        <div class="card">
            <div class="card-header">
                <span class="card-title">ðŸ“… Today's Tasks</span>
                <span class="badge badge-primary" id="today-task-count">0</span>
            </div>
            <div id="today-tasks" style="max-height: 300px; overflow-y: auto;">
                <p style="color: #888; text-align: center; padding: 1rem;">No tasks scheduled for today</p>
            </div>
        </div>
    </div>

    <!-- Task Lists -->
    <div class="grid-3" style="margin-top: 1.5rem;">
        <!-- Overdue -->
        <div class="card" style="border-top: 4px solid #e74c3c;">
            <div class="card-header">
                <span class="card-title">âš ï¸ Overdue</span>
                <span class="badge" style="background: #e74c3c; color: white;" id="overdue-count">0</span>
            </div>
            <div id="overdue-tasks" style="max-height: 250px; overflow-y: auto;">
                <p style="color: #888; text-align: center; padding: 1rem;">No overdue tasks</p>
            </div>
        </div>

        <!-- This Week -->
        <div class="card" style="border-top: 4px solid #f39c12;">
            <div class="card-header">
                <span class="card-title">ðŸ“† This Week</span>
                <span class="badge" style="background: #f39c12; color: white;" id="week-count">0</span>
            </div>
            <div id="week-tasks" style="max-height: 250px; overflow-y: auto;">
                <p style="color: #888; text-align: center; padding: 1rem;">No tasks this week</p>
            </div>
        </div>

        <!-- Completed -->
        <div class="card" style="border-top: 4px solid #27ae60;">
            <div class="card-header">
                <span class="card-title">âœ… Completed</span>
                <span class="badge" style="background: #27ae60; color: white;" id="completed-count">0</span>
            </div>
            <div id="completed-tasks" style="max-height: 250px; overflow-y: auto;">
                <p style="color: #888; text-align: center; padding: 1rem;">No completed tasks</p>
            </div>
        </div>
    </div>`;
}

// ==================== MAGNETS TAB ====================
function renderMagnetsTab() {
    return `
    <div class="card">
        <div class="card-header">
            <span class="card-title">ðŸ§² Lead Magnets & Capture Strategies</span>
            <span class="badge badge-success">Proven Converters</span>
        </div>
        <p style="margin-bottom: 1.5rem; color: #666;">Lead magnets are free resources you offer in exchange for contact information. These are proven to generate high-quality leads.</p>

        <div class="grid-2">
            <!-- First-Time Buyer Guide -->
            <div style="padding: 1.5rem; background: linear-gradient(135deg, #e8f5e9, #c8e6c9); border-radius: 12px; margin-bottom: 1rem;">
                <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 1rem;">
                    <div style="font-size: 3rem;">ðŸ“˜</div>
                    <div>
                        <h3 style="margin: 0; color: #27ae60;">First-Time Buyer Guide</h3>
                        <p style="margin: 0; color: #666;">PDF guide covering the entire buying process</p>
                    </div>
                </div>
                <p style="font-size: 0.9rem; margin-bottom: 1rem;"><strong>Why it works:</strong> First-time buyers are often overwhelmed and looking for guidance. This positions you as a helpful expert.</p>
                <div style="display: flex; gap: 0.5rem; flex-wrap: wrap;">
                    <button class="btn btn-primary" onclick="copyText('ðŸ  FIRST-TIME BUYERS! Download my FREE step-by-step guide to buying your first home in Cincinnati!\\n\\nDM me \"GUIDE\" or click the link in bio!\\n\\nâœ… Understanding your budget\\nâœ… Getting pre-approved\\nâœ… Finding the right neighborhood\\nâœ… Making winning offers\\nâœ… Closing day checklist\\n\\n22 years of experience packed into one easy guide!\\n\\n#FirstTimeBuyer #CincinnatiRealEstate #HomeBuyingTips #CincyHomes')">Copy Instagram Post</button>
                    <button class="btn" onclick="copyText('ðŸ¡ Attention First-Time Home Buyers!\\n\\nBuying your first home can feel overwhelming, but it doesn\\'t have to be!\\n\\nI\\'ve put together a FREE comprehensive guide that walks you through every step of the home buying process:\\n\\nðŸ“‹ How to determine your budget\\nðŸ¦ Getting pre-approved (and why it matters)\\nðŸ” Finding the perfect neighborhood\\nâœï¸ Making an offer that wins\\nðŸ”‘ What to expect at closing\\n\\nWith 22 years of Cincinnati real estate experience, I\\'ve helped hundreds of first-time buyers find their dream homes.\\n\\nComment \"GUIDE\" below or send me a message to get your free copy!\\n\\n#FirstTimeHomeBuyer #CincinnatiRealEstate #HomeBuying')">Copy Facebook Post</button>
                </div>
            </div>

            <!-- Free Home Valuation -->
            <div style="padding: 1.5rem; background: linear-gradient(135deg, #e3f2fd, #bbdefb); border-radius: 12px; margin-bottom: 1rem;">
                <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 1rem;">
                    <div style="font-size: 3rem;">ðŸ’°</div>
                    <div>
                        <h3 style="margin: 0; color: #1976d2;">Free Home Valuation (CMA)</h3>
                        <p style="margin: 0; color: #666;">Custom market analysis for their property</p>
                    </div>
                </div>
                <p style="font-size: 0.9rem; margin-bottom: 1rem;"><strong>Why it works:</strong> Homeowners are always curious about their home's value. This starts a conversation about selling.</p>
                <div style="display: flex; gap: 0.5rem; flex-wrap: wrap;">
                    <button class="btn btn-primary" onclick="copyText('ðŸ’° CURIOUS WHAT YOUR HOME IS WORTH?\\n\\nI\\'ll send you a FREE Comparative Market Analysis showing exactly what homes like yours are selling for!\\n\\nðŸ“ˆ Cincinnati values UP 8.7% this year\\nâ° Average days on market: 21 days\\nðŸ  Low inventory = more buyer competition\\n\\nDM me your address or comment \"VALUE\"!\\n\\n#HomeValue #CincinnatiHomes #FreeHomeValuation #ThinkingOfSelling #CincyRealEstate')">Copy Instagram Post</button>
                    <button class="btn" onclick="copyText('ðŸ  Wondering What Your Home is Worth in Today\\'s Market?\\n\\nI\\'ll provide you with a FREE, no-obligation Comparative Market Analysis (CMA) that shows:\\n\\nâœ… What similar homes in your neighborhood have sold for\\nâœ… Current market trends affecting your home\\'s value\\nâœ… How your home compares to active listings\\nâœ… Estimated selling price range\\n\\nðŸ“ˆ Great news: Cincinnati home values are UP 8.7% year-over-year!\\n\\nEven if you\\'re not ready to sell, it\\'s smart to know your home\\'s equity.\\n\\nComment your address below or send me a message for your free valuation!\\n\\n#HomeValue #CincinnatiRealEstate #FreeHomeValuation')">Copy Facebook Post</button>
                </div>
            </div>

            <!-- Neighborhood Guide -->
            <div style="padding: 1.5rem; background: linear-gradient(135deg, #fff3e0, #ffe0b2); border-radius: 12px; margin-bottom: 1rem;">
                <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 1rem;">
                    <div style="font-size: 3rem;">ðŸ—ºï¸</div>
                    <div>
                        <h3 style="margin: 0; color: #e65100;">Neighborhood Guides</h3>
                        <p style="margin: 0; color: #666;">Area-specific guides with schools, amenities, prices</p>
                    </div>
                </div>
                <p style="font-size: 0.9rem; margin-bottom: 1rem;"><strong>Why it works:</strong> People relocating need local knowledge. This establishes you as the area expert.</p>
                <div style="display: flex; gap: 0.5rem; flex-wrap: wrap;">
                    <button class="btn btn-primary" onclick="copyText('ðŸ˜ï¸ MOVING TO CINCINNATI?\\n\\nDownload my FREE neighborhood guide!\\n\\nðŸ“ Hyde Park & Oakley\\nðŸ“ Anderson Township\\nðŸ“ Mason & West Chester\\nðŸ“ Downtown & OTR\\n\\nEach guide includes:\\nâœ… School ratings\\nâœ… Average home prices\\nâœ… Best restaurants & shops\\nâœ… Commute times\\nâœ… Hidden gems only locals know!\\n\\nComment your favorite neighborhood or DM \"GUIDE\"!\\n\\n#CincinnatiNeighborhoods #MovingToCincinnati #CincyLiving')">Copy Instagram Post</button>
                    <button class="btn" onclick="copyText('ðŸ˜ï¸ Thinking About Moving to Cincinnati?\\n\\nAs a 22-year Cincinnati real estate veteran, I\\'ve put together FREE comprehensive guides to our best neighborhoods!\\n\\nEach guide includes:\\nðŸ“š School ratings and districts\\nðŸ’° Average home prices and trends\\nðŸ½ï¸ Best restaurants, shops, and entertainment\\nðŸš— Commute times to major employers\\nðŸŒ³ Parks, recreation, and hidden gems\\nðŸ‘¥ Community vibe and demographics\\n\\nAvailable guides:\\nâ€¢ Hyde Park & Oakley\\nâ€¢ Anderson Township\\nâ€¢ Mason & West Chester\\nâ€¢ Downtown & Over-the-Rhine\\nâ€¢ And more!\\n\\nComment which neighborhood you\\'re interested in, and I\\'ll send your free guide!\\n\\n#CincinnatiNeighborhoods #MovingToCincinnati')">Copy Facebook Post</button>
                </div>
            </div>

            <!-- Home Seller Checklist -->
            <div style="padding: 1.5rem; background: linear-gradient(135deg, #fce4ec, #f8bbd9); border-radius: 12px; margin-bottom: 1rem;">
                <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 1rem;">
                    <div style="font-size: 3rem;">ðŸ“‹</div>
                    <div>
                        <h3 style="margin: 0; color: #c2185b;">Home Seller Checklist</h3>
                        <p style="margin: 0; color: #666;">Pre-listing preparation guide</p>
                    </div>
                </div>
                <p style="font-size: 0.9rem; margin-bottom: 1rem;"><strong>Why it works:</strong> Sellers want to maximize their sale price. This shows you're invested in their success.</p>
                <div style="display: flex; gap: 0.5rem; flex-wrap: wrap;">
                    <button class="btn btn-primary" onclick="copyText('ðŸ  THINKING OF SELLING?\\n\\nGrab my FREE \"Get Your Home Ready to Sell\" checklist!\\n\\nâœ¨ Room-by-room declutter guide\\nðŸ”§ Quick fixes that add $$$\\nðŸ“¸ Staging tips for photos\\nðŸ“… Timeline from listing to closing\\nðŸ’¡ My secret tips from 22 years\\n\\nThis checklist helped my last client get 5 offers in 3 days! ðŸŽ‰\\n\\nDM \"SELL\" for your free copy!\\n\\n#SellingYourHome #CincinnatiRealtor #HomeSelling')">Copy Instagram Post</button>
                    <button class="btn" onclick="copyText('ðŸ  Planning to Sell Your Home?\\n\\nGet my FREE comprehensive \"Get Your Home Ready to Sell\" checklist!\\n\\nThis guide includes:\\nâœ¨ Room-by-room declutter and deep cleaning guide\\nðŸ”§ Quick, affordable fixes that increase your sale price\\nðŸ“¸ Professional staging tips for stunning listing photos\\nðŸ“… Complete timeline from prep to closing\\nðŸ’¡ Insider tips from 22 years of selling Cincinnati homes\\n\\nðŸ“ˆ My sellers using this checklist average 3% MORE than asking price!\\n\\nComment \"SELL\" or message me for your free copy!\\n\\n#HomeSelling #CincinnatiRealEstate #SellerTips')">Copy Facebook Post</button>
                </div>
            </div>

            <!-- Market Report -->
            <div style="padding: 1.5rem; background: linear-gradient(135deg, #e8eaf6, #c5cae9); border-radius: 12px; margin-bottom: 1rem;">
                <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 1rem;">
                    <div style="font-size: 3rem;">ðŸ“Š</div>
                    <div>
                        <h3 style="margin: 0; color: #3f51b5;">Monthly Market Report</h3>
                        <p style="margin: 0; color: #666;">Local real estate statistics and trends</p>
                    </div>
                </div>
                <p style="font-size: 0.9rem; margin-bottom: 1rem;"><strong>Why it works:</strong> Positions you as a market expert and keeps leads engaged monthly.</p>
                <div style="display: flex; gap: 0.5rem; flex-wrap: wrap;">
                    <button class="btn btn-primary" onclick="copyText('ðŸ“Š JANUARY 2026 MARKET REPORT\\n\\nCincinnati Real Estate Update:\\n\\nðŸ“ˆ Median Price: $285,000 (+8.7%)\\nâ° Days on Market: 21 days\\nðŸ  Active Listings: 1,247\\nðŸ’° Price per Sq Ft: $165\\n\\nWhat this means for YOU:\\nðŸ¡ Buyers: Act fast, low inventory!\\nðŸ’° Sellers: Great time to list!\\n\\nWant the full report? DM \"REPORT\"!\\n\\n#CincinnatiRealEstate #MarketUpdate #CincyHomes')">Copy Instagram Post</button>
                    <button class="btn" onclick="copyText('ðŸ“Š Cincinnati Real Estate Market Report - January 2026\\n\\nHere\\'s what\\'s happening in our local market:\\n\\nðŸ“ˆ Median Sale Price: $285,000 (up 8.7% YoY)\\nâ° Average Days on Market: 21 days\\nðŸ  Active Listings: 1,247 homes\\nðŸ“‰ Months of Inventory: 1.8 months (seller\\'s market)\\nðŸ’° Price per Square Foot: $165\\n\\nWhat This Means:\\n\\nðŸ¡ For Buyers: Competition remains strong. Get pre-approved and be ready to act fast on the right home.\\n\\nðŸ’° For Sellers: Low inventory means your home will get maximum exposure. Now is an excellent time to list!\\n\\nWant the complete market report with neighborhood breakdowns? Comment \"REPORT\" or message me!\\n\\n#CincinnatiRealEstate #MarketReport #RealEstateNews')">Copy Facebook Post</button>
                </div>
            </div>

            <!-- Investor Guide -->
            <div style="padding: 1.5rem; background: linear-gradient(135deg, #e0f2f1, #b2dfdb); border-radius: 12px; margin-bottom: 1rem;">
                <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 1rem;">
                    <div style="font-size: 3rem;">ðŸ“ˆ</div>
                    <div>
                        <h3 style="margin: 0; color: #00796b;">Real Estate Investor Guide</h3>
                        <p style="margin: 0; color: #666;">Cincinnati investment property analysis</p>
                    </div>
                </div>
                <p style="font-size: 0.9rem; margin-bottom: 1rem;"><strong>Why it works:</strong> Investors are repeat buyers. This attracts high-value, long-term clients.</p>
                <div style="display: flex; gap: 0.5rem; flex-wrap: wrap;">
                    <button class="btn btn-primary" onclick="copyText('ðŸ“ˆ REAL ESTATE INVESTORS!\\n\\nWant to know the BEST Cincinnati neighborhoods for rental income?\\n\\nMy FREE investor guide includes:\\n\\nðŸ’° Top cash-flow neighborhoods\\nðŸ“Š Average rent vs purchase price\\nðŸ  Cap rate analysis by area\\nðŸ“ˆ Appreciation trends\\nðŸ”§ Investor-friendly contractors\\n\\nDM \"INVEST\" for your free copy!\\n\\n#RealEstateInvesting #CincinnatiInvestor #RentalProperty #PassiveIncome')">Copy Instagram Post</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Lead Capture Call-to-Actions -->
    <div class="card" style="margin-top: 1.5rem;">
        <div class="card-header">
            <span class="card-title">ðŸ“£ High-Converting Call-to-Actions</span>
        </div>
        <p style="margin-bottom: 1rem; color: #666;">Use these CTAs in your posts, stories, and bio to capture leads:</p>

        <div class="grid-3">
            <div style="padding: 1rem; background: var(--surface); border-radius: 8px;">
                <strong>DM Triggers</strong>
                <ul style="font-size: 0.9rem; margin: 0.5rem 0 0 1.5rem;">
                    <li>DM "GUIDE" for your free guide</li>
                    <li>DM "VALUE" for home valuation</li>
                    <li>DM "SELL" for seller checklist</li>
                    <li>DM "REPORT" for market report</li>
                    <li>DM "INVEST" for investor guide</li>
                </ul>
            </div>
            <div style="padding: 1rem; background: var(--surface); border-radius: 8px;">
                <strong>Comment Triggers</strong>
                <ul style="font-size: 0.9rem; margin: 0.5rem 0 0 1.5rem;">
                    <li>Comment ðŸ  for more info</li>
                    <li>Comment YES if you agree</li>
                    <li>Comment your favorite neighborhood</li>
                    <li>Drop a â¤ï¸ if this helped</li>
                    <li>Tag someone who needs this</li>
                </ul>
            </div>
            <div style="padding: 1rem; background: var(--surface); border-radius: 8px;">
                <strong>Bio/Link CTAs</strong>
                <ul style="font-size: 0.9rem; margin: 0.5rem 0 0 1.5rem;">
                    <li>ðŸ”— Link in bio for free guide</li>
                    <li>ðŸ“± Text HOME to [number]</li>
                    <li>ðŸŒ Visit [website] for listings</li>
                    <li>ðŸ“ž Call/text for showing</li>
                    <li>ðŸ“§ Email for more details</li>
                </ul>
            </div>
        </div>
    </div>`;
}

// ==================== SCRIPTS TAB ====================
function renderScriptsTab() {
    return `
    <div class="card">
        <div class="card-header">
            <span class="card-title">ðŸ“ Lead Conversion Scripts</span>
        </div>
        <p style="margin-bottom: 1rem; color: #666;">Proven scripts for every stage of lead conversion. Click to expand and copy.</p>

        <div id="scripts-accordion">
            <!-- Initial Contact Scripts -->
            <div style="border: 1px solid var(--border); border-radius: 8px; margin-bottom: 1rem;">
                <div style="padding: 1rem; background: var(--surface); cursor: pointer; font-weight: bold;" onclick="toggleScript('initial')">
                    ðŸ“ž Initial Contact Scripts <span style="float: right;">â–¼</span>
                </div>
                <div id="script-initial" style="padding: 1rem; display: none;">
                    <div style="margin-bottom: 1.5rem; padding: 1rem; background: #f8f9fa; border-radius: 8px;">
                        <h4 style="margin: 0 0 0.5rem;">Online Lead - First Call</h4>
                        <p style="font-size: 0.9rem; white-space: pre-line; margin-bottom: 0.5rem;">Hi [NAME], this is Ela Mildner-Shapiro with Sibcy Cline Realtors. I saw you were looking at homes in [AREA] online - that's such a great neighborhood!

I wanted to reach out personally to see how I can help. Are you actively looking to buy, or just getting started with your research?

[LISTEN]

That's great! Tell me more about what you're looking for... How many bedrooms? Any must-haves?

[LISTEN]

Perfect! I have 22 years of experience in Cincinnati real estate and know that area inside and out. I'd love to set up a time to show you some properties that match what you're looking for. What does your schedule look like this week?</p>
                        <button class="btn btn-sm" onclick="copyScriptText(this)">Copy Script</button>
                    </div>

                    <div style="margin-bottom: 1.5rem; padding: 1rem; background: #f8f9fa; border-radius: 8px;">
                        <h4 style="margin: 0 0 0.5rem;">Zillow/Realtor.com Lead</h4>
                        <p style="font-size: 0.9rem; white-space: pre-line; margin-bottom: 0.5rem;">Hi [NAME], this is Ela with Sibcy Cline! I saw you requested info about [ADDRESS] on [ZILLOW/REALTOR.COM].

Great choice - that's a beautiful property! Have you had a chance to drive by it yet?

[LISTEN]

I actually know that home well. [SHARE A DETAIL]. Would you like to schedule a private showing? I'm available [DAYS/TIMES].

[IF HESITANT] No pressure at all! Even if this one isn't perfect, I can set you up with alerts for similar homes in your price range. What's the best email to send those to?</p>
                        <button class="btn btn-sm" onclick="copyScriptText(this)">Copy Script</button>
                    </div>
                </div>
            </div>

            <!-- Buyer Qualification Scripts -->
            <div style="border: 1px solid var(--border); border-radius: 8px; margin-bottom: 1rem;">
                <div style="padding: 1rem; background: var(--surface); cursor: pointer; font-weight: bold;" onclick="toggleScript('buyer')">
                    ðŸ  Buyer Qualification Scripts <span style="float: right;">â–¼</span>
                </div>
                <div id="script-buyer" style="padding: 1rem; display: none;">
                    <div style="margin-bottom: 1.5rem; padding: 1rem; background: #f8f9fa; border-radius: 8px;">
                        <h4 style="margin: 0 0 0.5rem;">Buyer Consultation Questions</h4>
                        <p style="font-size: 0.9rem; white-space: pre-line; margin-bottom: 0.5rem;">1. "What's prompting your move right now?"
2. "If you found the perfect home tomorrow, would you be ready to move forward?"
3. "Have you been pre-approved for a mortgage yet?"
   - If no: "Let me connect you with my preferred lender - they can usually get you pre-approved within 24 hours!"
4. "What's your ideal timeline for moving?"
5. "Are you renting currently or do you have a home to sell?"
6. "What neighborhoods are you most interested in?"
7. "What are your absolute must-haves vs. nice-to-haves?"
8. "What's your comfortable price range?"
9. "Is anyone else involved in this decision?"
10. "What's the best way to reach you - call, text, or email?"</p>
                        <button class="btn btn-sm" onclick="copyScriptText(this)">Copy Script</button>
                    </div>

                    <div style="margin-bottom: 1.5rem; padding: 1rem; background: #f8f9fa; border-radius: 8px;">
                        <h4 style="margin: 0 0 0.5rem;">Pre-Approval Conversation</h4>
                        <p style="font-size: 0.9rem; white-space: pre-line; margin-bottom: 0.5rem;">[NAME], I'm excited to help you find your dream home! Before we start looking, I always recommend getting pre-approved first. Here's why:

1. You'll know exactly what you can afford, so we don't waste time on homes outside your budget
2. Sellers take pre-approved buyers more seriously - in this market, that's huge!
3. You can close faster when you find the right home

I work with an amazing lender, [LENDER NAME], who can usually get you pre-approved within 24-48 hours. They're great at explaining all your options without any pressure.

Would you like me to make an introduction? I can have them call you today!</p>
                        <button class="btn btn-sm" onclick="copyScriptText(this)">Copy Script</button>
                    </div>
                </div>
            </div>

            <!-- Seller Scripts -->
            <div style="border: 1px solid var(--border); border-radius: 8px; margin-bottom: 1rem;">
                <div style="padding: 1rem; background: var(--surface); cursor: pointer; font-weight: bold;" onclick="toggleScript('seller')">
                    ðŸ’° Seller Listing Scripts <span style="float: right;">â–¼</span>
                </div>
                <div id="script-seller" style="padding: 1rem; display: none;">
                    <div style="margin-bottom: 1.5rem; padding: 1rem; background: #f8f9fa; border-radius: 8px;">
                        <h4 style="margin: 0 0 0.5rem;">Home Valuation Follow-Up</h4>
                        <p style="font-size: 0.9rem; white-space: pre-line; margin-bottom: 0.5rem;">Hi [NAME], this is Ela with Sibcy Cline! You requested a home valuation for [ADDRESS], and I have great news!

Based on recent sales in your neighborhood, your home could be worth between [RANGE]. The market in [AREA] is really strong right now - homes are selling in about 21 days on average!

I'd love to stop by for a quick 15-minute visit to see your home in person and give you a more accurate estimate. I'll also share some simple tips that could help you get top dollar if you decide to sell.

When works best for you - would [DAY] morning or afternoon be better?</p>
                        <button class="btn btn-sm" onclick="copyScriptText(this)">Copy Script</button>
                    </div>

                    <div style="margin-bottom: 1.5rem; padding: 1rem; background: #f8f9fa; border-radius: 8px;">
                        <h4 style="margin: 0 0 0.5rem;">Listing Presentation Close</h4>
                        <p style="font-size: 0.9rem; white-space: pre-line; margin-bottom: 0.5rem;">Based on everything we've discussed, I'm confident I can sell your home for [PRICE] within [TIMEFRAME].

Here's what sets me apart:
- 22 years of Cincinnati experience
- Professional photography and virtual tours included
- Aggressive social media marketing to 10,000+ followers
- Open houses and broker tours
- Weekly updates and transparent communication

My commission is [X]%, which includes all marketing costs.

I know you're interviewing other agents, and I respect that. But I'm confident that my experience and marketing plan will get you the best results.

Do you have any questions before we move forward?

[HANDLE OBJECTIONS]

Great! Let's get the paperwork signed and your home on the market!</p>
                        <button class="btn btn-sm" onclick="copyScriptText(this)">Copy Script</button>
                    </div>
                </div>
            </div>

            <!-- Objection Handling -->
            <div style="border: 1px solid var(--border); border-radius: 8px; margin-bottom: 1rem;">
                <div style="padding: 1rem; background: var(--surface); cursor: pointer; font-weight: bold;" onclick="toggleScript('objections')">
                    ðŸ›¡ï¸ Objection Handling Scripts <span style="float: right;">â–¼</span>
                </div>
                <div id="script-objections" style="padding: 1rem; display: none;">
                    <div style="margin-bottom: 1.5rem; padding: 1rem; background: #fff3e0; border-radius: 8px;">
                        <h4 style="margin: 0 0 0.5rem;">"I'm just looking / not ready yet"</h4>
                        <p style="font-size: 0.9rem; white-space: pre-line; margin-bottom: 0.5rem;">I completely understand! Most of my best clients started out 'just looking' too.

Here's what I can do for you with no pressure: I'll set you up with automatic alerts for homes that match your criteria. That way, you can browse on your own time and get a feel for the market. When you're ready to see something in person, just let me know!

What neighborhoods are you most interested in?</p>
                        <button class="btn btn-sm" onclick="copyScriptText(this)">Copy Script</button>
                    </div>

                    <div style="margin-bottom: 1.5rem; padding: 1rem; background: #fff3e0; border-radius: 8px;">
                        <h4 style="margin: 0 0 0.5rem;">"I want to wait for prices to drop"</h4>
                        <p style="font-size: 0.9rem; white-space: pre-line; margin-bottom: 0.5rem;">That's a common thought, and I understand the hesitation. But let me share some data:

In the past 20 years, Cincinnati home prices have dropped only twice - during the 2008 crash and briefly in 2020. Otherwise, they've consistently gone up about 5-8% per year.

Right now, we're seeing strong demand and low inventory, which typically means continued price growth. Even if rates drop, that usually brings more buyers into the market, which can push prices up further.

The best time to buy is when you find a home you love at a payment you're comfortable with. Would you like me to run some numbers on what your payment might look like?</p>
                        <button class="btn btn-sm" onclick="copyScriptText(this)">Copy Script</button>
                    </div>

                    <div style="margin-bottom: 1.5rem; padding: 1rem; background: #fff3e0; border-radius: 8px;">
                        <h4 style="margin: 0 0 0.5rem;">"Your commission is too high"</h4>
                        <p style="font-size: 0.9rem; white-space: pre-line; margin-bottom: 0.5rem;">I appreciate you being direct! Let me explain the value you're getting:

My marketing package alone costs me over $[X] per listing - professional photography, video tours, social media advertising, premium listing placement, and print marketing.

More importantly, my average sale price is [X]% higher than the neighborhood average, and my homes sell [X] days faster. That typically more than covers my commission.

I've been doing this for 22 years because I get results. Would you rather save 1% on commission or make an extra $15,000 on your sale price?</p>
                        <button class="btn btn-sm" onclick="copyScriptText(this)">Copy Script</button>
                    </div>

                    <div style="margin-bottom: 1.5rem; padding: 1rem; background: #fff3e0; border-radius: 8px;">
                        <h4 style="margin: 0 0 0.5rem;">"I have a friend/family member who's an agent"</h4>
                        <p style="font-size: 0.9rem; white-space: pre-line; margin-bottom: 0.5rem;">I totally get that! Family and friends are important, and I'd never ask you to choose me over them.

But let me ask you this: Do they specialize in [AREA/TYPE]? Have they sold [X] homes there in the past year?

Sometimes mixing business with personal relationships can get complicated. If things don't go perfectly, it can strain the relationship.

How about this: Get their opinion, and get mine. Compare the marketing plans and track records. Then make the decision that's best for YOU. Fair enough?</p>
                        <button class="btn btn-sm" onclick="copyScriptText(this)">Copy Script</button>
                    </div>
                </div>
            </div>

            <!-- Follow-Up Scripts -->
            <div style="border: 1px solid var(--border); border-radius: 8px; margin-bottom: 1rem;">
                <div style="padding: 1rem; background: var(--surface); cursor: pointer; font-weight: bold;" onclick="toggleScript('followup')">
                    ðŸ”„ Follow-Up Scripts <span style="float: right;">â–¼</span>
                </div>
                <div id="script-followup" style="padding: 1rem; display: none;">
                    <div style="margin-bottom: 1.5rem; padding: 1rem; background: #f8f9fa; border-radius: 8px;">
                        <h4 style="margin: 0 0 0.5rem;">Post-Showing Follow-Up</h4>
                        <p style="font-size: 0.9rem; white-space: pre-line; margin-bottom: 0.5rem;">Hi [NAME]! I wanted to follow up on the homes we saw yesterday.

What did you think? Was there one that stood out to you?

[LISTEN]

[IF POSITIVE] That's great! [ADDRESS] was my favorite for you too - especially the [FEATURE]. Should we write an offer?

[IF NEGATIVE] I hear you. Let's refine our search. What would you change about what we saw? More space? Different neighborhood? Let me know and I'll find better matches.</p>
                        <button class="btn btn-sm" onclick="copyScriptText(this)">Copy Script</button>
                    </div>

                    <div style="margin-bottom: 1.5rem; padding: 1rem; background: #f8f9fa; border-radius: 8px;">
                        <h4 style="margin: 0 0 0.5rem;">30-Day Check-In (Cold Lead)</h4>
                        <p style="font-size: 0.9rem; white-space: pre-line; margin-bottom: 0.5rem;">Hi [NAME], it's Ela with Sibcy Cline! We chatted about a month ago about your home search.

I wanted to reach out because the market has changed quite a bit - [MENTION SPECIFIC CHANGE: new listings in their area, price drops, rate changes].

Are you still looking? I'd love to help if the timing is better now!

[IF YES] Great! Let's set up a time to look at some homes.

[IF NO] No worries! I'll keep you on my list and reach out if something perfect comes up. Feel free to call me anytime!</p>
                        <button class="btn btn-sm" onclick="copyScriptText(this)">Copy Script</button>
                    </div>
                </div>
            </div>
        </div>
    </div>`;
}

// ==================== ANALYTICS TAB ====================
function renderAnalyticsTab() {
    return `
    <div class="grid-2">
        <!-- Lead Source Performance -->
        <div class="card">
            <div class="card-header">
                <span class="card-title">ðŸ“Š Lead Source Performance</span>
            </div>
            <div id="lead-source-chart">
                <p style="color: #888; text-align: center; padding: 2rem;">Add leads to see source performance</p>
            </div>
        </div>

        <!-- Conversion Funnel -->
        <div class="card">
            <div class="card-header">
                <span class="card-title">ðŸ“ˆ Conversion Funnel</span>
            </div>
            <div id="conversion-funnel">
                <div style="margin-bottom: 1rem;">
                    <div style="display: flex; justify-content: space-between; margin-bottom: 0.25rem;">
                        <span>New Leads</span>
                        <span id="funnel-new">0</span>
                    </div>
                    <div style="height: 30px; background: #3498db; border-radius: 4px; width: 100%;"></div>
                </div>
                <div style="margin-bottom: 1rem;">
                    <div style="display: flex; justify-content: space-between; margin-bottom: 0.25rem;">
                        <span>Contacted</span>
                        <span id="funnel-contacted">0</span>
                    </div>
                    <div style="height: 30px; background: #9b59b6; border-radius: 4px; width: 80%;" id="funnel-contacted-bar"></div>
                </div>
                <div style="margin-bottom: 1rem;">
                    <div style="display: flex; justify-content: space-between; margin-bottom: 0.25rem;">
                        <span>Qualified</span>
                        <span id="funnel-qualified">0</span>
                    </div>
                    <div style="height: 30px; background: #f39c12; border-radius: 4px; width: 60%;" id="funnel-qualified-bar"></div>
                </div>
                <div style="margin-bottom: 1rem;">
                    <div style="display: flex; justify-content: space-between; margin-bottom: 0.25rem;">
                        <span>Showing/Active</span>
                        <span id="funnel-showing">0</span>
                    </div>
                    <div style="height: 30px; background: #e67e22; border-radius: 4px; width: 40%;" id="funnel-showing-bar"></div>
                </div>
                <div style="margin-bottom: 1rem;">
                    <div style="display: flex; justify-content: space-between; margin-bottom: 0.25rem;">
                        <span>Under Contract</span>
                        <span id="funnel-contract">0</span>
                    </div>
                    <div style="height: 30px; background: #1abc9c; border-radius: 4px; width: 25%;" id="funnel-contract-bar"></div>
                </div>
                <div>
                    <div style="display: flex; justify-content: space-between; margin-bottom: 0.25rem;">
                        <span>Closed</span>
                        <span id="funnel-closed">0</span>
                    </div>
                    <div style="height: 30px; background: #27ae60; border-radius: 4px; width: 15%;" id="funnel-closed-bar"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Performance Metrics -->
    <div class="grid-4" style="margin-top: 1.5rem;">
        <div class="stat-card">
            <div class="stat-number" id="metric-response-time">--</div>
            <div class="stat-label">Avg Response Time</div>
        </div>
        <div class="stat-card">
            <div class="stat-number" id="metric-conversion-rate">--</div>
            <div class="stat-label">Conversion Rate</div>
        </div>
        <div class="stat-card">
            <div class="stat-number" id="metric-cost-per-lead">--</div>
            <div class="stat-label">Est. Cost/Lead</div>
        </div>
        <div class="stat-card">
            <div class="stat-number" id="metric-lifetime-value">--</div>
            <div class="stat-label">Avg Commission</div>
        </div>
    </div>

    <!-- Lead Activity Timeline -->
    <div class="card" style="margin-top: 1.5rem;">
        <div class="card-header">
            <span class="card-title">ðŸ“… Recent Lead Activity</span>
        </div>
        <div id="lead-activity-timeline" style="max-height: 300px; overflow-y: auto;">
            <p style="color: #888; text-align: center; padding: 2rem;">No recent activity</p>
        </div>
    </div>

    <!-- Lead Score Distribution -->
    <div class="card" style="margin-top: 1.5rem;">
        <div class="card-header">
            <span class="card-title">â­ Lead Score Distribution</span>
        </div>
        <p style="margin-bottom: 1rem; color: #666;">Lead scores are calculated based on engagement, timeline, pre-approval status, and activity.</p>
        <div id="score-distribution" class="grid-5">
            <div style="text-align: center; padding: 1rem; background: #27ae60; color: white; border-radius: 8px;">
                <div style="font-size: 1.5rem; font-weight: bold;" id="score-90-100">0</div>
                <div style="font-size: 0.8rem;">90-100</div>
                <div style="font-size: 0.7rem;">ðŸ”¥ Ready</div>
            </div>
            <div style="text-align: center; padding: 1rem; background: #f39c12; color: white; border-radius: 8px;">
                <div style="font-size: 1.5rem; font-weight: bold;" id="score-70-89">0</div>
                <div style="font-size: 0.8rem;">70-89</div>
                <div style="font-size: 0.7rem;">â˜€ï¸ Hot</div>
            </div>
            <div style="text-align: center; padding: 1rem; background: #3498db; color: white; border-radius: 8px;">
                <div style="font-size: 1.5rem; font-weight: bold;" id="score-50-69">0</div>
                <div style="font-size: 0.8rem;">50-69</div>
                <div style="font-size: 0.7rem;">ðŸŒ¤ï¸ Warm</div>
            </div>
            <div style="text-align: center; padding: 1rem; background: #9b59b6; color: white; border-radius: 8px;">
                <div style="font-size: 1.5rem; font-weight: bold;" id="score-30-49">0</div>
                <div style="font-size: 0.8rem;">30-49</div>
                <div style="font-size: 0.7rem;">â„ï¸ Cool</div>
            </div>
            <div style="text-align: center; padding: 1rem; background: #95a5a6; color: white; border-radius: 8px;">
                <div style="font-size: 1.5rem; font-weight: bold;" id="score-0-29">0</div>
                <div style="font-size: 0.8rem;">0-29</div>
                <div style="font-size: 0.7rem;">ðŸ¥¶ Cold</div>
            </div>
        </div>
    </div>`;
}

// Lead Management Functions
let leads = JSON.parse(localStorage.getItem('elaLeads')) || [];
let leadTasks = JSON.parse(localStorage.getItem('elaLeadTasks')) || [];

function addLead() {
    const firstname = document.getElementById('lead-firstname')?.value.trim() || '';
    const lastname = document.getElementById('lead-lastname')?.value.trim() || '';
    const name = firstname && lastname ? `${firstname} ${lastname}` : firstname || lastname;

    if (!name) { showToast('Please enter a name', 'error'); return; }

    const lead = {
        id: Date.now(),
        name: name,
        firstname: firstname,
        lastname: lastname,
        email: document.getElementById('lead-email')?.value.trim() || '',
        phone: document.getElementById('lead-phone')?.value.trim() || '',
        address: document.getElementById('lead-address')?.value.trim() || '',
        type: document.getElementById('lead-type')?.value || 'buyer',
        source: document.getElementById('lead-source')?.value || 'website',
        stage: document.getElementById('lead-stage')?.value || 'new',
        priority: document.getElementById('lead-priority')?.value || 'warm',
        timeline: document.getElementById('lead-timeline')?.value || 'medium',
        minPrice: document.getElementById('lead-min-price')?.value.trim() || '',
        maxPrice: document.getElementById('lead-max-price')?.value.trim() || '',
        preapproved: document.getElementById('lead-preapproved')?.value || 'unknown',
        lender: document.getElementById('lead-lender')?.value.trim() || '',
        beds: document.getElementById('lead-beds')?.value || '',
        baths: document.getElementById('lead-baths')?.value || '',
        propType: document.getElementById('lead-proptype')?.value || '',
        areas: document.getElementById('lead-areas')?.value.trim() || '',
        mustHaves: document.getElementById('lead-musthaves')?.value.trim() || '',
        contactPref: document.getElementById('lead-contact-pref')?.value || 'any',
        bestTime: document.getElementById('lead-best-time')?.value || 'any',
        notes: document.getElementById('lead-notes')?.value.trim() || '',
        dateAdded: new Date().toISOString(),
        lastContact: new Date().toISOString(),
        status: 'active',
        score: calculateLeadScore({ priority: document.getElementById('lead-priority')?.value || 'warm', preapproved: document.getElementById('lead-preapproved')?.value || 'unknown', timeline: document.getElementById('lead-timeline')?.value || 'medium' }),
        nurtureCampaign: null,
        activityLog: [{ date: new Date().toISOString(), action: 'Lead created' }]
    };

    leads.unshift(lead);
    localStorage.setItem('elaLeads', JSON.stringify(leads));

    // Clear form fields
    const fields = ['lead-firstname', 'lead-lastname', 'lead-email', 'lead-phone', 'lead-address', 'lead-min-price', 'lead-max-price', 'lead-lender', 'lead-areas', 'lead-musthaves', 'lead-notes'];
    fields.forEach(id => { const el = document.getElementById(id); if (el) el.value = ''; });

    showToast('Lead added successfully!');
    updateLeadStats();
    switchLeadTab('pipeline');
    renderLeadsPipeline();
}

function addLeadAndStartNurture() {
    addLead();
    showToast('Lead added! Select a nurture campaign in the Auto-Nurture tab.');
}

function calculateLeadScore(lead) {
    let score = 50;
    if (lead.priority === 'hot') score += 30;
    else if (lead.priority === 'warm') score += 15;
    if (lead.preapproved === 'yes' || lead.preapproved === 'cash') score += 20;
    if (lead.timeline === 'immediate') score += 15;
    else if (lead.timeline === 'short') score += 10;
    return Math.min(score, 100);
}

function updateLeadStats() {
    const active = leads.filter(l => l.status === 'active');
    const hot = active.filter(l => l.priority === 'hot').length;
    const warm = active.filter(l => l.priority === 'warm').length;
    const cold = active.filter(l => l.priority === 'cold').length;
    const nurturing = active.filter(l => l.nurtureCampaign).length;
    const tasksDue = leadTasks.filter(t => !t.completed && new Date(t.dueDate) <= new Date()).length;
    const total = active.length;

    const updateEl = (id, val) => { const el = document.getElementById(id); if (el) el.textContent = val; };
    updateEl('hot-leads-count', hot);
    updateEl('warm-leads-count', warm);
    updateEl('cold-leads-count', cold);
    updateEl('nurturing-count', nurturing);
    updateEl('tasks-due-count', tasksDue);
    updateEl('total-leads-count', total);
}

function renderLeadsPipeline() {
    const stages = ['new', 'contacted', 'qualified', 'showing', 'offer', 'under-contract', 'closed'];
    const active = leads.filter(l => l.status === 'active');

    stages.forEach(stage => {
        const container = document.getElementById(`stage-${stage}`);
        const countEl = document.getElementById(`stage-${stage}-count`);
        if (!container) return;

        const stageLeads = active.filter(l => l.stage === stage);
        if (countEl) countEl.textContent = stageLeads.length;

        if (stageLeads.length === 0) {
            container.innerHTML = '<p style="color: #888; text-align: center; font-size: 0.85rem; padding: 1rem;">No leads</p>';
            return;
        }

        container.innerHTML = stageLeads.map(lead => {
            const priorityIcon = lead.priority === 'hot' ? 'ðŸ”¥' : lead.priority === 'warm' ? 'â˜€ï¸' : 'â„ï¸';
            const typeIcon = lead.type === 'buyer' ? 'ðŸ ' : lead.type === 'seller' ? 'ðŸ’°' : lead.type === 'investor' ? 'ðŸ“ˆ' : 'ðŸ”„';
            return `
            <div class="pipeline-card" style="padding: 0.75rem; background: white; border-radius: 6px; margin-bottom: 0.5rem; box-shadow: 0 1px 3px rgba(0,0,0,0.1); cursor: pointer;" onclick="openLeadDetail(${lead.id})">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.25rem;">
                    <strong style="font-size: 0.9rem;">${lead.name}</strong>
                    <span>${priorityIcon}</span>
                </div>
                <div style="font-size: 0.8rem; color: #666;">${typeIcon} ${lead.type} â€¢ ${lead.source}</div>
                ${lead.maxPrice ? `<div style="font-size: 0.8rem; color: #888;">ðŸ’° ${lead.maxPrice}</div>` : ''}
                <div style="display: flex; gap: 0.25rem; margin-top: 0.5rem;">
                    <button class="btn btn-sm" onclick="event.stopPropagation(); moveLeadStage(${lead.id}, 'prev')" style="padding: 0.2rem 0.4rem; font-size: 0.7rem;">â—€</button>
                    <button class="btn btn-sm" onclick="event.stopPropagation(); moveLeadStage(${lead.id}, 'next')" style="padding: 0.2rem 0.4rem; font-size: 0.7rem;">â–¶</button>
                    <button class="btn btn-sm" onclick="event.stopPropagation(); quickLogContact(${lead.id})" style="padding: 0.2rem 0.4rem; font-size: 0.7rem;">ðŸ“ž</button>
                </div>
            </div>`;
        }).join('');
    });
}

function filterLeadsPipeline() {
    renderLeadsPipeline();
}

function moveLeadStage(id, direction) {
    const stages = ['new', 'contacted', 'qualified', 'showing', 'offer', 'under-contract', 'closed'];
    const lead = leads.find(l => l.id === id);
    if (!lead) return;

    const currentIndex = stages.indexOf(lead.stage);
    if (direction === 'next' && currentIndex < stages.length - 1) {
        lead.stage = stages[currentIndex + 1];
    } else if (direction === 'prev' && currentIndex > 0) {
        lead.stage = stages[currentIndex - 1];
    }

    lead.activityLog = lead.activityLog || [];
    lead.activityLog.push({ date: new Date().toISOString(), action: `Stage changed to ${lead.stage}` });
    lead.lastContact = new Date().toISOString();

    localStorage.setItem('elaLeads', JSON.stringify(leads));
    showToast(`Lead moved to ${lead.stage}`);
    renderLeadsPipeline();
}

function quickLogContact(id) {
    const lead = leads.find(l => l.id === id);
    if (!lead) return;

    lead.lastContact = new Date().toISOString();
    lead.activityLog = lead.activityLog || [];
    lead.activityLog.push({ date: new Date().toISOString(), action: 'Contact logged' });

    localStorage.setItem('elaLeads', JSON.stringify(leads));
    showToast('Contact logged!');
}

function openLeadDetail(id) {
    const lead = leads.find(l => l.id === id);
    if (!lead) return;

    const modal = document.createElement('div');
    modal.style.cssText = 'position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.5); display: flex; align-items: center; justify-content: center; z-index: 10000;';
    modal.onclick = (e) => { if (e.target === modal) modal.remove(); };

    const priorityIcon = lead.priority === 'hot' ? 'ðŸ”¥' : lead.priority === 'warm' ? 'â˜€ï¸' : 'â„ï¸';

    modal.innerHTML = `
    <div style="background: white; padding: 2rem; border-radius: 12px; max-width: 600px; width: 90%; max-height: 80vh; overflow-y: auto;">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
            <h2 style="margin: 0;">${priorityIcon} ${lead.name}</h2>
            <button onclick="this.closest('div').parentElement.remove()" style="background: none; border: none; font-size: 1.5rem; cursor: pointer;">âœ•</button>
        </div>
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
            <div><strong>Type:</strong> ${lead.type}</div>
            <div><strong>Source:</strong> ${lead.source}</div>
            <div><strong>Stage:</strong> ${lead.stage}</div>
            <div><strong>Priority:</strong> ${lead.priority}</div>
            <div><strong>Email:</strong> ${lead.email || 'N/A'}</div>
            <div><strong>Phone:</strong> ${lead.phone || 'N/A'}</div>
            <div><strong>Budget:</strong> ${lead.minPrice || '?'} - ${lead.maxPrice || '?'}</div>
            <div><strong>Pre-Approved:</strong> ${lead.preapproved || 'Unknown'}</div>
            <div><strong>Areas:</strong> ${lead.areas || 'N/A'}</div>
            <div><strong>Timeline:</strong> ${lead.timeline || 'N/A'}</div>
        </div>
        ${lead.notes ? `<div style="margin-top: 1rem;"><strong>Notes:</strong><br>${lead.notes}</div>` : ''}
        <div style="margin-top: 1rem;"><strong>Added:</strong> ${new Date(lead.dateAdded).toLocaleDateString()}</div>
        <div><strong>Last Contact:</strong> ${new Date(lead.lastContact).toLocaleDateString()}</div>
        <div style="margin-top: 1.5rem; display: flex; gap: 0.5rem; flex-wrap: wrap;">
            <button class="btn btn-primary" onclick="quickLogContact(${lead.id}); this.closest('div').parentElement.parentElement.remove();">ðŸ“ž Log Contact</button>
            <button class="btn" onclick="editLeadNotes(${lead.id}); this.closest('div').parentElement.parentElement.remove();">âœï¸ Edit Notes</button>
            <button class="btn" onclick="changePriority(${lead.id}); this.closest('div').parentElement.parentElement.remove();">ðŸ”„ Change Priority</button>
            <button class="btn" onclick="archiveLead(${lead.id}); this.closest('div').parentElement.parentElement.remove();" style="color: #e74c3c;">ðŸ—‘ï¸ Archive</button>
        </div>
    </div>`;
    document.body.appendChild(modal);
}

function editLeadNotes(id) {
    const lead = leads.find(l => l.id === id);
    if (!lead) return;
    const newNotes = prompt('Update notes for ' + lead.name + ':', lead.notes || '');
    if (newNotes !== null) {
        lead.notes = newNotes;
        lead.lastContact = new Date().toISOString();
        localStorage.setItem('elaLeads', JSON.stringify(leads));
        showToast('Notes updated!');
        renderLeadsPipeline();
    }
}

function changePriority(id) {
    const lead = leads.find(l => l.id === id);
    if (!lead) return;
    const priorities = ['hot', 'warm', 'cold'];
    const currentIndex = priorities.indexOf(lead.priority);
    lead.priority = priorities[(currentIndex + 1) % 3];
    lead.score = calculateLeadScore(lead);
    localStorage.setItem('elaLeads', JSON.stringify(leads));
    showToast('Priority updated to ' + lead.priority);
    updateLeadStats();
    renderLeadsPipeline();
}

function archiveLead(id) {
    if (!confirm('Archive this lead?')) return;
    const lead = leads.find(l => l.id === id);
    if (lead) lead.status = 'archived';
    localStorage.setItem('elaLeads', JSON.stringify(leads));
    showToast('Lead archived');
    updateLeadStats();
    renderLeadsPipeline();
}

function exportLeads() {
    const active = leads.filter(l => l.status === 'active');
    if (active.length === 0) { showToast('No leads to export', 'error'); return; }

    const headers = ['Name', 'Email', 'Phone', 'Type', 'Source', 'Stage', 'Priority', 'Budget Min', 'Budget Max', 'Areas', 'Pre-Approved', 'Timeline', 'Notes', 'Date Added'];
    const rows = active.map(l => [l.name, l.email, l.phone, l.type, l.source, l.stage, l.priority, l.minPrice, l.maxPrice, l.areas, l.preapproved, l.timeline, l.notes, new Date(l.dateAdded).toLocaleDateString()]);
    const csv = [headers.join(','), ...rows.map(r => r.map(c => '"' + (c || '').replace(/"/g, '""') + '"').join(','))].join('\n');
    const blob = new Blob([csv], { type: 'text/csv' });
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = 'ela_leads_' + new Date().toISOString().split('T')[0] + '.csv';
    a.click();
    showToast('Leads exported!');
}

// Helper functions for other tabs
function viewSmartList(listType) { showToast('Smart list: ' + listType); renderSmartLists(); }
function renderSmartLists() {
    const active = leads.filter(l => l.status === 'active');
    const now = new Date();
    const weekAgo = new Date(now - 7 * 24 * 60 * 60 * 1000);
    const monthAgo = new Date(now - 30 * 24 * 60 * 60 * 1000);

    const updateCount = (id, count) => { const el = document.getElementById(id); if (el) el.textContent = count; };
    updateCount('smart-hot-count', active.filter(l => l.priority === 'hot').length);
    updateCount('smart-followup-count', active.filter(l => new Date(l.lastContact) < weekAgo).length);
    updateCount('smart-newweek-count', active.filter(l => new Date(l.dateAdded) > weekAgo).length);
    updateCount('smart-preapproved-count', active.filter(l => l.preapproved === 'yes' || l.preapproved === 'cash').length);
    updateCount('smart-sellers-count', active.filter(l => l.type === 'seller' || l.type === 'both').length);
    updateCount('smart-nurture-count', active.filter(l => l.nurtureCampaign).length);
    updateCount('smart-stale-count', active.filter(l => new Date(l.lastContact) < monthAgo).length);
    updateCount('smart-highscore-count', active.filter(l => (l.score || 0) >= 80).length);
}

function selectDripCampaign(campaign) { showToast('Selected campaign: ' + campaign); }
function filterMessageTemplates() { /* filter logic */ }
function copyTemplate(id) { const el = document.getElementById(id); if (el) { copyText(el.textContent); } }
function toggleScript(section) {
    const el = document.getElementById('script-' + section);
    if (el) el.style.display = el.style.display === 'none' ? 'block' : 'none';
}
function copyScriptText(btn) {
    const p = btn.previousElementSibling;
    if (p) copyText(p.textContent);
}
function showBulkActions() { showToast('Bulk actions coming soon!'); }
function showImportModal() { showToast('Import feature coming soon!'); }
function renderLeadTasks() { /* render tasks */ }
function renderLeadAnalytics() {
    updateLeadSourceChart();
    // Update funnel
    const active = leads.filter(l => l.status === 'active');
    const stages = { new: 0, contacted: 0, qualified: 0, showing: 0, offer: 0, 'under-contract': 0, closed: 0 };
    active.forEach(l => { if (stages[l.stage] !== undefined) stages[l.stage]++; });

    const updateFunnel = (id, val) => { const el = document.getElementById(id); if (el) el.textContent = val; };
    updateFunnel('funnel-new', stages.new);
    updateFunnel('funnel-contacted', stages.contacted);
    updateFunnel('funnel-qualified', stages.qualified);
    updateFunnel('funnel-showing', stages.showing);
    updateFunnel('funnel-contract', stages['under-contract']);
    updateFunnel('funnel-closed', stages.closed);
}

// Task functions
function addTask() {
    const desc = document.getElementById('task-description')?.value.trim();
    if (!desc) { showToast('Please enter a task description', 'error'); return; }

    const task = {
        id: Date.now(),
        description: desc,
        dueDate: document.getElementById('task-date')?.value || new Date().toISOString().split('T')[0],
        dueTime: document.getElementById('task-time')?.value || '09:00',
        type: document.getElementById('task-type')?.value || 'call',
        leadId: document.getElementById('task-lead')?.value || null,
        priority: document.getElementById('task-priority')?.value || 'medium',
        completed: false,
        createdAt: new Date().toISOString()
    };

    leadTasks.push(task);
    localStorage.setItem('elaLeadTasks', JSON.stringify(leadTasks));
    document.getElementById('task-description').value = '';
    showToast('Task added!');
    updateLeadStats();
}

function updateLeadSourceChart() {
    const container = document.getElementById('lead-source-chart');
    if (!container) return;

    const activeLeads = leads.filter(l => l.status === 'active');
    if (activeLeads.length === 0) {
        container.innerHTML = '<p style="color: #888; text-align: center; padding: 1rem;">Add leads to see source performance breakdown</p>';
        return;
    }

    const sources = {};
    activeLeads.forEach(l => {
        sources[l.source] = (sources[l.source] || 0) + 1;
    });

    const colors = {
        instagram: '#E4405F', facebook: '#1877F2', website: '#27ae60', referral: '#9b59b6',
        'open-house': '#f39c12', zillow: '#006AFF', realtor: '#D92228', 'cold-call': '#34495e', other: '#95a5a6'
    };

    container.innerHTML = Object.entries(sources).sort((a,b) => b[1] - a[1]).map(([source, count]) => {
        const pct = Math.round((count / activeLeads.length) * 100);
        const color = colors[source] || '#888';
        return `
        <div style="margin-bottom: 0.75rem;">
            <div style="display: flex; justify-content: space-between; margin-bottom: 0.25rem;">
                <span style="text-transform: capitalize;">${source.replace('-', ' ')}</span>
                <span>${count} leads (${pct}%)</span>
            </div>
            <div style="height: 8px; background: var(--surface); border-radius: 4px; overflow: hidden;">
                <div style="height: 100%; width: ${pct}%; background: ${color}; border-radius: 4px;"></div>
            </div>
        </div>`;
    }).join('');
}

// Initialize leads on page load
document.addEventListener('DOMContentLoaded', function() {
    setTimeout(() => {
        updateLeadStats();
        renderLeadsList();
    }, 500);
});

// ========== EMAIL TEMPLATES DATA ==========
const EMAIL_TEMPLATES = {
    newLead: [
        {
            name: "Warm Welcome - Buyer Inquiry",
            subject: "Thanks for Reaching Out About Cincinnati Homes!",
            preview: "Personal welcome + next steps",
            body: `Hi [NAME],

Thank you so much for reaching out! I'm Ela Mildner-Shapiro with Sibcy Cline Realtors, and I'm thrilled to help you find your perfect home in Cincinnati.

With 22 years of experience in the Greater Cincinnati market, I know every neighborhood inside and out - from the historic charm of Hyde Park to the family-friendly communities of Mason and Anderson Township.

I'd love to learn more about what you're looking for:
- What neighborhoods are you interested in?
- What's your ideal timeline for moving?
- How many bedrooms/bathrooms do you need?
- Any must-haves on your wish list?

Let's schedule a quick 15-minute call to discuss your home search. I'm available [DAYS/TIMES] - what works best for you?

Looking forward to helping you find your dream home!

Warmly,
Ela Mildner-Shapiro
Sibcy Cline Realtors
(513) 703-4202`
        },
        {
            name: "Seller Inquiry Response",
            subject: "Your Home Value Question - Let's Talk!",
            preview: "Response to seller lead",
            body: `Hi [NAME],

Thank you for reaching out about selling your home! This is an exciting time, and I'm here to help you navigate the process with confidence.

Great news about the Cincinnati market right now:
- Median home prices are UP 8.7% year-over-year
- Average days on market: just 21 days
- Inventory is LOW, meaning more buyers competing for homes like yours

I'd love to provide you with a FREE Comparative Market Analysis (CMA) to show you exactly what your home could sell for in today's market.

When would be a good time for a quick call?

Ready when you are!

Ela Mildner-Shapiro
Sibcy Cline Realtors
(513) 703-4202`
        },
        {
            name: "Open House Follow-Up",
            subject: "Great Meeting You at [ADDRESS] Yesterday!",
            preview: "Post open house connection",
            body: `Hi [NAME],

It was wonderful meeting you at the open house at [ADDRESS] yesterday!

I wanted to follow up and see what you thought:
- Did the home meet your expectations?
- Were there features you loved?
- Any concerns I can address?

I'd love to set up some private showings for you. What does your schedule look like this week?

Talk soon,
Ela Mildner-Shapiro
(513) 703-4202`
        }
    ],
    buyerNurture: [
        {
            name: "Market Update for Buyers",
            subject: "Cincinnati Market Update - What Buyers Need to Know",
            preview: "Monthly market insights",
            body: `Hi [NAME],

I wanted to share some important updates about the Cincinnati real estate market:

JANUARY 2026 MARKET SNAPSHOT:
- Mortgage Rates: 6.06% (down from last month!)
- Cincinnati Median Price: $285,000
- Average Days on Market: 21 days

HOT NEIGHBORHOODS RIGHT NOW:
1. Over-the-Rhine - Up 7.5% YoY
2. Mason - Up 6.1% YoY, top-rated schools
3. West Chester - Up 5.5% YoY

Ready to see any listings? Just reply to this email!

Happy house hunting!
Ela`
        },
        {
            name: "Pre-Approval Reminder",
            subject: "Quick Tip: Get Pre-Approved Before You Shop!",
            preview: "Encourage pre-approval",
            body: `Hi [NAME],

Quick question - have you gotten pre-approved for a mortgage yet?

Here's why it matters:
1. KNOW YOUR BUDGET
2. BE COMPETITIVE in this fast market
3. MOVE FAST when you find "the one"

Want me to connect you with a great local lender?

Ela
(513) 703-4202`
        },
        {
            name: "First-Time Buyer Guide",
            subject: "Your Step-by-Step Guide to Buying Your First Home",
            preview: "Educational content for first-timers",
            body: `Hi [NAME],

Buying your first home is EXCITING! Here's your roadmap:

STEP 1: Get Pre-Approved
STEP 2: Define Your Criteria
STEP 3: Start Touring Homes
STEP 4: Make an Offer
STEP 5: Close and Get Your Keys!

Want to grab coffee and walk through this together?

Your future home awaits,
Ela`
        }
    ],
    sellerNurture: [
        {
            name: "Home Prep Checklist",
            subject: "10 Things to Do Before Listing Your Home",
            preview: "Preparation tips for sellers",
            body: `Hi [NAME],

Here's your checklist to maximize your home's value:

EXTERIOR:
[ ] Power wash
[ ] Fresh mulch
[ ] Paint front door

INTERIOR:
[ ] Declutter
[ ] Deep clean
[ ] Paint neutral colors

Homes that are properly prepared sell for 5-10% MORE!

Want me to do a pre-listing walkthrough?

Ela
(513) 703-4202`
        },
        {
            name: "Why Now Is a Great Time to Sell",
            subject: "Thinking About Selling? 2026 Could Be Perfect",
            preview: "Market timing for sellers",
            body: `Hi [NAME],

Right now might be the perfect time to sell:

- Cincinnati values: UP 8.7%
- Buyer demand: HIGH
- Days on market: Only 21

Curious what your home could sell for? I'd love to provide a free market analysis.

Let's chat!
Ela`
        },
        {
            name: "Just Sold in Your Area",
            subject: "Your Neighbor's Home Just Sold!",
            preview: "Trigger interest with nearby sale",
            body: `Hi [NAME],

A home just sold near you at [ADDRESS] for $[PRICE]!

This is great news for your property value. Would you like to know what your home could sell for?

Best,
Ela Mildner-Shapiro
(513) 703-4202`
        }
    ],
    pastClient: [
        {
            name: "Anniversary Check-In",
            subject: "Happy Home-iversary!",
            preview: "Annual touchpoint",
            body: `Hi [NAME]!

Can you believe it's been [X] year(s) since you got the keys? I hope you're loving your home!

Your home has likely appreciated - want an update on its current value?

Also, if you know anyone looking to buy or sell, I'd be honored if you'd pass along my name!

Warmly,
Ela
(513) 703-4202`
        },
        {
            name: "Referral Request",
            subject: "Quick Favor? Know Anyone Moving?",
            preview: "Gentle referral ask",
            body: `Hi [NAME]!

Do you know anyone thinking about buying or selling in Cincinnati?

A referral from you means the world to me!

With gratitude,
Ela
(513) 703-4202`
        },
        {
            name: "Holiday Greeting",
            subject: "Happy Holidays from Ela!",
            preview: "Seasonal touchpoint",
            body: `Dear [NAME],

Wishing you and your loved ones a wonderful holiday season!

If real estate is on your radar for the new year, I'm here for you.

Happy Holidays!
Ela Mildner-Shapiro & Family`
        }
    ],
    transactional: [
        {
            name: "Listing Appointment Confirmation",
            subject: "Confirmed: Listing Appointment",
            preview: "Pre-appointment details",
            body: `Hi [NAME],

Our listing appointment is confirmed:
DATE: [DATE]
TIME: [TIME]
ADDRESS: [ADDRESS]

I'll tour your home, discuss your goals, review market data, and share my marketing plan.

See you soon,
Ela`
        },
        {
            name: "Offer Accepted Congratulations",
            subject: "CONGRATULATIONS! Your Offer Was Accepted!",
            preview: "Celebrate accepted offer",
            body: `[NAME]!!!!

YOUR OFFER WAS ACCEPTED!
[ADDRESS] is going to be YOUR new home!

WHAT'S NEXT:
- Earnest money due within 3 days
- Schedule home inspection
- Closing estimated: [DATE]

I'll guide you through every step!

Congratulations!
Ela`
        },
        {
            name: "Closing Day Instructions",
            subject: "Tomorrow's the Big Day!",
            preview: "Day-before-closing prep",
            body: `Hi [NAME],

Tomorrow is CLOSING DAY!

BRING:
- Photo ID
- Certified check for $[AMOUNT]
- Your checkbook

We'll do a final walkthrough before closing.

See you tomorrow!
Ela`
        }
    ],
    reEngagement: [
        {
            name: "We Miss You!",
            subject: "Still Thinking About Moving?",
            preview: "Reconnect with cold leads",
            body: `Hi [NAME],

It's been a while! Still interested in [BUYING/SELLING]?

I'm here whenever the timing is right for you.

Thinking of you,
Ela
(513) 703-4202`
        },
        {
            name: "New Listings Alert",
            subject: "Homes You Might Love Just Hit the Market!",
            preview: "Share relevant new listings",
            body: `Hi [NAME]!

Some exciting new homes just hit the market:

[LISTING DETAILS]

Want to see any in person?

Happy house hunting,
Ela`
        }
    ],
    networking: [
        {
            name: "Lender Introduction",
            subject: "Introduction: [BUYER] <> [LENDER]",
            preview: "Connect buyer with lender",
            body: `Hi [LENDER],

I'd like to introduce [BUYER], who is looking to purchase in Cincinnati.

I'll let you two take it from here!

Best,
Ela`
        },
        {
            name: "Vendor Thank You",
            subject: "Thank You for the Amazing Work!",
            preview: "Thank service providers",
            body: `Hi [VENDOR],

Thank you for the incredible work at [ADDRESS]!

I'll definitely be recommending you to future clients!

Thanks again!
Ela`
        }
    ]
};

function renderEmail() {
    const categories = [
        { key: 'newLead', title: 'New Lead Response', icon: '&#128165;', color: '#e74c3c', description: 'First contact with new prospects' },
        { key: 'buyerNurture', title: 'Buyer Nurture', icon: '&#127968;', color: '#3498db', description: 'Keep buyers engaged' },
        { key: 'sellerNurture', title: 'Seller Nurture', icon: '&#128200;', color: '#27ae60', description: 'Warm up potential sellers' },
        { key: 'pastClient', title: 'Past Client', icon: '&#128153;', color: '#9b59b6', description: 'Stay connected with your sphere' },
        { key: 'transactional', title: 'Transaction Updates', icon: '&#128221;', color: '#f39c12', description: 'Key moments during escrow' },
        { key: 'reEngagement', title: 'Re-Engagement', icon: '&#128140;', color: '#1abc9c', description: 'Reconnect with cold leads' },
        { key: 'networking', title: 'Networking', icon: '&#129309;', color: '#34495e', description: 'Build your referral network' }
    ];

    return `
    <section class="page-section" id="page-email">
        <div class="page-header" style="background: linear-gradient(135deg, #3498db, #2980b9);">
            <h2>&#128231; Email Template Library</h2>
            <p>20+ professionally written emails ready to customize and send</p>
        </div>
        <div class="card" style="background: linear-gradient(135deg, #667eea, #764ba2); color: white; margin-bottom: 1.5rem;">
            <div style="display: flex; align-items: center; gap: 1rem;">
                <div style="font-size: 3rem;">&#9993;</div>
                <div>
                    <h3>Email Marketing Power Tips</h3>
                    <p style="opacity: 0.9;">Ela, email is your #1 tool for nurturing leads! 80% of sales require 5+ follow-ups.</p>
                </div>
            </div>
        </div>
        <div class="grid-2">
            ${categories.map(cat => `
                <div class="card" style="border-left: 4px solid ${cat.color};">
                    <div class="card-header">
                        <span class="card-title">${cat.icon} ${cat.title}</span>
                        <span class="nav-badge" style="background: ${cat.color};">${EMAIL_TEMPLATES[cat.key].length}</span>
                    </div>
                    <p style="color: var(--gray); font-size: 0.9rem; margin-bottom: 1rem;">${cat.description}</p>
                    ${EMAIL_TEMPLATES[cat.key].map((template, idx) => `
                        <div style="padding: 0.8rem; background: var(--light-gray); border-radius: 8px; margin-bottom: 0.5rem; cursor: pointer;" onclick="openEmailTemplate('${cat.key}', ${idx})">
                            <div style="font-weight: 600; font-size: 0.9rem;">${template.name}</div>
                            <div style="font-size: 0.8rem; color: var(--gray);">${template.preview}</div>
                        </div>
                    `).join('')}
                </div>
            `).join('')}
        </div>
        <div id="email-modal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.7); z-index: 2000; overflow-y: auto;">
            <div style="background: white; margin: 2rem auto; max-width: 800px; border-radius: 15px; overflow: hidden;">
                <div style="background: linear-gradient(135deg, #3498db, #2980b9); color: white; padding: 1.5rem;">
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <h3 id="email-modal-title"></h3>
                        <button onclick="closeEmailModal()" style="background: rgba(255,255,255,0.2); border: none; color: white; width: 35px; height: 35px; border-radius: 50%; cursor: pointer;">&times;</button>
                    </div>
                </div>
                <div style="padding: 1.5rem;">
                    <div style="margin-bottom: 1rem;">
                        <label style="font-weight: 600;">Subject Line:</label>
                        <input type="text" id="email-subject" class="form-input">
                    </div>
                    <div style="margin-bottom: 1rem;">
                        <label style="font-weight: 600;">Email Body:</label>
                        <textarea id="email-body" class="form-input" style="min-height: 300px; white-space: pre-wrap;"></textarea>
                    </div>
                    <div style="display: flex; gap: 0.5rem;">
                        <button class="btn btn-primary" onclick="copyEmailBody()">&#128203; Copy Email</button>
                        <button class="btn btn-success" onclick="copyEmailSubject()">&#128203; Copy Subject</button>
                        <button class="btn btn-outline" onclick="closeEmailModal()">Close</button>
                    </div>
                </div>
            </div>
        </div>
    </section>`;
}

function openEmailTemplate(category, index) {
    const template = EMAIL_TEMPLATES[category][index];
    document.getElementById('email-modal-title').textContent = template.name;
    document.getElementById('email-subject').value = template.subject;
    document.getElementById('email-body').value = template.body;
    document.getElementById('email-modal').style.display = 'block';
}

function closeEmailModal() {
    document.getElementById('email-modal').style.display = 'none';
}

function copyEmailBody() {
    navigator.clipboard.writeText(document.getElementById('email-body').value);
    showToast('Email copied!');
}

function copyEmailSubject() {
    navigator.clipboard.writeText(document.getElementById('email-subject').value);
    showToast('Subject copied!');
}

function renderSettings() {
    return `
    <section class="page-section" id="page-settings">
        <div class="page-header">
            <h2>&#9881; Settings</h2>
            <p>Configure your command center preferences</p>
        </div>

        <!-- Profile Section -->
        <div class="grid-2">
            <div class="card">
                <div class="card-header"><span class="card-title">&#128100; Profile Information</span></div>
                <div class="form-group">
                    <label class="form-label">Full Name</label>
                    <input type="text" class="form-input" id="set-name" value="${settings.name || LIVE_DATA.ela.name}">
                </div>
                <div class="form-group">
                    <label class="form-label">Phone Number</label>
                    <input type="text" class="form-input" id="set-phone" value="${settings.phone || LIVE_DATA.ela.phone}">
                </div>
                <div class="form-group">
                    <label class="form-label">Email Address</label>
                    <input type="email" class="form-input" id="set-email" value="${settings.email || ''}" placeholder="you@email.com">
                </div>
                <div class="form-group">
                    <label class="form-label">Website</label>
                    <input type="text" class="form-input" id="set-website" value="${settings.website || LIVE_DATA.ela.website}">
                </div>
                <button class="btn btn-primary" onclick="saveSettings('profile')">Save Profile</button>
            </div>

            <div class="card">
                <div class="card-header"><span class="card-title">&#127970; Brokerage Info</span></div>
                <div class="form-group">
                    <label class="form-label">Brokerage Name</label>
                    <input type="text" class="form-input" id="set-brokerage" value="${settings.brokerage || 'Sibcy Cline Realtors'}">
                </div>
                <div class="form-group">
                    <label class="form-label">License Number</label>
                    <input type="text" class="form-input" id="set-license" value="${settings.license || ''}" placeholder="OH.2003.000000">
                </div>
                <div class="form-group">
                    <label class="form-label">Years of Experience</label>
                    <input type="number" class="form-input" id="set-experience" value="${settings.experience || '22'}">
                </div>
                <div class="form-group">
                    <label class="form-label">Specialties</label>
                    <input type="text" class="form-input" id="set-specialties" value="${settings.specialties || ''}" placeholder="First-time buyers, Luxury homes, etc.">
                </div>
                <button class="btn btn-primary" onclick="saveSettings('brokerage')">Save Brokerage</button>
            </div>
        </div>

        <!-- Social Media Section -->
        <div class="card" style="margin-top: 1.5rem;">
            <div class="card-header"><span class="card-title">&#128241; Social Media Links</span></div>
            <div class="grid-3">
                <div class="form-group">
                    <label class="form-label">&#128308; Instagram</label>
                    <input type="text" class="form-input" id="set-ig" value="${settings.instagram || ''}" placeholder="https://instagram.com/yourhandle">
                </div>
                <div class="form-group">
                    <label class="form-label">&#128309; Facebook</label>
                    <input type="text" class="form-input" id="set-fb" value="${settings.facebook || ''}" placeholder="https://facebook.com/yourpage">
                </div>
                <div class="form-group">
                    <label class="form-label">&#128310; LinkedIn</label>
                    <input type="text" class="form-input" id="set-li" value="${settings.linkedin || ''}" placeholder="https://linkedin.com/in/yourprofile">
                </div>
                <div class="form-group">
                    <label class="form-label">&#127909; YouTube</label>
                    <input type="text" class="form-input" id="set-yt" value="${settings.youtube || ''}" placeholder="https://youtube.com/@yourchannel">
                </div>
                <div class="form-group">
                    <label class="form-label">&#128039; TikTok</label>
                    <input type="text" class="form-input" id="set-tiktok" value="${settings.tiktok || ''}" placeholder="https://tiktok.com/@yourhandle">
                </div>
                <div class="form-group">
                    <label class="form-label">&#10006; X (Twitter)</label>
                    <input type="text" class="form-input" id="set-twitter" value="${settings.twitter || ''}" placeholder="https://x.com/yourhandle">
                </div>
            </div>
            <button class="btn btn-primary" onclick="saveSettings('social')">Save Social Links</button>
        </div>

        <!-- Content Preferences -->
        <div class="grid-2" style="margin-top: 1.5rem;">
            <div class="card">
                <div class="card-header"><span class="card-title">&#127919; Target Areas</span></div>
                <p style="font-size: 0.9rem; color: #666; margin-bottom: 1rem;">Set your primary service areas for location-based content</p>
                <div class="form-group">
                    <label class="form-label">Primary City/Metro</label>
                    <input type="text" class="form-input" id="set-city" value="${settings.city || 'Cincinnati'}">
                </div>
                <div class="form-group">
                    <label class="form-label">State</label>
                    <input type="text" class="form-input" id="set-state" value="${settings.state || 'Ohio'}">
                </div>
                <div class="form-group">
                    <label class="form-label">Neighborhoods (comma-separated)</label>
                    <textarea class="form-input" id="set-neighborhoods" rows="3" placeholder="Hyde Park, Oakley, Anderson Township...">${settings.neighborhoods || ''}</textarea>
                </div>
                <button class="btn btn-primary" onclick="saveSettings('areas')">Save Areas</button>
            </div>

            <div class="card">
                <div class="card-header"><span class="card-title">&#128196; Content Preferences</span></div>
                <p style="font-size: 0.9rem; color: #666; margin-bottom: 1rem;">Customize how content is generated for you</p>
                <div class="form-group">
                    <label class="form-label">Default Post Tone</label>
                    <select class="form-input" id="set-tone">
                        <option value="professional" ${settings.tone === 'professional' ? 'selected' : ''}>Professional</option>
                        <option value="friendly" ${settings.tone === 'friendly' ? 'selected' : ''}>Friendly & Warm</option>
                        <option value="casual" ${settings.tone === 'casual' ? 'selected' : ''}>Casual & Fun</option>
                        <option value="luxury" ${settings.tone === 'luxury' ? 'selected' : ''}>Luxury & Sophisticated</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Include Emojis</label>
                    <select class="form-input" id="set-emojis">
                        <option value="yes" ${settings.emojis !== 'no' ? 'selected' : ''}>Yes - Include emojis</option>
                        <option value="no" ${settings.emojis === 'no' ? 'selected' : ''}>No - Text only</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Default Hashtag Count</label>
                    <select class="form-input" id="set-hashtagcount">
                        <option value="5" ${settings.hashtagCount === '5' ? 'selected' : ''}>5 hashtags</option>
                        <option value="10" ${settings.hashtagCount === '10' ? 'selected' : ''}>10 hashtags</option>
                        <option value="15" ${settings.hashtagCount === '15' || !settings.hashtagCount ? 'selected' : ''}>15 hashtags</option>
                        <option value="20" ${settings.hashtagCount === '20' ? 'selected' : ''}>20 hashtags</option>
                        <option value="30" ${settings.hashtagCount === '30' ? 'selected' : ''}>30 hashtags (max)</option>
                    </select>
                </div>
                <button class="btn btn-primary" onclick="saveSettings('content')">Save Preferences</button>
            </div>
        </div>

        <!-- Branding Section -->
        <div class="card" style="margin-top: 1.5rem;">
            <div class="card-header"><span class="card-title">&#127912; Personal Branding</span></div>
            <div class="grid-2">
                <div>
                    <div class="form-group">
                        <label class="form-label">Your Tagline/Slogan</label>
                        <input type="text" class="form-input" id="set-tagline" value="${settings.tagline || ''}" placeholder="Your Cincinnati Real Estate Expert">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Unique Selling Proposition</label>
                        <textarea class="form-input" id="set-usp" rows="2" placeholder="What makes you different from other agents?">${settings.usp || ''}</textarea>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Brand Colors (for reference)</label>
                        <div style="display: flex; gap: 0.5rem;">
                            <input type="color" id="set-color1" value="${settings.color1 || '#667eea'}" style="width: 50px; height: 40px; border: none; cursor: pointer;">
                            <input type="color" id="set-color2" value="${settings.color2 || '#764ba2'}" style="width: 50px; height: 40px; border: none; cursor: pointer;">
                            <input type="color" id="set-color3" value="${settings.color3 || '#f39c12'}" style="width: 50px; height: 40px; border: none; cursor: pointer;">
                        </div>
                    </div>
                </div>
                <div>
                    <div class="form-group">
                        <label class="form-label">Bio for Social (150 chars)</label>
                        <textarea class="form-input" id="set-bio" rows="3" maxlength="150" placeholder="Cincinnati Realtor | 22 Years Experience | Helping families find their dream home">${settings.bio || ''}</textarea>
                        <small style="color: #888;">Characters: <span id="bio-count">${(settings.bio || '').length}</span>/150</small>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Call-to-Action Text</label>
                        <input type="text" class="form-input" id="set-cta" value="${settings.cta || ''}" placeholder="DM me to start your home search!">
                    </div>
                </div>
            </div>
            <button class="btn btn-primary" onclick="saveSettings('branding')">Save Branding</button>
        </div>

        <!-- Posting Schedule Preferences -->
        <div class="card" style="margin-top: 1.5rem;">
            <div class="card-header"><span class="card-title">&#128197; Default Posting Times</span></div>
            <p style="font-size: 0.9rem; color: #666; margin-bottom: 1rem;">Set your preferred posting times for each platform (based on best engagement)</p>
            <div class="grid-3">
                <div class="form-group">
                    <label class="form-label">Instagram Best Time</label>
                    <select class="form-input" id="set-ig-time">
                        <option value="7:00 AM" ${settings.igTime === '7:00 AM' ? 'selected' : ''}>7:00 AM</option>
                        <option value="8:00 AM" ${settings.igTime === '8:00 AM' ? 'selected' : ''}>8:00 AM</option>
                        <option value="11:00 AM" ${settings.igTime === '11:00 AM' || !settings.igTime ? 'selected' : ''}>11:00 AM (Recommended)</option>
                        <option value="12:00 PM" ${settings.igTime === '12:00 PM' ? 'selected' : ''}>12:00 PM</option>
                        <option value="5:00 PM" ${settings.igTime === '5:00 PM' ? 'selected' : ''}>5:00 PM</option>
                        <option value="7:00 PM" ${settings.igTime === '7:00 PM' ? 'selected' : ''}>7:00 PM</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Facebook Best Time</label>
                    <select class="form-input" id="set-fb-time">
                        <option value="9:00 AM" ${settings.fbTime === '9:00 AM' || !settings.fbTime ? 'selected' : ''}>9:00 AM (Recommended)</option>
                        <option value="11:00 AM" ${settings.fbTime === '11:00 AM' ? 'selected' : ''}>11:00 AM</option>
                        <option value="1:00 PM" ${settings.fbTime === '1:00 PM' ? 'selected' : ''}>1:00 PM</option>
                        <option value="3:00 PM" ${settings.fbTime === '3:00 PM' ? 'selected' : ''}>3:00 PM</option>
                        <option value="7:00 PM" ${settings.fbTime === '7:00 PM' ? 'selected' : ''}>7:00 PM</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">LinkedIn Best Time</label>
                    <select class="form-input" id="set-li-time">
                        <option value="7:00 AM" ${settings.liTime === '7:00 AM' ? 'selected' : ''}>7:00 AM</option>
                        <option value="8:00 AM" ${settings.liTime === '8:00 AM' || !settings.liTime ? 'selected' : ''}>8:00 AM (Recommended)</option>
                        <option value="10:00 AM" ${settings.liTime === '10:00 AM' ? 'selected' : ''}>10:00 AM</option>
                        <option value="12:00 PM" ${settings.liTime === '12:00 PM' ? 'selected' : ''}>12:00 PM</option>
                        <option value="5:00 PM" ${settings.liTime === '5:00 PM' ? 'selected' : ''}>5:00 PM</option>
                    </select>
                </div>
            </div>
            <div class="form-group" style="margin-top: 1rem;">
                <label class="form-label">Posting Frequency Goal</label>
                <select class="form-input" id="set-frequency" style="max-width: 300px;">
                    <option value="daily" ${settings.frequency === 'daily' ? 'selected' : ''}>Daily (7x/week)</option>
                    <option value="5x" ${settings.frequency === '5x' || !settings.frequency ? 'selected' : ''}>5x per week</option>
                    <option value="3x" ${settings.frequency === '3x' ? 'selected' : ''}>3x per week</option>
                    <option value="2x" ${settings.frequency === '2x' ? 'selected' : ''}>2x per week</option>
                </select>
            </div>
            <button class="btn btn-primary" onclick="saveSettings('schedule')">Save Schedule Preferences</button>
        </div>

        <!-- AI API Settings -->
        <div class="card" style="margin-top: 1.5rem; border-left: 5px solid #667eea;">
            <div class="card-header">
                <span class="card-title">&#129302; AI Settings - Gemini 3 Flash</span>
                <span class="badge" style="background: linear-gradient(135deg, #667eea, #764ba2); color: white;">Powered by Google</span>
            </div>
            <div style="padding: 1rem; background: linear-gradient(135deg, #e8f5e9, #c8e6c9); border-radius: 8px; margin-bottom: 1rem;">
                <strong>&#128274; Secure API Configuration</strong>
                <p style="font-size: 0.9rem; margin-top: 0.5rem;">Your Gemini API key is stored securely in Netlify environment variables - never exposed in browser code!</p>
            </div>
            <div class="form-group">
                <label class="form-label">AI Model</label>
                <select class="form-input" id="set-gemini-model" style="max-width: 300px;">
                    <option value="gemini-3-flash-preview" ${settings.geminiModel === 'gemini-3-flash-preview' || !settings.geminiModel ? 'selected' : ''}>Gemini 3 Flash (Recommended)</option>
                    <option value="gemini-3-pro-preview" ${settings.geminiModel === 'gemini-3-pro-preview' ? 'selected' : ''}>Gemini 3 Pro (Advanced)</option>
                </select>
            </div>
            <div class="form-group">
                <label class="form-label">Thinking Level</label>
                <select class="form-input" id="set-gemini-thinking" style="max-width: 300px;">
                    <option value="minimal" ${settings.geminiThinking === 'minimal' ? 'selected' : ''}>Minimal (Fastest)</option>
                    <option value="low" ${settings.geminiThinking === 'low' || !settings.geminiThinking ? 'selected' : ''}>Low (Balanced)</option>
                    <option value="medium" ${settings.geminiThinking === 'medium' ? 'selected' : ''}>Medium (Better Quality)</option>
                    <option value="high" ${settings.geminiThinking === 'high' ? 'selected' : ''}>High (Best Quality)</option>
                </select>
            </div>
            <div style="display: flex; gap: 1rem; flex-wrap: wrap;">
                <button class="btn btn-primary" onclick="saveSettings('ai')">Save AI Settings</button>
                <button class="btn btn-success" onclick="testGeminiConnection()">&#128268; Test Connection</button>
            </div>
            <div id="gemini-status" style="margin-top: 1rem; padding: 1rem; background: var(--surface); border-radius: 8px; display: none;">
                <span id="gemini-status-text"></span>
            </div>
        </div>

        <!-- Data Management -->
        <div class="card" style="margin-top: 1.5rem; border-left: 5px solid #e74c3c;">
            <div class="card-header"><span class="card-title">&#128190; Data Management</span></div>
            <p style="font-size: 0.9rem; color: #666; margin-bottom: 1rem;">Manage your saved data and preferences</p>
            <div style="display: flex; gap: 1rem; flex-wrap: wrap;">
                <button class="btn" onclick="exportAllData()">&#128229; Export All Data</button>
                <button class="btn" onclick="document.getElementById('import-file').click()">&#128228; Import Data</button>
                <input type="file" id="import-file" accept=".json" style="display: none;" onchange="importData(event)">
                <button class="btn" onclick="clearAllData()" style="color: #e74c3c;">&#128465; Clear All Data</button>
            </div>
            <div style="margin-top: 1rem; padding: 1rem; background: var(--surface); border-radius: 8px;">
                <h4 style="margin-bottom: 0.5rem;">Current Data Summary:</h4>
                <ul style="font-size: 0.9rem; color: #666; margin-left: 1.5rem;">
                    <li>Scheduled Posts: <strong id="data-scheduled">0</strong></li>
                    <li>Saved Leads: <strong id="data-leads">0</strong></li>
                    <li>Custom Hashtag Sets: <strong id="data-hashtags">0</strong></li>
                    <li>Content Library Items: <strong id="data-content">0</strong></li>
                </ul>
            </div>
        </div>

        <!-- About Section -->
        <div class="card" style="margin-top: 1.5rem; background: linear-gradient(135deg, #667eea, #764ba2); color: white;">
            <div style="text-align: center;">
                <h2 style="margin-bottom: 0.5rem;">&#127775; Command Center V3 PRO</h2>
                <p style="opacity: 0.9;">Built exclusively for Ela Mildner-Shapiro</p>
                <p style="font-size: 0.85rem; opacity: 0.7; margin-top: 0.5rem;">Version 3.0 | Developed by Arnold</p>
                <div style="margin-top: 1rem; padding-top: 1rem; border-top: 1px solid rgba(255,255,255,0.2);">
                    <p style="font-size: 0.9rem;">Need help? Check the &#128214; User Manual in the sidebar!</p>
                </div>
            </div>
        </div>
    </section>`;
}

function saveSettings(type) {
    if (type === 'profile') {
        settings.name = document.getElementById('set-name').value;
        settings.phone = document.getElementById('set-phone').value;
        settings.email = document.getElementById('set-email').value;
        settings.website = document.getElementById('set-website').value;
    } else if (type === 'brokerage') {
        settings.brokerage = document.getElementById('set-brokerage').value;
        settings.license = document.getElementById('set-license').value;
        settings.experience = document.getElementById('set-experience').value;
        settings.specialties = document.getElementById('set-specialties').value;
    } else if (type === 'social') {
        settings.facebook = document.getElementById('set-fb').value;
        settings.instagram = document.getElementById('set-ig').value;
        settings.linkedin = document.getElementById('set-li').value;
        settings.youtube = document.getElementById('set-yt').value;
        settings.tiktok = document.getElementById('set-tiktok').value;
        settings.twitter = document.getElementById('set-twitter').value;
    } else if (type === 'areas') {
        settings.city = document.getElementById('set-city').value;
        settings.state = document.getElementById('set-state').value;
        settings.neighborhoods = document.getElementById('set-neighborhoods').value;
    } else if (type === 'content') {
        settings.tone = document.getElementById('set-tone').value;
        settings.emojis = document.getElementById('set-emojis').value;
        settings.hashtagCount = document.getElementById('set-hashtagcount').value;
    } else if (type === 'branding') {
        settings.tagline = document.getElementById('set-tagline').value;
        settings.usp = document.getElementById('set-usp').value;
        settings.color1 = document.getElementById('set-color1').value;
        settings.color2 = document.getElementById('set-color2').value;
        settings.color3 = document.getElementById('set-color3').value;
        settings.bio = document.getElementById('set-bio').value;
        settings.cta = document.getElementById('set-cta').value;
    } else if (type === 'schedule') {
        settings.igTime = document.getElementById('set-ig-time').value;
        settings.fbTime = document.getElementById('set-fb-time').value;
        settings.liTime = document.getElementById('set-li-time').value;
        settings.frequency = document.getElementById('set-frequency').value;
    } else if (type === 'ai') {
        settings.geminiModel = document.getElementById('set-gemini-model').value;
        settings.geminiThinking = document.getElementById('set-gemini-thinking').value;
    }
    localStorage.setItem('elaSettings', JSON.stringify(settings));
    showToast('Settings saved!');
}

// ========== GEMINI 3 FLASH API INTEGRATION (SECURE) ==========
// API calls go through Netlify serverless function - API key stored securely in Netlify env vars

async function callGeminiAPI(prompt, systemPrompt = '') {
    const model = settings.geminiModel || 'gemini-3-flash-preview';
    const thinkingLevel = settings.geminiThinking || 'low';

    try {
        // Call the secure Netlify serverless function
        const response = await fetch('/.netlify/functions/gemini', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({
                prompt: prompt,
                systemPrompt: systemPrompt,
                model: model,
                thinkingLevel: thinkingLevel
            })
        });

        const data = await response.json();

        if (!response.ok) {
            console.error('Gemini API Error:', data);
            showToast('API Error: ' + (data.error || 'Unknown error'), 'error');
            return null;
        }

        return data.text;
    } catch (error) {
        console.error('Gemini API Error:', error);
        showToast('Connection error. Check your internet connection.', 'error');
        return null;
    }
}

async function testGeminiConnection() {
    const statusDiv = document.getElementById('gemini-status');
    const statusText = document.getElementById('gemini-status-text');
    statusDiv.style.display = 'block';
    statusText.innerHTML = '&#9203; Testing connection to Gemini 3 Flash...';
    statusDiv.style.background = '#fff3cd';

    const result = await callGeminiAPI('Say "Connection successful!" in exactly 3 words.');

    if (result) {
        statusText.innerHTML = '&#9989; Connected! Model: ' + (settings.geminiModel || 'gemini-3-flash-preview') + '<br><small>Response: ' + result.substring(0, 100) + '</small>';
        statusDiv.style.background = '#d4edda';
        showToast('Gemini 3 Flash connected successfully!', 'success');
    } else {
        statusText.innerHTML = '&#10060; Connection failed. Make sure the API key is configured in Netlify.';
        statusDiv.style.background = '#f8d7da';
    }
}

function exportAllData() {
    const allData = {
        settings: settings,
        leads: leads,
        scheduledPosts: scheduledPosts,
        customHashtags: JSON.parse(localStorage.getItem('elaCustomHashtags') || '[]'),
        exportDate: new Date().toISOString()
    };
    const blob = new Blob([JSON.stringify(allData, null, 2)], { type: 'application/json' });
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = 'ela_command_center_backup_' + new Date().toISOString().split('T')[0] + '.json';
    a.click();
    showToast('Data exported successfully!');
}

function importData(event) {
    const file = event.target.files[0];
    if (!file) return;

    const reader = new FileReader();
    reader.onload = function(e) {
        try {
            const data = JSON.parse(e.target.result);
            if (data.settings) {
                settings = { ...settings, ...data.settings };
                localStorage.setItem('elaSettings', JSON.stringify(settings));
            }
            if (data.leads) {
                leads = data.leads;
                localStorage.setItem('elaLeads', JSON.stringify(leads));
            }
            if (data.scheduledPosts) {
                scheduledPosts = data.scheduledPosts;
                localStorage.setItem('elaScheduledPosts', JSON.stringify(scheduledPosts));
            }
            if (data.customHashtags) {
                localStorage.setItem('elaCustomHashtags', JSON.stringify(data.customHashtags));
            }
            showToast('Data imported successfully! Refreshing...');
            setTimeout(() => location.reload(), 1500);
        } catch (err) {
            showToast('Error importing data: Invalid file format', 'error');
        }
    };
    reader.readAsText(file);
}

function clearAllData() {
    if (!confirm('Are you sure you want to clear ALL data? This cannot be undone!')) return;
    if (!confirm('This will delete all your leads, scheduled posts, and settings. Continue?')) return;

    localStorage.removeItem('elaSettings');
    localStorage.removeItem('elaLeads');
    localStorage.removeItem('elaScheduledPosts');
    localStorage.removeItem('elaCustomHashtags');

    showToast('All data cleared. Refreshing...');
    setTimeout(() => location.reload(), 1500);
}

function updateDataSummary() {
    const scheduledEl = document.getElementById('data-scheduled');
    const leadsEl = document.getElementById('data-leads');

    if (scheduledEl) scheduledEl.textContent = scheduledPosts.length;
    if (leadsEl) leadsEl.textContent = leads.filter(l => l.status === 'active').length;
}

function renderManual() {
    return `
    <section class="page-section" id="page-manual">
        <div class="page-header" style="background: linear-gradient(135deg, #667eea, #764ba2);">
            <h2>&#128214; Complete User Manual</h2>
            <p>Your comprehensive guide to social media domination - 27 features explained in detail (including 9 AI tools!)</p>
        </div>

        <!-- TABLE OF CONTENTS -->
        <div class="card" style="background: var(--navy); color: white; margin-bottom: 2rem;">
            <h2 style="text-align: center; margin-bottom: 1rem;">&#128218; Table of Contents</h2>
            <div class="grid-3">
                <div>
                    <h4 style="color: var(--accent); margin-bottom: 0.5rem;">Getting Started</h4>
                    <ul style="list-style: none; font-size: 0.9rem;">
                        <li style="margin-bottom: 0.3rem; cursor: pointer;" onclick="scrollToManualSection('welcome')">1. Welcome & Overview</li>
                        <li style="margin-bottom: 0.3rem; cursor: pointer;" onclick="scrollToManualSection('dashboard')">2. Dashboard</li>
                        <li style="margin-bottom: 0.3rem; cursor: pointer;" onclick="scrollToManualSection('news')">3. News Feed</li>
                    </ul>
                </div>
                <div>
                    <h4 style="color: var(--accent); margin-bottom: 0.5rem;">Research & Intel</h4>
                    <ul style="list-style: none; font-size: 0.9rem;">
                        <li style="margin-bottom: 0.3rem; cursor: pointer;" onclick="scrollToManualSection('viral')">4. Viral Realtors</li>
                        <li style="margin-bottom: 0.3rem; cursor: pointer;" onclick="scrollToManualSection('viralcontent')">5. Viral Content</li>
                        <li style="margin-bottom: 0.3rem; cursor: pointer;" onclick="scrollToManualSection('competitors')">6. Competitors</li>
                        <li style="margin-bottom: 0.3rem; cursor: pointer;" onclick="scrollToManualSection('hashtags')">7. Hashtags</li>
                        <li style="margin-bottom: 0.3rem; cursor: pointer;" onclick="scrollToManualSection('neighborhoods')">8. Neighborhoods</li>
                    </ul>
                </div>
                <div>
                    <h4 style="color: var(--accent); margin-bottom: 0.5rem;">Content Creation</h4>
                    <ul style="list-style: none; font-size: 0.9rem;">
                        <li style="margin-bottom: 0.3rem; cursor: pointer;" onclick="scrollToManualSection('aigenerator')">9. AI Generator</li>
                        <li style="margin-bottom: 0.3rem; cursor: pointer;" onclick="scrollToManualSection('contentlib')">10. Content Library</li>
                        <li style="margin-bottom: 0.3rem; cursor: pointer;" onclick="scrollToManualSection('videoscripts')">11. Video Scripts</li>
                        <li style="margin-bottom: 0.3rem; cursor: pointer;" onclick="scrollToManualSection('email')">12. Email Templates</li>
                    </ul>
                </div>
            </div>
            <div class="grid-3" style="margin-top: 1rem;">
                <div>
                    <h4 style="color: var(--accent); margin-bottom: 0.5rem;">Publishing</h4>
                    <ul style="list-style: none; font-size: 0.9rem;">
                        <li style="margin-bottom: 0.3rem; cursor: pointer;" onclick="scrollToManualSection('scheduler')">13. Post Scheduler</li>
                        <li style="margin-bottom: 0.3rem; cursor: pointer;" onclick="scrollToManualSection('directpost')">14. Direct Posting</li>
                        <li style="margin-bottom: 0.3rem; cursor: pointer;" onclick="scrollToManualSection('autopost')">15. Auto-Post</li>
                    </ul>
                </div>
                <div>
                    <h4 style="color: var(--accent); margin-bottom: 0.5rem;">Growth & Leads</h4>
                    <ul style="list-style: none; font-size: 0.9rem;">
                        <li style="margin-bottom: 0.3rem; cursor: pointer;" onclick="scrollToManualSection('analytics')">16. Analytics</li>
                        <li style="margin-bottom: 0.3rem; cursor: pointer;" onclick="scrollToManualSection('leads')">17. Lead Generation</li>
                    </ul>
                </div>
                <div>
                    <h4 style="color: var(--accent); margin-bottom: 0.5rem;">Settings</h4>
                    <ul style="list-style: none; font-size: 0.9rem;">
                        <li style="margin-bottom: 0.3rem; cursor: pointer;" onclick="scrollToManualSection('settings')">18. Settings</li>
                        <li style="margin-bottom: 0.3rem; cursor: pointer;" onclick="scrollToManualSection('tips')">19. Pro Tips</li>
                    </ul>
                </div>
            </div>
            <div class="grid-3" style="margin-top: 1rem;">
                <div>
                    <h4 style="color: #667eea; margin-bottom: 0.5rem;">&#129302; AI Tools</h4>
                    <ul style="list-style: none; font-size: 0.9rem;">
                        <li style="margin-bottom: 0.3rem; cursor: pointer;" onclick="scrollToManualSection('aiwriter')">20. AI Writer</li>
                        <li style="margin-bottom: 0.3rem; cursor: pointer;" onclick="scrollToManualSection('aiassistant')">21. AI Assistant</li>
                        <li style="margin-bottom: 0.3rem; cursor: pointer;" onclick="scrollToManualSection('aiproperty')">22. Property Analyzer</li>
                    </ul>
                </div>
                <div>
                    <h4 style="color: #667eea; margin-bottom: 0.5rem;">&#129302; More AI Tools</h4>
                    <ul style="list-style: none; font-size: 0.9rem;">
                        <li style="margin-bottom: 0.3rem; cursor: pointer;" onclick="scrollToManualSection('aimatcher')">23. Client Matcher</li>
                        <li style="margin-bottom: 0.3rem; cursor: pointer;" onclick="scrollToManualSection('aipredictor')">24. Market Predictor</li>
                        <li style="margin-bottom: 0.3rem; cursor: pointer;" onclick="scrollToManualSection('aiobjections')">25. Objection Handler</li>
                    </ul>
                </div>
                <div>
                    <h4 style="color: #667eea; margin-bottom: 0.5rem;">&#129302; Advanced AI</h4>
                    <ul style="list-style: none; font-size: 0.9rem;">
                        <li style="margin-bottom: 0.3rem; cursor: pointer;" onclick="scrollToManualSection('aineighborhood')">26. Neighborhood Expert</li>
                        <li style="margin-bottom: 0.3rem; cursor: pointer;" onclick="scrollToManualSection('aiopenhouse')">27. Open House AI</li>
                        <li style="margin-bottom: 0.3rem; cursor: pointer;" onclick="scrollToManualSection('aicontract')">28. Contract Reviewer</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- SECTION 1: WELCOME -->
        <div id="manual-welcome" class="card" style="border-left: 5px solid #667eea; margin-bottom: 2rem;">
            <h2 style="color: #667eea;">&#127881; 1. Welcome to Command Center V3 PRO!</h2>
            <div style="background: linear-gradient(135deg, #667eea, #764ba2); color: white; padding: 1.5rem; border-radius: 12px; margin: 1rem 0;">
                <h3>Ela, This Program Was Built For YOU!</h3>
                <p style="font-size: 1.1rem; margin-top: 0.5rem;">With 22 years of Cincinnati real estate experience, you have the knowledge. This program gives you the TOOLS to share that knowledge with the world and attract more clients than ever before.</p>
            </div>

            <h3 style="margin-top: 1.5rem;">What This Program Does For You:</h3>
            <div class="grid-2" style="margin-top: 1rem;">
                <div style="padding: 1rem; background: #e8f5e9; border-radius: 8px;">
                    <h4 style="color: var(--success);">&#128337; Saves You Time</h4>
                    <p style="font-size: 0.9rem; margin-top: 0.5rem;">No more staring at a blank screen. 100+ ready-to-post templates, AI content generation, and one-click hashtag sets mean you can create a week's worth of content in 30 minutes.</p>
                </div>
                <div style="padding: 1rem; background: #e3f2fd; border-radius: 8px;">
                    <h4 style="color: var(--primary);">&#128200; Keeps You Current</h4>
                    <p style="font-size: 0.9rem; margin-top: 0.5rem;">Live market data, current mortgage rates, and trending content ideas are updated regularly. You'll always know what's happening in Cincinnati real estate AND what's working on social media.</p>
                </div>
                <div style="padding: 1rem; background: #fff3e0; border-radius: 8px;">
                    <h4 style="color: #f39c12);">&#127919; Makes You Competitive</h4>
                    <p style="font-size: 0.9rem; margin-top: 0.5rem;">See exactly what top agents nationally AND in Cincinnati are doing. Study their strategies, adapt their best ideas, and position yourself as THE Cincinnati expert.</p>
                </div>
                <div style="padding: 1rem; background: #fce4ec; border-radius: 8px;">
                    <h4 style="color: var(--instagram);">&#128142; Generates Leads</h4>
                    <p style="font-size: 0.9rem; margin-top: 0.5rem;">Every feature is designed to attract potential clients. From lead-generating post templates to email nurture sequences, this program helps turn followers into clients.</p>
                </div>
            </div>

            <h3 style="margin-top: 1.5rem;">Your Daily Workflow (15 Minutes!):</h3>
            <ol style="margin-left: 1.5rem; margin-top: 1rem; font-size: 0.95rem; line-height: 1.8;">
                <li><strong>Check Dashboard</strong> - See today's market data and quick stats (1 min)</li>
                <li><strong>Scan News Feed</strong> - Find a headline that sparks content ideas (2 min)</li>
                <li><strong>Generate or Pick Content</strong> - Use AI Generator or Content Library (5 min)</li>
                <li><strong>Add Hashtags</strong> - Copy a pre-built hashtag set (1 min)</li>
                <li><strong>Post or Schedule</strong> - Send it live or schedule for optimal time (2 min)</li>
                <li><strong>Engage!</strong> - Respond to comments on previous posts (4 min)</li>
            </ol>
        </div>

        <!-- SECTION 2: DASHBOARD -->
        <div id="manual-dashboard" class="card" style="border-left: 5px solid var(--primary); margin-bottom: 2rem;">
            <h2 style="color: var(--primary);">&#127968; 2. Dashboard - Your Command Center</h2>

            <h3 style="margin-top: 1rem;">What It Does:</h3>
            <p style="font-size: 0.95rem;">The Dashboard is your home base - a snapshot of everything important at a glance. Current market data, quick actions, and your posting stats all in one place.</p>

            <h3 style="margin-top: 1.5rem;">How It Helps Your Business:</h3>
            <ul style="margin-left: 1.5rem; margin-top: 0.5rem; font-size: 0.95rem; line-height: 1.8;">
                <li><strong>Live Mortgage Rates</strong> - Share current rates with clients (currently ${LIVE_DATA.mortgageRate}%)</li>
                <li><strong>Cincinnati Market Stats</strong> - Median price, inventory, days on market</li>
                <li><strong>Quick Actions</strong> - One-click access to your most-used features</li>
                <li><strong>Today's Inspiration</strong> - Content idea to get you started</li>
            </ul>

            <h3 style="margin-top: 1.5rem;">Step-by-Step Guide:</h3>
            <div style="background: var(--pale-blue); padding: 1rem; border-radius: 8px; margin-top: 0.5rem;">
                <p style="margin-bottom: 0.5rem;"><strong>Step 1:</strong> Look at the rate card at the top - this updates regularly</p>
                <p style="margin-bottom: 0.5rem;"><strong>Step 2:</strong> Check the market stats - use these numbers in your posts!</p>
                <p style="margin-bottom: 0.5rem;"><strong>Step 3:</strong> Click any Quick Action button to jump to that feature</p>
                <p><strong>Step 4:</strong> Use "Today's Market Post" for instant content inspiration</p>
            </div>

            <h3 style="margin-top: 1.5rem;">&#128161; Pro Tips:</h3>
            <ul style="margin-left: 1.5rem; margin-top: 0.5rem; font-size: 0.95rem; line-height: 1.8;">
                <li><strong>Morning Ritual:</strong> Start every day on the Dashboard to see what's new</li>
                <li><strong>Quote the Numbers:</strong> "Rates are ${LIVE_DATA.mortgageRate}% today!" makes great Stories content</li>
                <li><strong>Track Your Progress:</strong> Watch your posting stats grow over time</li>
            </ul>
        </div>

        <!-- SECTION 3: NEWS FEED -->
        <div id="manual-news" class="card" style="border-left: 5px solid var(--success); margin-bottom: 2rem;">
            <h2 style="color: var(--success);">&#128240; 3. News Feed - Stay Current</h2>

            <h3 style="margin-top: 1rem;">What It Does:</h3>
            <p style="font-size: 0.95rem;">Aggregates 50+ real estate news sources so you always know what's happening. Cincinnati local news, national housing market updates, commercial real estate, and economic trends - all in one place.</p>

            <h3 style="margin-top: 1.5rem;">How It Helps Your Business:</h3>
            <ul style="margin-left: 1.5rem; margin-top: 0.5rem; font-size: 0.95rem; line-height: 1.8;">
                <li><strong>Content Ideas:</strong> Every headline can become a post or video</li>
                <li><strong>Expert Positioning:</strong> Sharing news makes you look informed and professional</li>
                <li><strong>Client Value:</strong> Your followers get market insights they can't get elsewhere</li>
                <li><strong>Conversation Starters:</strong> "Did you see that rates dropped?" sparks engagement</li>
            </ul>

            <h3 style="margin-top: 1.5rem;">Step-by-Step Guide:</h3>
            <div style="background: var(--pale-blue); padding: 1rem; border-radius: 8px; margin-top: 0.5rem;">
                <p style="margin-bottom: 0.5rem;"><strong>Step 1:</strong> Use the filter tabs (All, Cincinnati, National, Rates) to find relevant news</p>
                <p style="margin-bottom: 0.5rem;"><strong>Step 2:</strong> Click any headline to read more details</p>
                <p style="margin-bottom: 0.5rem;"><strong>Step 3:</strong> Click "Create Post" to turn that headline into content</p>
                <p><strong>Step 4:</strong> The AI Generator will pre-fill with the news topic!</p>
            </div>

            <h3 style="margin-top: 1.5rem;">&#128161; Pro Tips:</h3>
            <ul style="margin-left: 1.5rem; margin-top: 0.5rem; font-size: 0.95rem; line-height: 1.8;">
                <li><strong>Local First:</strong> Cincinnati news resonates more with your audience than national news</li>
                <li><strong>Add Your Take:</strong> Don't just share news - add YOUR expert opinion</li>
                <li><strong>Rate Changes:</strong> Mortgage rate news is GOLD - always post when rates move</li>
                <li><strong>Breaking News:</strong> Be first to share local news and you'll get more engagement</li>
            </ul>
        </div>

        <!-- SECTION 4: VIRAL REALTORS -->
        <div id="manual-viral" class="card" style="border-left: 5px solid #e74c3c; margin-bottom: 2rem;">
            <h2 style="color: #e74c3c;">&#128293; 4. Viral Realtors - Learn From The Best</h2>

            <h3 style="margin-top: 1rem;">What It Does:</h3>
            <p style="font-size: 0.95rem;">Tracks 20+ of the most successful real estate agents on social media - both nationally (the viral stars with millions of followers) and locally (top Cincinnati agents). See what content types, strategies, and approaches are working.</p>

            <h3 style="margin-top: 1.5rem;">How It Helps Your Business:</h3>
            <ul style="margin-left: 1.5rem; margin-top: 0.5rem; font-size: 0.95rem; line-height: 1.8;">
                <li><strong>Inspiration:</strong> See exactly what content is going viral right now</li>
                <li><strong>Strategy:</strong> Understand WHY certain content works and adapt it</li>
                <li><strong>Competitive Intel:</strong> Know what your Cincinnati competition is posting</li>
                <li><strong>Trend Spotting:</strong> Spot emerging content trends before everyone else</li>
            </ul>

            <h3 style="margin-top: 1.5rem;">Step-by-Step Guide:</h3>
            <div style="background: var(--pale-blue); padding: 1rem; border-radius: 8px; margin-top: 0.5rem;">
                <p style="margin-bottom: 0.5rem;"><strong>Step 1:</strong> Toggle between "National Stars" and "Cincinnati Top Agents"</p>
                <p style="margin-bottom: 0.5rem;"><strong>Step 2:</strong> Click "Study" on any agent to see their full profile</p>
                <p style="margin-bottom: 0.5rem;"><strong>Step 3:</strong> Read their "Top Content" and "Strategy Tips"</p>
                <p><strong>Step 4:</strong> Adapt their best ideas for YOUR Cincinnati audience</p>
            </div>

            <h3 style="margin-top: 1.5rem;">&#128161; Pro Tips:</h3>
            <ul style="margin-left: 1.5rem; margin-top: 0.5rem; font-size: 0.95rem; line-height: 1.8;">
                <li><strong>Don't Copy - Adapt:</strong> Take their FORMAT but use YOUR local content</li>
                <li><strong>Study the Hook:</strong> Notice how viral agents start their videos (first 3 seconds!)</li>
                <li><strong>Follow Them:</strong> Actually follow these agents on social media for daily inspiration</li>
                <li><strong>Weekly Study:</strong> Spend 15 minutes each week studying what's working</li>
            </ul>
        </div>

        <!-- SECTION 5: VIRAL CONTENT -->
        <div id="manual-viralcontent" class="card" style="border-left: 5px solid #9b59b6; margin-bottom: 2rem;">
            <h2 style="color: #9b59b6;">&#128165; 5. Viral Content - What's Working Now</h2>

            <h3 style="margin-top: 1rem;">What It Does:</h3>
            <p style="font-size: 0.95rem;">Shows you trending content formats and viral examples ranked by engagement. See exactly what types of posts are performing best in 2026 and get templates to create your own versions.</p>

            <h3 style="margin-top: 1.5rem;">How It Helps Your Business:</h3>
            <ul style="margin-left: 1.5rem; margin-top: 0.5rem; font-size: 0.95rem; line-height: 1.8;">
                <li><strong>Proven Formats:</strong> Don't guess - use formats that already work</li>
                <li><strong>Engagement Boost:</strong> Trending formats get more reach from algorithms</li>
                <li><strong>Time Saver:</strong> Stop experimenting and use what's working</li>
            </ul>

            <h3 style="margin-top: 1.5rem;">Step-by-Step Guide:</h3>
            <div style="background: var(--pale-blue); padding: 1rem; border-radius: 8px; margin-top: 0.5rem;">
                <p style="margin-bottom: 0.5rem;"><strong>Step 1:</strong> Review the "Trending Formats" ranked by engagement</p>
                <p style="margin-bottom: 0.5rem;"><strong>Step 2:</strong> Click any format to see examples and templates</p>
                <p style="margin-bottom: 0.5rem;"><strong>Step 3:</strong> Look at "Viral Examples" to see real posts that went viral</p>
                <p><strong>Step 4:</strong> Use "Adapt For" tips to make it Cincinnati-specific</p>
            </div>

            <h3 style="margin-top: 1.5rem;">&#128161; Pro Tips:</h3>
            <ul style="margin-left: 1.5rem; margin-top: 0.5rem; font-size: 0.95rem; line-height: 1.8;">
                <li><strong>Hot Take Videos:</strong> Controversial opinions get MASSIVE engagement</li>
                <li><strong>POV Format:</strong> "POV: You're a first-time buyer in Cincinnati" performs well</li>
                <li><strong>Day in the Life:</strong> People love seeing behind-the-scenes realtor content</li>
            </ul>
        </div>

        <!-- SECTION 6: COMPETITORS -->
        <div id="manual-competitors" class="card" style="border-left: 5px solid var(--navy); margin-bottom: 2rem;">
            <h2 style="color: var(--navy);">&#128373; 6. Competitor Intelligence</h2>

            <h3 style="margin-top: 1rem;">What It Does:</h3>
            <p style="font-size: 0.95rem;">Deep analysis of your top Cincinnati competitors - their strengths, weaknesses, marketing strategies, and how YOU can beat them. SWOT analysis and specific counter-strategies for each major competitor.</p>

            <h3 style="margin-top: 1.5rem;">How It Helps Your Business:</h3>
            <ul style="margin-left: 1.5rem; margin-top: 0.5rem; font-size: 0.95rem; line-height: 1.8;">
                <li><strong>Know Your Competition:</strong> See exactly what top agents are doing</li>
                <li><strong>Find Gaps:</strong> Identify weaknesses you can exploit</li>
                <li><strong>Differentiate:</strong> Position yourself uniquely against teams</li>
                <li><strong>Win More Listings:</strong> Know how to respond when clients mention competitors</li>
            </ul>

            <h3 style="margin-top: 1.5rem;">Step-by-Step Guide:</h3>
            <div style="background: var(--pale-blue); padding: 1rem; border-radius: 8px; margin-top: 0.5rem;">
                <p style="margin-bottom: 0.5rem;"><strong>Step 1:</strong> Review YOUR competitive advantages at the top</p>
                <p style="margin-bottom: 0.5rem;"><strong>Step 2:</strong> Click "Full Analysis" on any competitor</p>
                <p style="margin-bottom: 0.5rem;"><strong>Step 3:</strong> Study their strengths AND weaknesses</p>
                <p><strong>Step 4:</strong> Read "How You Beat Them" for specific strategies</p>
            </div>

            <h3 style="margin-top: 1.5rem;">&#128161; Pro Tips:</h3>
            <ul style="margin-left: 1.5rem; margin-top: 0.5rem; font-size: 0.95rem; line-height: 1.8;">
                <li><strong>Your Edge:</strong> 22 years experience + personal service beats any team</li>
                <li><strong>Talking Points:</strong> Practice responding when clients mention competitors</li>
                <li><strong>Content Angle:</strong> "I personally handle every detail" is your differentiator</li>
            </ul>
        </div>

        <!-- SECTION 7: HASHTAGS -->
        <div id="manual-hashtags" class="card" style="border-left: 5px solid #9c27b0; margin-bottom: 2rem;">
            <h2 style="color: #9c27b0;"># 7. Hashtag Research Center</h2>

            <h3 style="margin-top: 1rem;">What It Does:</h3>
            <p style="font-size: 0.95rem;">300+ researched hashtags organized by category with one-click copy. Pre-built hashtag sets optimized for different content types, platforms, and audiences. No more guessing which hashtags to use!</p>

            <h3 style="margin-top: 1.5rem;">How It Helps Your Business:</h3>
            <ul style="margin-left: 1.5rem; margin-top: 0.5rem; font-size: 0.95rem; line-height: 1.8;">
                <li><strong>More Reach:</strong> Right hashtags = more people see your content</li>
                <li><strong>Time Saver:</strong> One-click copy instead of typing hashtags manually</li>
                <li><strong>Local Focus:</strong> Cincinnati-specific hashtags attract local clients</li>
                <li><strong>Platform Optimized:</strong> Different sets for Instagram, TikTok, etc.</li>
            </ul>

            <h3 style="margin-top: 1.5rem;">Step-by-Step Guide:</h3>
            <div style="background: var(--pale-blue); padding: 1rem; border-radius: 8px; margin-top: 0.5rem;">
                <p style="margin-bottom: 0.5rem;"><strong>Step 1:</strong> Find the pre-built set that matches your content type</p>
                <p style="margin-bottom: 0.5rem;"><strong>Step 2:</strong> Click "Copy Set" - hashtags are copied to clipboard</p>
                <p style="margin-bottom: 0.5rem;"><strong>Step 3:</strong> Paste into your social media post</p>
                <p><strong>Step 4:</strong> Or build custom sets by clicking individual hashtags</p>
            </div>

            <h3 style="margin-top: 1.5rem;">&#128161; Pro Tips:</h3>
            <ul style="margin-left: 1.5rem; margin-top: 0.5rem; font-size: 0.95rem; line-height: 1.8;">
                <li><strong>Instagram:</strong> Use 25-30 hashtags for maximum reach</li>
                <li><strong>TikTok:</strong> Use only 5-7 hashtags - less is more</li>
                <li><strong>Mix Sizes:</strong> Combine big hashtags with niche local ones</li>
                <li><strong>First Comment:</strong> On Instagram, put hashtags in first comment, not caption</li>
            </ul>
        </div>

        <!-- SECTION 8: NEIGHBORHOODS -->
        <div id="manual-neighborhoods" class="card" style="border-left: 5px solid #27ae60; margin-bottom: 2rem;">
            <h2 style="color: #27ae60;">&#127969; 8. Cincinnati Neighborhood Reports</h2>

            <h3 style="margin-top: 1rem;">What It Does:</h3>
            <p style="font-size: 0.95rem;">Detailed market data for 8+ Cincinnati neighborhoods - median prices, appreciation rates, days on market, school ratings, walk scores, and highlights. Everything you need to create neighborhood spotlight content.</p>

            <h3 style="margin-top: 1.5rem;">How It Helps Your Business:</h3>
            <ul style="margin-left: 1.5rem; margin-top: 0.5rem; font-size: 0.95rem; line-height: 1.8;">
                <li><strong>Expert Content:</strong> Create "Neighborhood Guide" posts with real data</li>
                <li><strong>Client Conversations:</strong> Have stats ready when clients ask about areas</li>
                <li><strong>Niche Targeting:</strong> Become THE expert for specific neighborhoods</li>
                <li><strong>One-Click Posts:</strong> Generate neighborhood spotlights instantly</li>
            </ul>

            <h3 style="margin-top: 1.5rem;">Step-by-Step Guide:</h3>
            <div style="background: var(--pale-blue); padding: 1rem; border-radius: 8px; margin-top: 0.5rem;">
                <p style="margin-bottom: 0.5rem;"><strong>Step 1:</strong> Browse neighborhoods and their key stats</p>
                <p style="margin-bottom: 0.5rem;"><strong>Step 2:</strong> Click "Generate Post" on any neighborhood</p>
                <p style="margin-bottom: 0.5rem;"><strong>Step 3:</strong> The AI will create a neighborhood spotlight post</p>
                <p><strong>Step 4:</strong> Customize with your personal insights and post!</p>
            </div>

            <h3 style="margin-top: 1.5rem;">&#128161; Pro Tips:</h3>
            <ul style="margin-left: 1.5rem; margin-top: 0.5rem; font-size: 0.95rem; line-height: 1.8;">
                <li><strong>Neighborhood Series:</strong> Create a weekly "Neighborhood Spotlight" series</li>
                <li><strong>Video Tours:</strong> Film yourself in each neighborhood sharing these stats</li>
                <li><strong>Client Match:</strong> Match client needs to neighborhood data</li>
            </ul>
        </div>

        <!-- SECTION 9: AI GENERATOR -->
        <div id="manual-aigenerator" class="card" style="border-left: 5px solid #3498db; margin-bottom: 2rem;">
            <h2 style="color: #3498db;">&#129302; 9. AI Content Generator</h2>

            <h3 style="margin-top: 1rem;">What It Does:</h3>
            <p style="font-size: 0.95rem;">Generate custom social media posts in seconds! Select a content type, add your topic, and the AI creates a professional post with caption, hashtags, and best posting times. Works for market updates, listings, tips, testimonials, and more.</p>

            <h3 style="margin-top: 1.5rem;">How It Helps Your Business:</h3>
            <ul style="margin-left: 1.5rem; margin-top: 0.5rem; font-size: 0.95rem; line-height: 1.8;">
                <li><strong>Never Blank:</strong> End writer's block forever</li>
                <li><strong>Speed:</strong> Create posts in 30 seconds vs 30 minutes</li>
                <li><strong>Professional:</strong> Well-written content every time</li>
                <li><strong>Personalized:</strong> Uses YOUR name, market data, and Cincinnati focus</li>
            </ul>

            <h3 style="margin-top: 1.5rem;">Step-by-Step Guide:</h3>
            <div style="background: var(--pale-blue); padding: 1rem; border-radius: 8px; margin-top: 0.5rem;">
                <p style="margin-bottom: 0.5rem;"><strong>Step 1:</strong> Select post type (Market Update, Home Tips, etc.)</p>
                <p style="margin-bottom: 0.5rem;"><strong>Step 2:</strong> Choose platform (Instagram, Facebook, TikTok, etc.)</p>
                <p style="margin-bottom: 0.5rem;"><strong>Step 3:</strong> Enter your topic or leave blank for auto-topic</p>
                <p style="margin-bottom: 0.5rem;"><strong>Step 4:</strong> Click "Generate Content"</p>
                <p><strong>Step 5:</strong> Review, edit if needed, then copy or schedule!</p>
            </div>

            <h3 style="margin-top: 1.5rem;">&#128161; Pro Tips:</h3>
            <ul style="margin-left: 1.5rem; margin-top: 0.5rem; font-size: 0.95rem; line-height: 1.8;">
                <li><strong>Add Your Voice:</strong> Edit the generated content to sound like YOU</li>
                <li><strong>Be Specific:</strong> "Hyde Park market update" works better than just "market update"</li>
                <li><strong>Batch Create:</strong> Generate a week's worth of content in one sitting</li>
                <li><strong>Mix Types:</strong> Vary between educational, personal, and promotional content</li>
            </ul>
        </div>

        <!-- SECTION 10: CONTENT LIBRARY -->
        <div id="manual-contentlib" class="card" style="border-left: 5px solid var(--instagram); margin-bottom: 2rem;">
            <h2 style="color: var(--instagram);">&#128218; 10. Content Library</h2>

            <h3 style="margin-top: 1rem;">What It Does:</h3>
            <p style="font-size: 0.95rem;">100+ pre-written social media templates organized by platform (Instagram, Facebook) and content type (Market, Tips, Personal, Motivation, Listing, etc.). Ready to customize and post!</p>

            <h3 style="margin-top: 1.5rem;">How It Helps Your Business:</h3>
            <ul style="margin-left: 1.5rem; margin-top: 0.5rem; font-size: 0.95rem; line-height: 1.8;">
                <li><strong>Instant Content:</strong> Pick a template, customize, and post</li>
                <li><strong>Variety:</strong> Different types keep your feed interesting</li>
                <li><strong>Professional:</strong> Well-crafted captions with proven engagement</li>
                <li><strong>Time Saver:</strong> No need to write from scratch</li>
            </ul>

            <h3 style="margin-top: 1.5rem;">Step-by-Step Guide:</h3>
            <div style="background: var(--pale-blue); padding: 1rem; border-radius: 8px; margin-top: 0.5rem;">
                <p style="margin-bottom: 0.5rem;"><strong>Step 1:</strong> Select platform tab (Instagram, Facebook)</p>
                <p style="margin-bottom: 0.5rem;"><strong>Step 2:</strong> Filter by content type if desired</p>
                <p style="margin-bottom: 0.5rem;"><strong>Step 3:</strong> Click on any template card to expand</p>
                <p style="margin-bottom: 0.5rem;"><strong>Step 4:</strong> Click "Copy" to get the caption</p>
                <p><strong>Step 5:</strong> Paste into your social media app and customize!</p>
            </div>

            <h3 style="margin-top: 1.5rem;">&#128161; Pro Tips:</h3>
            <ul style="margin-left: 1.5rem; margin-top: 0.5rem; font-size: 0.95rem; line-height: 1.8;">
                <li><strong>Content Mix:</strong> Use the 80/20 rule - 80% value, 20% promotion</li>
                <li><strong>Customize:</strong> Replace [BRACKETS] with your specific details</li>
                <li><strong>Post Timing:</strong> Each template shows optimal posting times</li>
            </ul>
        </div>

        <!-- SECTION 11: VIDEO SCRIPTS -->
        <div id="manual-videoscripts" class="card" style="border-left: 5px solid var(--tiktok); margin-bottom: 2rem;">
            <h2 style="color: var(--tiktok);">&#127909; 11. Video Scripts</h2>

            <h3 style="margin-top: 1rem;">What It Does:</h3>
            <p style="font-size: 0.95rem;">Ready-to-film video scripts for TikTok, Instagram Reels, and YouTube Shorts. Each script includes timing, hooks, talking points, and pro filming tips. Ranges from 15-second quick tips to 60-second deep dives.</p>

            <h3 style="margin-top: 1.5rem;">How It Helps Your Business:</h3>
            <ul style="margin-left: 1.5rem; margin-top: 0.5rem; font-size: 0.95rem; line-height: 1.8;">
                <li><strong>Video is King:</strong> Video content gets 10x more engagement</li>
                <li><strong>No Guessing:</strong> Know exactly what to say and when</li>
                <li><strong>Confidence:</strong> Scripts help you speak naturally on camera</li>
                <li><strong>Quick Filming:</strong> 15-second scripts = fast content creation</li>
            </ul>

            <h3 style="margin-top: 1.5rem;">Step-by-Step Guide:</h3>
            <div style="background: var(--pale-blue); padding: 1rem; border-radius: 8px; margin-top: 0.5rem;">
                <p style="margin-bottom: 0.5rem;"><strong>Step 1:</strong> Browse scripts by duration (15s, 30s, 60s)</p>
                <p style="margin-bottom: 0.5rem;"><strong>Step 2:</strong> Click to expand any script</p>
                <p style="margin-bottom: 0.5rem;"><strong>Step 3:</strong> Read the hook, body, and CTA sections</p>
                <p style="margin-bottom: 0.5rem;"><strong>Step 4:</strong> Practice a few times, then film!</p>
                <p><strong>Step 5:</strong> Use the filming notes for camera angles and tips</p>
            </div>

            <h3 style="margin-top: 1.5rem;">&#128161; Pro Tips:</h3>
            <ul style="margin-left: 1.5rem; margin-top: 0.5rem; font-size: 0.95rem; line-height: 1.8;">
                <li><strong>Hook in 3 Seconds:</strong> The first line is everything - make it attention-grabbing</li>
                <li><strong>Natural Light:</strong> Film facing a window for best lighting</li>
                <li><strong>Eye Contact:</strong> Look at the camera lens like you're talking to a friend</li>
                <li><strong>Batch Film:</strong> Record 5-10 videos in one session, same outfit, same location</li>
            </ul>
        </div>

        <!-- SECTION 12: EMAIL TEMPLATES -->
        <div id="manual-email" class="card" style="border-left: 5px solid #3498db; margin-bottom: 2rem;">
            <h2 style="color: #3498db;">&#128231; 12. Email Templates</h2>

            <h3 style="margin-top: 1rem;">What It Does:</h3>
            <p style="font-size: 0.95rem;">20+ professionally written email templates for every stage of the client journey. New lead responses, buyer nurture sequences, seller follow-ups, past client touchpoints, and transaction updates.</p>

            <h3 style="margin-top: 1.5rem;">How It Helps Your Business:</h3>
            <ul style="margin-left: 1.5rem; margin-top: 0.5rem; font-size: 0.95rem; line-height: 1.8;">
                <li><strong>Fast Response:</strong> Respond to leads in minutes, not hours</li>
                <li><strong>Professional:</strong> Well-written emails build trust</li>
                <li><strong>Stay Top of Mind:</strong> Nurture sequences keep leads warm</li>
                <li><strong>Referral Generation:</strong> Past client templates generate referrals</li>
            </ul>

            <h3 style="margin-top: 1.5rem;">Step-by-Step Guide:</h3>
            <div style="background: var(--pale-blue); padding: 1rem; border-radius: 8px; margin-top: 0.5rem;">
                <p style="margin-bottom: 0.5rem;"><strong>Step 1:</strong> Browse categories (New Lead, Buyer, Seller, etc.)</p>
                <p style="margin-bottom: 0.5rem;"><strong>Step 2:</strong> Click on the template you need</p>
                <p style="margin-bottom: 0.5rem;"><strong>Step 3:</strong> Copy the subject line and body</p>
                <p style="margin-bottom: 0.5rem;"><strong>Step 4:</strong> Replace [BRACKETS] with personalized info</p>
                <p><strong>Step 5:</strong> Send from your email client</p>
            </div>

            <h3 style="margin-top: 1.5rem;">&#128161; Pro Tips:</h3>
            <ul style="margin-left: 1.5rem; margin-top: 0.5rem; font-size: 0.95rem; line-height: 1.8;">
                <li><strong>Speed Wins:</strong> Respond to new leads within 5 minutes</li>
                <li><strong>Personalize:</strong> Use their name and specific details</li>
                <li><strong>Follow Up:</strong> 80% of sales require 5+ follow-ups</li>
                <li><strong>Set Reminders:</strong> Schedule follow-up emails in your calendar</li>
            </ul>
        </div>

        <!-- SECTION 13-19 CONTINUE... -->
        <div id="manual-scheduler" class="card" style="border-left: 5px solid #f39c12; margin-bottom: 2rem;">
            <h2 style="color: #f39c12;">&#128197; 13. Post Scheduler</h2>
            <h3 style="margin-top: 1rem;">What It Does:</h3>
            <p style="font-size: 0.95rem;">Plan and schedule your posts in advance with a visual calendar. See what you've scheduled, drag to reschedule, and maintain a consistent posting schedule.</p>
            <h3 style="margin-top: 1rem;">&#128161; Pro Tip:</h3>
            <p style="font-size: 0.95rem;">Batch your content creation! Spend 1-2 hours on Sunday scheduling the entire week's content.</p>
        </div>

        <div id="manual-directpost" class="card" style="border-left: 5px solid var(--success); margin-bottom: 2rem;">
            <h2 style="color: var(--success);">&#128228; 14. Direct Posting</h2>
            <h3 style="margin-top: 1rem;">What It Does:</h3>
            <p style="font-size: 0.95rem;">Copy your finalized content and post immediately to any platform. Platform-specific formatting ensures your content looks great everywhere.</p>
            <h3 style="margin-top: 1rem;">&#128161; Pro Tip:</h3>
            <p style="font-size: 0.95rem;">Post at peak times: Instagram 11am-1pm & 7-9pm, Facebook 1-4pm, TikTok 7-9pm</p>
        </div>

        <div id="manual-autopost" class="card" style="border-left: 5px solid #9b59b6; margin-bottom: 2rem;">
            <h2 style="color: #9b59b6;">&#128640; 15. Auto-Post Setup</h2>
            <h3 style="margin-top: 1rem;">What It Does:</h3>
            <p style="font-size: 0.95rem;">Connect your social media accounts for automated posting. Set it and forget it - your content goes live at optimal times automatically.</p>
            <h3 style="margin-top: 1rem;">&#128161; Pro Tip:</h3>
            <p style="font-size: 0.95rem;">Even with auto-posting, log in daily to respond to comments and messages!</p>
        </div>

        <div id="manual-analytics" class="card" style="border-left: 5px solid #1abc9c; margin-bottom: 2rem;">
            <h2 style="color: #1abc9c;">&#128202; 16. Analytics Dashboard</h2>
            <h3 style="margin-top: 1rem;">What It Does:</h3>
            <p style="font-size: 0.95rem;">Track your posting consistency, engagement rates, and growth over time. See which content types perform best and optimize your strategy.</p>
            <h3 style="margin-top: 1rem;">&#128161; Pro Tip:</h3>
            <p style="font-size: 0.95rem;">Review analytics weekly. Double down on what works, stop what doesn't.</p>
        </div>

        <div id="manual-leads" class="card" style="border-left: 5px solid #e67e22; margin-bottom: 2rem;">
            <h2 style="color: #e67e22;">&#128101; 17. Lead Generation</h2>
            <h3 style="margin-top: 1rem;">What It Does:</h3>
            <p style="font-size: 0.95rem;">Content ideas specifically designed to generate leads - calls-to-action, lead magnets, and engagement hooks that turn followers into clients.</p>
            <h3 style="margin-top: 1rem;">&#128161; Pro Tip:</h3>
            <p style="font-size: 0.95rem;">End every post with a CTA: "DM me for...", "Comment below if...", "Link in bio for..."</p>
        </div>

        <div id="manual-settings" class="card" style="border-left: 5px solid var(--gray); margin-bottom: 2rem;">
            <h2 style="color: var(--gray);">&#9881; 18. Settings</h2>
            <h3 style="margin-top: 1rem;">What It Does:</h3>
            <p style="font-size: 0.95rem;">Customize your profile information, social media links, and preferences. Your info is used throughout the program for personalized content.</p>
            <h3 style="margin-top: 1rem;">&#128161; Pro Tip:</h3>
            <p style="font-size: 0.95rem;">Keep your phone number and website updated - they appear in generated content!</p>
        </div>

        <!-- SECTION 19: PRO TIPS -->
        <div id="manual-tips" class="card" style="border-left: 5px solid var(--accent); margin-bottom: 2rem;">
            <h2 style="color: #f39c12;">&#127942; 19. Ela's Pro Tips for Success</h2>

            <div class="grid-2" style="margin-top: 1rem;">
                <div style="padding: 1rem; background: #fff3e0; border-radius: 8px;">
                    <h4>&#128337; Time Management</h4>
                    <ul style="margin-left: 1.2rem; font-size: 0.9rem; margin-top: 0.5rem;">
                        <li>15 minutes daily beats 2 hours once a week</li>
                        <li>Batch content creation on Sundays</li>
                        <li>Use scheduled posts to stay consistent</li>
                        <li>Set phone reminders to engage with comments</li>
                    </ul>
                </div>
                <div style="padding: 1rem; background: #e8f5e9; border-radius: 8px;">
                    <h4>&#128200; Growth Strategies</h4>
                    <ul style="margin-left: 1.2rem; font-size: 0.9rem; margin-top: 0.5rem;">
                        <li>Post consistently (5-7x/week minimum)</li>
                        <li>Engage with local accounts daily</li>
                        <li>Use Stories for casual, daily content</li>
                        <li>Reels/TikTok for maximum reach</li>
                    </ul>
                </div>
                <div style="padding: 1rem; background: #e3f2fd; border-radius: 8px;">
                    <h4>&#128161; Content That Converts</h4>
                    <ul style="margin-left: 1.2rem; font-size: 0.9rem; margin-top: 0.5rem;">
                        <li>80% value, 20% promotion</li>
                        <li>Show your personality!</li>
                        <li>Local content > generic content</li>
                        <li>Video > Images > Text-only</li>
                    </ul>
                </div>
                <div style="padding: 1rem; background: #fce4ec; border-radius: 8px;">
                    <h4>&#128170; Your Advantage</h4>
                    <ul style="margin-left: 1.2rem; font-size: 0.9rem; margin-top: 0.5rem;">
                        <li>22 years experience - USE IT!</li>
                        <li>Personal service beats big teams</li>
                        <li>You know Cincinnati - show it</li>
                        <li>Your stories are your content</li>
                    </ul>
                </div>
            </div>

            <div style="background: linear-gradient(135deg, #667eea, #764ba2); color: white; padding: 1.5rem; border-radius: 12px; margin-top: 1.5rem; text-align: center;">
                <h3>You've Got This, Ela! &#128170;</h3>
                <p style="font-size: 1.1rem; margin-top: 0.5rem;">With your 22 years of experience and this Command Center, you have everything you need to dominate social media and attract more clients than ever before!</p>
                <p style="margin-top: 1rem; font-size: 0.9rem; opacity: 0.9;">Questions? Just explore each section - click around and discover all the features!</p>
            </div>
        </div>

        <!-- AI TOOLS SECTION HEADER -->
        <div style="background: linear-gradient(135deg, #667eea, #764ba2); padding: 2rem; border-radius: 15px; margin: 2rem 0; text-align: center;">
            <h2 style="color: white; margin-bottom: 0.5rem;">&#129302; AI-Powered Tools</h2>
            <p style="color: rgba(255,255,255,0.9); font-size: 1.1rem;">9 Premium AI Tools Powered by Gemini 3 Flash - Generate Content, Analyze Properties, and More!</p>
        </div>

        <!-- SECTION 20: AI WRITER -->
        <div id="manual-aiwriter" class="card" style="border-left: 5px solid #667eea; margin-bottom: 2rem;">
            <h2 style="color: #667eea;">&#129302; 20. AI Content Writer</h2>
            <h3 style="margin-top: 1rem;">What It Does:</h3>
            <p style="font-size: 0.95rem;">Your personal AI copywriter that generates professional real estate content in seconds. Creates listing descriptions, social media posts, email campaigns, bios, captions, hashtags, and market reports - all tailored for Cincinnati real estate.</p>
            <h3 style="margin-top: 1.5rem;">Features:</h3>
            <ul style="margin-left: 1.5rem; margin-top: 0.5rem; font-size: 0.95rem; line-height: 1.8;">
                <li><strong>Listing Descriptions:</strong> Enter property details and get MLS-ready descriptions instantly</li>
                <li><strong>Social Posts:</strong> Generate platform-optimized posts for Instagram, Facebook, TikTok, LinkedIn</li>
                <li><strong>Email Writer:</strong> Create follow-up emails, listing alerts, market updates, and drip campaigns</li>
                <li><strong>Bio Generator:</strong> Create professional agent bios for any platform</li>
                <li><strong>Captions & Hashtags:</strong> Generate engaging captions with optimized hashtag sets</li>
                <li><strong>Market Reports:</strong> Create neighborhood and market update content</li>
            </ul>
            <h3 style="margin-top: 1.5rem;">&#128161; How To Use:</h3>
            <div style="background: var(--pale-blue); padding: 1rem; border-radius: 8px;">
                <p><strong>Step 1:</strong> Select content type (Listings, Social, Email, etc.)</p>
                <p><strong>Step 2:</strong> Fill in the form with your details</p>
                <p><strong>Step 3:</strong> Click "Generate" and wait 5-10 seconds</p>
                <p><strong>Step 4:</strong> Copy, edit if needed, and use!</p>
            </div>
        </div>

        <!-- SECTION 21: AI ASSISTANT -->
        <div id="manual-aiassistant" class="card" style="border-left: 5px solid #667eea; margin-bottom: 2rem;">
            <h2 style="color: #667eea;">&#128172; 21. AI Assistant</h2>
            <h3 style="margin-top: 1rem;">What It Does:</h3>
            <p style="font-size: 0.95rem;">Your smart CRM helper that analyzes leads, predicts which ones are most likely to convert, and suggests what to do next. Like having a sales coach watching your pipeline 24/7.</p>
            <h3 style="margin-top: 1.5rem;">Features:</h3>
            <ul style="margin-left: 1.5rem; margin-top: 0.5rem; font-size: 0.95rem; line-height: 1.8;">
                <li><strong>AI Lead Scoring:</strong> Automatically scores leads 0-100 based on timeline, budget, pre-approval status</li>
                <li><strong>Response Suggestions:</strong> AI recommends what to say and when to follow up</li>
                <li><strong>Market Insights:</strong> Real-time opportunities based on rate changes and market conditions</li>
                <li><strong>Content Recommendations:</strong> AI suggests what content to create based on engagement</li>
            </ul>
            <h3 style="margin-top: 1.5rem;">&#128161; Pro Tip:</h3>
            <p style="font-size: 0.95rem;">Add leads in the Lead Generator first - the AI Assistant analyzes your lead database to provide personalized recommendations!</p>
        </div>

        <!-- SECTION 22: PROPERTY ANALYZER -->
        <div id="manual-aiproperty" class="card" style="border-left: 5px solid #667eea; margin-bottom: 2rem;">
            <h2 style="color: #667eea;">&#127969; 22. AI Property Analyzer</h2>
            <h3 style="margin-top: 1rem;">What It Does:</h3>
            <p style="font-size: 0.95rem;">Instant property valuations and market analysis. Enter property details and get estimated value ranges, price per square foot comparisons, comparable sales analysis, investment metrics, and selling strategy recommendations.</p>
            <h3 style="margin-top: 1.5rem;">Features:</h3>
            <ul style="margin-left: 1.5rem; margin-top: 0.5rem; font-size: 0.95rem; line-height: 1.8;">
                <li><strong>Value Estimates:</strong> Low, mid, and high price ranges based on property details</li>
                <li><strong>Comparable Sales:</strong> AI generates hypothetical comps based on market data</li>
                <li><strong>Investment Analysis:</strong> Potential rental income and cap rate estimates</li>
                <li><strong>Days on Market:</strong> Prediction based on price and condition</li>
                <li><strong>Selling Strategy:</strong> Recommended list price and marketing approach</li>
            </ul>
            <h3 style="margin-top: 1.5rem;">&#128161; Use Cases:</h3>
            <ul style="margin-left: 1.5rem; font-size: 0.95rem;">
                <li>Preparing CMAs for listing presentations</li>
                <li>Quick estimates when clients ask about property values</li>
                <li>Investment analysis for investor clients</li>
            </ul>
        </div>

        <!-- SECTION 23: CLIENT MATCHER -->
        <div id="manual-aimatcher" class="card" style="border-left: 5px solid #667eea; margin-bottom: 2rem;">
            <h2 style="color: #667eea;">&#129309; 23. AI Client Matcher</h2>
            <h3 style="margin-top: 1rem;">What It Does:</h3>
            <p style="font-size: 0.95rem;">Automatically matches your leads to properties (and vice versa). Enter a new listing and see which clients from your database are the best matches. Or select a client and get property recommendations based on their criteria.</p>
            <h3 style="margin-top: 1.5rem;">Two-Way Matching:</h3>
            <ul style="margin-left: 1.5rem; margin-top: 0.5rem; font-size: 0.95rem; line-height: 1.8;">
                <li><strong>Property â†’ Clients:</strong> Got a new listing? Find matching buyers from your database instantly</li>
                <li><strong>Client â†’ Properties:</strong> Working with a buyer? Get AI recommendations for their ideal home</li>
            </ul>
            <h3 style="margin-top: 1.5rem;">&#128161; How To Use:</h3>
            <div style="background: var(--pale-blue); padding: 1rem; border-radius: 8px;">
                <p><strong>To find clients for a listing:</strong> Enter listing details â†’ Click "Find Matching Clients" â†’ See ranked matches with contact suggestions</p>
                <p style="margin-top: 0.5rem;"><strong>To find properties for a client:</strong> Select a lead from dropdown â†’ Click "Find Matching Properties" â†’ Get neighborhood and property recommendations</p>
            </div>
        </div>

        <!-- SECTION 24: MARKET PREDICTOR -->
        <div id="manual-aipredictor" class="card" style="border-left: 5px solid #667eea; margin-bottom: 2rem;">
            <h2 style="color: #667eea;">&#128202; 24. AI Market Predictor</h2>
            <h3 style="margin-top: 1rem;">What It Does:</h3>
            <p style="font-size: 0.95rem;">Forecasts market trends, price movements, and optimal timing for buying/selling. Uses current market data to generate AI-powered predictions for different timeframes and neighborhoods.</p>
            <h3 style="margin-top: 1.5rem;">Prediction Types:</h3>
            <ul style="margin-left: 1.5rem; margin-top: 0.5rem; font-size: 0.95rem; line-height: 1.8;">
                <li><strong>Price Movement:</strong> Where are home prices headed?</li>
                <li><strong>Interest Rates:</strong> Rate trend forecasts</li>
                <li><strong>Inventory:</strong> Housing supply predictions</li>
                <li><strong>Neighborhood Growth:</strong> Which areas are appreciating fastest?</li>
                <li><strong>Timing:</strong> Best time to buy or sell</li>
                <li><strong>Comprehensive:</strong> Full market outlook report</li>
            </ul>
            <h3 style="margin-top: 1.5rem;">&#128161; Great For:</h3>
            <p style="font-size: 0.95rem;">Client consultations, listing presentations, buyer counseling, and creating market update content for social media!</p>
        </div>

        <!-- SECTION 25: OBJECTION HANDLER -->
        <div id="manual-aiobjections" class="card" style="border-left: 5px solid #667eea; margin-bottom: 2rem;">
            <h2 style="color: #667eea;">&#128173; 25. AI Objection Handler</h2>
            <h3 style="margin-top: 1rem;">What It Does:</h3>
            <p style="font-size: 0.95rem;">Your personal sales coach! Enter any buyer or seller objection and get AI-powered response strategies with exact scripts. Includes common objections like "rates are too high," "commission is too high," "I want to wait," and more.</p>
            <h3 style="margin-top: 1.5rem;">Response Styles:</h3>
            <ul style="margin-left: 1.5rem; margin-top: 0.5rem; font-size: 0.95rem; line-height: 1.8;">
                <li><strong>Empathetic:</strong> Acknowledge concerns and build rapport</li>
                <li><strong>Data-Driven:</strong> Use market statistics and logic</li>
                <li><strong>Storytelling:</strong> Relatable examples and scenarios</li>
                <li><strong>Urgency:</strong> Highlight opportunity costs</li>
            </ul>
            <h3 style="margin-top: 1.5rem;">&#128161; Common Objections Covered:</h3>
            <p style="font-size: 0.95rem;">Interest rates too high, prices too high, want to wait, not ready, need to sell first, commission too high, want to sell myself (FSBO), and many more!</p>
        </div>

        <!-- SECTION 26: NEIGHBORHOOD EXPERT -->
        <div id="manual-aineighborhood" class="card" style="border-left: 5px solid #667eea; margin-bottom: 2rem;">
            <h2 style="color: #667eea;">&#127961; 26. AI Neighborhood Expert</h2>
            <h3 style="margin-top: 1rem;">What It Does:</h3>
            <p style="font-size: 0.95rem;">Instant neighborhood information for any Greater Cincinnati location. Enter a neighborhood name and get detailed info on schools, safety, dining, shopping, commute, parks, nightlife, and family-friendliness - tailored to different client types.</p>
            <h3 style="margin-top: 1.5rem;">Information Includes:</h3>
            <ul style="margin-left: 1.5rem; margin-top: 0.5rem; font-size: 0.95rem; line-height: 1.8;">
                <li><strong>Overview:</strong> What makes the neighborhood special</li>
                <li><strong>Real Estate:</strong> Typical home prices and styles</li>
                <li><strong>Lifestyle:</strong> The vibe and who lives there</li>
                <li><strong>Pros & Cons:</strong> Honest assessment</li>
                <li><strong>Insider Tips:</strong> Things only locals know</li>
            </ul>
            <h3 style="margin-top: 1.5rem;">&#128161; Pro Tip:</h3>
            <p style="font-size: 0.95rem;">Use this before buyer consultations to quickly become an expert on any neighborhood your clients are considering!</p>
        </div>

        <!-- SECTION 27: OPEN HOUSE AI -->
        <div id="manual-aiopenhouse" class="card" style="border-left: 5px solid #667eea; margin-bottom: 2rem;">
            <h2 style="color: #667eea;">&#127970; 27. AI Open House Assistant</h2>
            <h3 style="margin-top: 1rem;">What It Does:</h3>
            <p style="font-size: 0.95rem;">Complete open house preparation in one click. Enter property details and get talking points, anticipated questions with answers, objection responses, neighborhood highlights, and follow-up email scripts for different visitor types.</p>
            <h3 style="margin-top: 1.5rem;">Features:</h3>
            <ul style="margin-left: 1.5rem; margin-top: 0.5rem; font-size: 0.95rem; line-height: 1.8;">
                <li><strong>Property Highlights:</strong> Key selling points to emphasize</li>
                <li><strong>Tour Script:</strong> How to guide visitors through the home</li>
                <li><strong>Q&A:</strong> 10+ common questions with prepared answers</li>
                <li><strong>Follow-up Generator:</strong> Personalized emails for hot, warm, and cold leads</li>
            </ul>
            <h3 style="margin-top: 1.5rem;">&#128161; Quick Follow-up:</h3>
            <p style="font-size: 0.95rem;">After the open house, enter visitor names and notes to generate personalized follow-up emails instantly!</p>
        </div>

        <!-- SECTION 28: CONTRACT REVIEWER -->
        <div id="manual-aicontract" class="card" style="border-left: 5px solid #667eea; margin-bottom: 2rem;">
            <h2 style="color: #667eea;">&#128220; 28. AI Contract Reviewer</h2>
            <h3 style="margin-top: 1rem;">What It Does:</h3>
            <p style="font-size: 0.95rem;">Get AI analysis of contract terms, clauses, and potential issues. Paste contract language and get explanations, risk assessments, and recommendations - whether you're representing buyers or sellers.</p>
            <div style="background: #fff3cd; padding: 1rem; border-radius: 8px; margin: 1rem 0;">
                <strong>&#9888; Important:</strong> This tool provides general guidance only. It is NOT legal advice. Always consult a licensed attorney for contract review.
            </div>
            <h3 style="margin-top: 1rem;">Analysis Includes:</h3>
            <ul style="margin-left: 1.5rem; margin-top: 0.5rem; font-size: 0.95rem; line-height: 1.8;">
                <li><strong>Summary:</strong> What the terms mean in plain English</li>
                <li><strong>Key Points:</strong> Important elements for your side</li>
                <li><strong>Risks:</strong> What could go wrong</li>
                <li><strong>Favorable vs Unfavorable:</strong> What works for/against you</li>
                <li><strong>Recommended Changes:</strong> Specific language suggestions</li>
                <li><strong>Red Flags:</strong> Concerning language to watch for</li>
            </ul>
            <h3 style="margin-top: 1.5rem;">&#128161; Use Cases:</h3>
            <p style="font-size: 0.95rem;">Understanding inspection contingencies, financing terms, earnest money clauses, closing conditions, and more!</p>
        </div>

        <!-- API TESTING SECTION -->
        <div class="card" style="border-left: 5px solid #22c55e; margin-bottom: 2rem;">
            <h2 style="color: #22c55e;">&#128268; How To Test If The AI Is Working</h2>
            <h3 style="margin-top: 1rem;">To test that the Gemini API is properly configured:</h3>
            <ol style="margin-left: 1.5rem; margin-top: 0.5rem; font-size: 0.95rem; line-height: 1.8;">
                <li><strong>Go to AI Writer</strong> in the sidebar</li>
                <li><strong>Enter a simple listing:</strong> Just an address, 3 beds, 2 baths, 2000 sq ft</li>
                <li><strong>Click "Generate Listing Content"</strong></li>
                <li><strong>Wait 5-10 seconds</strong> - you should see AI-generated content appear</li>
            </ol>
            <h3 style="margin-top: 1rem;">If you see an error:</h3>
            <ul style="margin-left: 1.5rem; font-size: 0.95rem; line-height: 1.8;">
                <li><strong>"API key not configured"</strong> - The GEMINI_API_KEY environment variable is not set in Netlify</li>
                <li><strong>"Connection error"</strong> - Check your internet connection or try again</li>
                <li><strong>Other errors</strong> - Check that the API key is valid at aistudio.google.com/apikey</li>
            </ul>
            <h3 style="margin-top: 1rem;">To set up the API key in Netlify:</h3>
            <div style="background: var(--pale-blue); padding: 1rem; border-radius: 8px;">
                <p><strong>Step 1:</strong> Go to app.netlify.com and log in</p>
                <p><strong>Step 2:</strong> Select your ela-command-center site</p>
                <p><strong>Step 3:</strong> Go to Site Settings â†’ Environment Variables</p>
                <p><strong>Step 4:</strong> Add variable: Key = <code>GEMINI_API_KEY</code>, Value = your API key</p>
                <p><strong>Step 5:</strong> Redeploy the site (Deploys â†’ Trigger Deploy)</p>
            </div>
        </div>
    </section>`;
}

function scrollToManualSection(sectionId) {
    const element = document.getElementById('manual-' + sectionId);
    if (element) {
        element.scrollIntoView({ behavior: 'smooth', block: 'start' });
    }
}

// ========== AI WRITER - Premium AI Content Generation ==========
function renderAIWriter() {
    return `
    <section class="page-section" id="page-ai-writer">
        <div class="page-header" style="background: linear-gradient(135deg, #667eea, #764ba2);">
            <h2>&#129302; AI Content Writer</h2>
            <p>Enterprise-grade AI content generation powered by advanced language models</p>
        </div>

        <!-- AI CONTENT TABS -->
        <div class="card" style="margin-bottom: 1rem;">
            <div style="display: flex; gap: 0.5rem; flex-wrap: wrap;">
                <button class="btn btn-primary" onclick="showAIWriterTab('listing')">&#127968; Listing Descriptions</button>
                <button class="btn" onclick="showAIWriterTab('social')">&#128241; Social Posts</button>
                <button class="btn" onclick="showAIWriterTab('email')">&#128231; Email Writer</button>
                <button class="btn" onclick="showAIWriterTab('bio')">&#128100; Bio Generator</button>
                <button class="btn" onclick="showAIWriterTab('captions')">&#128172; Captions & Hashtags</button>
                <button class="btn" onclick="showAIWriterTab('market')">&#128200; Market Reports</button>
            </div>
        </div>

        <div id="ai-writer-content">
            ${renderAIListingTab()}
        </div>
    </section>`;
}

function showAIWriterTab(tab) {
    const content = document.getElementById('ai-writer-content');
    const tabs = { listing: renderAIListingTab, social: renderAISocialTab, email: renderAIEmailTab, bio: renderAIBioTab, captions: renderAICaptionsTab, market: renderAIMarketTab };
    content.innerHTML = tabs[tab]();
}

function renderAIListingTab() {
    return `
        <div class="grid-2">
            <div class="card">
                <div class="card-header">
                    <span class="card-title">&#127968; AI Listing Description Generator</span>
                    <span class="badge" style="background: linear-gradient(135deg, #667eea, #764ba2); color: white;">PRO</span>
                </div>
                <p style="font-size: 0.85rem; color: #666; margin-bottom: 1rem;">Generate compelling MLS descriptions, social media listing posts, and property highlights instantly</p>

                <div style="margin-bottom: 1rem;">
                    <label class="form-label">Property Address</label>
                    <input type="text" id="ai-listing-address" class="form-input" placeholder="123 Main St, Cincinnati, OH 45202">
                </div>

                <div class="grid-2" style="margin-bottom: 1rem;">
                    <div>
                        <label class="form-label">Price</label>
                        <input type="text" id="ai-listing-price" class="form-input" placeholder="$450,000">
                    </div>
                    <div>
                        <label class="form-label">Property Type</label>
                        <select id="ai-listing-type" class="form-input">
                            <option>Single Family Home</option>
                            <option>Condo/Townhouse</option>
                            <option>Multi-Family</option>
                            <option>Luxury Estate</option>
                            <option>Investment Property</option>
                            <option>New Construction</option>
                        </select>
                    </div>
                </div>

                <div class="grid-4" style="margin-bottom: 1rem;">
                    <div>
                        <label class="form-label">Beds</label>
                        <input type="number" id="ai-listing-beds" class="form-input" placeholder="4">
                    </div>
                    <div>
                        <label class="form-label">Baths</label>
                        <input type="text" id="ai-listing-baths" class="form-input" placeholder="2.5">
                    </div>
                    <div>
                        <label class="form-label">Sq Ft</label>
                        <input type="text" id="ai-listing-sqft" class="form-input" placeholder="2,500">
                    </div>
                    <div>
                        <label class="form-label">Year Built</label>
                        <input type="text" id="ai-listing-year" class="form-input" placeholder="2015">
                    </div>
                </div>

                <div style="margin-bottom: 1rem;">
                    <label class="form-label">Key Features (comma separated)</label>
                    <textarea id="ai-listing-features" class="form-input" rows="2" placeholder="Updated kitchen, hardwood floors, finished basement, large backyard, 2-car garage"></textarea>
                </div>

                <div style="margin-bottom: 1rem;">
                    <label class="form-label">Neighborhood Highlights</label>
                    <textarea id="ai-listing-neighborhood" class="form-input" rows="2" placeholder="Near top-rated schools, walking distance to shops, quiet cul-de-sac"></textarea>
                </div>

                <div class="grid-2" style="margin-bottom: 1rem;">
                    <div>
                        <label class="form-label">Tone</label>
                        <select id="ai-listing-tone" class="form-input">
                            <option>Professional & Elegant</option>
                            <option>Warm & Inviting</option>
                            <option>Luxury & Exclusive</option>
                            <option>Family-Friendly</option>
                            <option>Investment-Focused</option>
                            <option>First-Time Buyer Friendly</option>
                        </select>
                    </div>
                    <div>
                        <label class="form-label">Output Type</label>
                        <select id="ai-listing-output" class="form-input">
                            <option>MLS Description (Full)</option>
                            <option>MLS Description (Short)</option>
                            <option>Instagram Caption</option>
                            <option>Facebook Post</option>
                            <option>Email Announcement</option>
                            <option>All Formats</option>
                        </select>
                    </div>
                </div>

                <button class="btn btn-gradient btn-lg" style="width: 100%;" onclick="generateAIListing()">&#129302; Generate Listing Content</button>
            </div>

            <div class="card">
                <div class="card-header">
                    <span class="card-title">&#128196; Generated Content</span>
                    <button class="btn btn-sm" onclick="copyAIContent('ai-listing-output-text')">&#128203; Copy All</button>
                </div>
                <div id="ai-listing-output-text" style="background: #f8f9fa; padding: 1rem; border-radius: 8px; min-height: 400px; white-space: pre-wrap; font-size: 0.9rem;">
                    <p style="color: #666; text-align: center; margin-top: 150px;">Your AI-generated listing content will appear here...</p>
                </div>
                <div style="display: flex; gap: 0.5rem; margin-top: 1rem;">
                    <button class="btn btn-success" onclick="regenerateAIListing()">&#128260; Regenerate</button>
                    <button class="btn" onclick="refineAIListing()">&#9999; Refine</button>
                    <button class="btn btn-primary" onclick="saveAIListing()">&#128190; Save to Library</button>
                </div>
            </div>
        </div>

        <!-- QUICK TEMPLATES -->
        <div class="card" style="margin-top: 1rem;">
            <div class="card-header"><span class="card-title">&#9889; Quick Listing Templates</span></div>
            <div class="grid-4">
                <div style="padding: 1rem; background: linear-gradient(135deg, #667eea20, #764ba220); border-radius: 8px; cursor: pointer;" onclick="loadListingTemplate('justlisted')">
                    <h4 style="color: #667eea;">&#127881; Just Listed</h4>
                    <p style="font-size: 0.8rem; color: #666;">Excitement-focused announcement</p>
                </div>
                <div style="padding: 1rem; background: linear-gradient(135deg, #f3920020, #f5af1920); border-radius: 8px; cursor: pointer;" onclick="loadListingTemplate('openhouse')">
                    <h4 style="color: #f39200;">&#127968; Open House</h4>
                    <p style="font-size: 0.8rem; color: #666;">Event-driven with urgency</p>
                </div>
                <div style="padding: 1rem; background: linear-gradient(135deg, #4ade8020, #22c55e20); border-radius: 8px; cursor: pointer;" onclick="loadListingTemplate('pricedrop')">
                    <h4 style="color: #22c55e;">&#128181; Price Reduced</h4>
                    <p style="font-size: 0.8rem; color: #666;">Value opportunity focused</p>
                </div>
                <div style="padding: 1rem; background: linear-gradient(135deg, #e74c3c20, #c0392b20); border-radius: 8px; cursor: pointer;" onclick="loadListingTemplate('luxury')">
                    <h4 style="color: #e74c3c;">&#128142; Luxury Showcase</h4>
                    <p style="font-size: 0.8rem; color: #666;">Premium & exclusive tone</p>
                </div>
            </div>
        </div>`;
}

function renderAISocialTab() {
    return `
        <div class="grid-2">
            <div class="card">
                <div class="card-header">
                    <span class="card-title">&#128241; AI Social Media Post Generator</span>
                    <span class="badge" style="background: linear-gradient(135deg, #667eea, #764ba2); color: white;">PRO</span>
                </div>

                <div style="margin-bottom: 1rem;">
                    <label class="form-label">Post Topic</label>
                    <select id="ai-social-topic" class="form-input" onchange="updateSocialPrompts()">
                        <option value="market">Market Update</option>
                        <option value="tips">Buyer/Seller Tips</option>
                        <option value="motivation">Motivational/Inspirational</option>
                        <option value="personal">Personal/Behind the Scenes</option>
                        <option value="educational">Educational Content</option>
                        <option value="testimonial">Client Success Story</option>
                        <option value="neighborhood">Neighborhood Spotlight</option>
                        <option value="holiday">Holiday/Seasonal</option>
                        <option value="engagement">Engagement/Question</option>
                        <option value="custom">Custom Topic</option>
                    </select>
                </div>

                <div style="margin-bottom: 1rem;">
                    <label class="form-label">Specific Details or Topic</label>
                    <textarea id="ai-social-details" class="form-input" rows="3" placeholder="E.g., 'Mortgage rates dropped to 6.5%' or 'Tips for first-time buyers' or 'My favorite coffee shop in Hyde Park'"></textarea>
                </div>

                <div class="grid-2" style="margin-bottom: 1rem;">
                    <div>
                        <label class="form-label">Platform</label>
                        <select id="ai-social-platform" class="form-input">
                            <option>Instagram (Feed)</option>
                            <option>Instagram (Reels)</option>
                            <option>Instagram (Stories)</option>
                            <option>Facebook</option>
                            <option>LinkedIn</option>
                            <option>TikTok</option>
                            <option>All Platforms</option>
                        </select>
                    </div>
                    <div>
                        <label class="form-label">Tone</label>
                        <select id="ai-social-tone" class="form-input">
                            <option>Professional</option>
                            <option>Casual & Friendly</option>
                            <option>Enthusiastic</option>
                            <option>Educational</option>
                            <option>Storytelling</option>
                            <option>Urgent/FOMO</option>
                        </select>
                    </div>
                </div>

                <div style="margin-bottom: 1rem;">
                    <label class="form-label">Include</label>
                    <div style="display: flex; gap: 1rem; flex-wrap: wrap;">
                        <label><input type="checkbox" id="ai-social-hashtags" checked> Hashtags</label>
                        <label><input type="checkbox" id="ai-social-cta" checked> Call to Action</label>
                        <label><input type="checkbox" id="ai-social-emoji" checked> Emojis</label>
                        <label><input type="checkbox" id="ai-social-stats"> Market Stats</label>
                    </div>
                </div>

                <button class="btn btn-gradient btn-lg" style="width: 100%;" onclick="generateAISocial()">&#129302; Generate Social Post</button>
            </div>

            <div class="card">
                <div class="card-header">
                    <span class="card-title">&#128196; Generated Post</span>
                </div>
                <div id="ai-social-output" style="background: #f8f9fa; padding: 1rem; border-radius: 8px; min-height: 300px; white-space: pre-wrap; font-size: 0.9rem;">
                    <p style="color: #666; text-align: center; margin-top: 100px;">Your AI-generated social post will appear here...</p>
                </div>
                <div style="display: flex; gap: 0.5rem; margin-top: 1rem; flex-wrap: wrap;">
                    <button class="btn btn-success" onclick="copyAIContent('ai-social-output')">&#128203; Copy</button>
                    <button class="btn" onclick="generateAISocial()">&#128260; Regenerate</button>
                    <button class="btn btn-primary" onclick="postAISocial()">&#128228; Post Now</button>
                    <button class="btn" onclick="scheduleAISocial()">&#128197; Schedule</button>
                </div>
            </div>
        </div>

        <!-- CONTENT IDEAS -->
        <div class="card" style="margin-top: 1rem;">
            <div class="card-header"><span class="card-title">&#128161; AI-Powered Content Ideas for Today</span></div>
            <div class="grid-3">
                <div style="padding: 1rem; background: #e8f5e9; border-radius: 8px;">
                    <h4 style="color: #22c55e;">&#128200; Market Post</h4>
                    <p style="font-size: 0.85rem;">"Rates just dropped to ${LIVE_DATA.mortgageRate}%! Here's what that means for Cincinnati buyers..."</p>
                    <button class="btn btn-sm btn-success" style="margin-top: 0.5rem;" onclick="useSocialIdea('market')">Use This</button>
                </div>
                <div style="padding: 1rem; background: #e3f2fd; border-radius: 8px;">
                    <h4 style="color: #2196f3;">&#127968; Neighborhood</h4>
                    <p style="font-size: 0.85rem;">"5 things I love about Hyde Park that buyers are obsessed with..."</p>
                    <button class="btn btn-sm btn-primary" style="margin-top: 0.5rem;" onclick="useSocialIdea('neighborhood')">Use This</button>
                </div>
                <div style="padding: 1rem; background: #fff3e0; border-radius: 8px;">
                    <h4 style="color: #f39c12;">&#129309; Engagement</h4>
                    <p style="font-size: 0.85rem;">"What's the ONE feature you can't live without in your dream home? &#128071;"</p>
                    <button class="btn btn-sm" style="background: #f39c12; color: white; margin-top: 0.5rem;" onclick="useSocialIdea('engagement')">Use This</button>
                </div>
            </div>
        </div>`;
}

function renderAIEmailTab() {
    return `
        <div class="grid-2">
            <div class="card">
                <div class="card-header">
                    <span class="card-title">&#128231; AI Email Writer</span>
                    <span class="badge" style="background: linear-gradient(135deg, #667eea, #764ba2); color: white;">PRO</span>
                </div>

                <div style="margin-bottom: 1rem;">
                    <label class="form-label">Email Type</label>
                    <select id="ai-email-type" class="form-input">
                        <option>New Lead Follow-Up</option>
                        <option>Listing Alert</option>
                        <option>Open House Invitation</option>
                        <option>Market Update</option>
                        <option>After Showing Follow-Up</option>
                        <option>Offer Submitted</option>
                        <option>Under Contract</option>
                        <option>Closing Congratulations</option>
                        <option>Anniversary Check-In</option>
                        <option>Referral Request</option>
                        <option>Re-Engagement (Cold Lead)</option>
                        <option>Custom</option>
                    </select>
                </div>

                <div class="grid-2" style="margin-bottom: 1rem;">
                    <div>
                        <label class="form-label">Recipient Name</label>
                        <input type="text" id="ai-email-name" class="form-input" placeholder="John Smith">
                    </div>
                    <div>
                        <label class="form-label">Lead Type</label>
                        <select id="ai-email-lead" class="form-input">
                            <option>Buyer</option>
                            <option>Seller</option>
                            <option>Investor</option>
                            <option>Past Client</option>
                            <option>Referral</option>
                        </select>
                    </div>
                </div>

                <div style="margin-bottom: 1rem;">
                    <label class="form-label">Context / Additional Details</label>
                    <textarea id="ai-email-context" class="form-input" rows="3" placeholder="E.g., 'Met at open house on Elm St, interested in 3BR homes under $400K in Hyde Park'"></textarea>
                </div>

                <div class="grid-2" style="margin-bottom: 1rem;">
                    <div>
                        <label class="form-label">Tone</label>
                        <select id="ai-email-tone" class="form-input">
                            <option>Professional & Warm</option>
                            <option>Casual & Friendly</option>
                            <option>Formal & Business</option>
                            <option>Urgent</option>
                        </select>
                    </div>
                    <div>
                        <label class="form-label">Length</label>
                        <select id="ai-email-length" class="form-input">
                            <option>Short (2-3 sentences)</option>
                            <option>Medium (1 paragraph)</option>
                            <option>Full (2-3 paragraphs)</option>
                        </select>
                    </div>
                </div>

                <button class="btn btn-gradient btn-lg" style="width: 100%;" onclick="generateAIEmail()">&#129302; Generate Email</button>
            </div>

            <div class="card">
                <div class="card-header"><span class="card-title">&#128196; Generated Email</span></div>
                <div style="margin-bottom: 1rem;">
                    <label class="form-label">Subject Line</label>
                    <input type="text" id="ai-email-subject-output" class="form-input" readonly placeholder="Subject will appear here...">
                    <button class="btn btn-sm" style="margin-top: 0.5rem;" onclick="copyAIContent('ai-email-subject-output')">Copy Subject</button>
                </div>
                <div id="ai-email-output" style="background: #f8f9fa; padding: 1rem; border-radius: 8px; min-height: 250px; white-space: pre-wrap; font-size: 0.9rem;">
                    <p style="color: #666; text-align: center; margin-top: 80px;">Your AI-generated email will appear here...</p>
                </div>
                <div style="display: flex; gap: 0.5rem; margin-top: 1rem;">
                    <button class="btn btn-success" onclick="copyAIContent('ai-email-output')">&#128203; Copy Body</button>
                    <button class="btn" onclick="generateAIEmail()">&#128260; Regenerate</button>
                    <button class="btn btn-primary" onclick="saveAIEmail()">&#128190; Save Template</button>
                </div>
            </div>
        </div>`;
}

function renderAIBioTab() {
    return `
        <div class="grid-2">
            <div class="card">
                <div class="card-header">
                    <span class="card-title">&#128100; AI Bio & Tagline Generator</span>
                </div>

                <div style="margin-bottom: 1rem;">
                    <label class="form-label">Bio Type</label>
                    <select id="ai-bio-type" class="form-input">
                        <option>Instagram Bio</option>
                        <option>LinkedIn Summary</option>
                        <option>Website About Page</option>
                        <option>Email Signature</option>
                        <option>Business Card Tagline</option>
                        <option>Zillow Profile</option>
                    </select>
                </div>

                <div style="margin-bottom: 1rem;">
                    <label class="form-label">Years of Experience</label>
                    <input type="number" id="ai-bio-years" class="form-input" value="22">
                </div>

                <div style="margin-bottom: 1rem;">
                    <label class="form-label">Specialties (comma separated)</label>
                    <textarea id="ai-bio-specialties" class="form-input" rows="2" placeholder="First-time buyers, luxury homes, investment properties, relocation">First-time buyers, Cincinnati neighborhoods, investment properties</textarea>
                </div>

                <div style="margin-bottom: 1rem;">
                    <label class="form-label">Unique Selling Points</label>
                    <textarea id="ai-bio-usp" class="form-input" rows="2" placeholder="What makes you different?">Cincinnati native, neighborhood expert, client-focused approach</textarea>
                </div>

                <div style="margin-bottom: 1rem;">
                    <label class="form-label">Tone</label>
                    <select id="ai-bio-tone" class="form-input">
                        <option>Professional & Approachable</option>
                        <option>Warm & Personal</option>
                        <option>Luxury & Exclusive</option>
                        <option>Fun & Energetic</option>
                        <option>Expert & Authoritative</option>
                    </select>
                </div>

                <button class="btn btn-gradient btn-lg" style="width: 100%;" onclick="generateAIBio()">&#129302; Generate Bio</button>
            </div>

            <div class="card">
                <div class="card-header"><span class="card-title">&#128196; Generated Content</span></div>
                <div id="ai-bio-output" style="background: #f8f9fa; padding: 1rem; border-radius: 8px; min-height: 200px; white-space: pre-wrap; font-size: 0.9rem; margin-bottom: 1rem;">
                    <p style="color: #666; text-align: center; margin-top: 60px;">Your AI-generated bio will appear here...</p>
                </div>

                <div class="card-header"><span class="card-title">&#9889; Tagline Options</span></div>
                <div id="ai-tagline-output" style="background: #f8f9fa; padding: 1rem; border-radius: 8px; min-height: 100px;">
                    <p style="color: #666; text-align: center; margin-top: 20px;">Taglines will appear here...</p>
                </div>
                <div style="display: flex; gap: 0.5rem; margin-top: 1rem;">
                    <button class="btn btn-success" onclick="copyAIContent('ai-bio-output')">&#128203; Copy Bio</button>
                    <button class="btn" onclick="generateAIBio()">&#128260; Regenerate</button>
                </div>
            </div>
        </div>`;
}

function renderAICaptionsTab() {
    return `
        <div class="grid-2">
            <div class="card">
                <div class="card-header">
                    <span class="card-title">&#128172; AI Caption & Hashtag Generator</span>
                </div>

                <div style="margin-bottom: 1rem;">
                    <label class="form-label">Content Type</label>
                    <select id="ai-caption-type" class="form-input">
                        <option>Property Photo</option>
                        <option>Just Listed</option>
                        <option>Just Sold</option>
                        <option>Open House</option>
                        <option>Behind the Scenes</option>
                        <option>Client Testimonial</option>
                        <option>Market Update</option>
                        <option>Personal/Lifestyle</option>
                        <option>Educational Tip</option>
                        <option>Neighborhood Spotlight</option>
                    </select>
                </div>

                <div style="margin-bottom: 1rem;">
                    <label class="form-label">Describe the Image/Content</label>
                    <textarea id="ai-caption-desc" class="form-input" rows="3" placeholder="E.g., 'Photo of beautiful kitchen with granite counters and stainless appliances'"></textarea>
                </div>

                <div class="grid-2" style="margin-bottom: 1rem;">
                    <div>
                        <label class="form-label">Platform</label>
                        <select id="ai-caption-platform" class="form-input">
                            <option>Instagram</option>
                            <option>Facebook</option>
                            <option>LinkedIn</option>
                            <option>TikTok</option>
                        </select>
                    </div>
                    <div>
                        <label class="form-label">Caption Length</label>
                        <select id="ai-caption-length" class="form-input">
                            <option>Short (1-2 lines)</option>
                            <option>Medium (paragraph)</option>
                            <option>Long (story)</option>
                        </select>
                    </div>
                </div>

                <button class="btn btn-gradient btn-lg" style="width: 100%;" onclick="generateAICaption()">&#129302; Generate Caption & Hashtags</button>
            </div>

            <div class="card">
                <div class="card-header"><span class="card-title">&#128196; Generated Caption</span></div>
                <div id="ai-caption-output" style="background: #f8f9fa; padding: 1rem; border-radius: 8px; min-height: 150px; white-space: pre-wrap; font-size: 0.9rem; margin-bottom: 1rem;">
                    <p style="color: #666; text-align: center; margin-top: 40px;">Caption will appear here...</p>
                </div>

                <div class="card-header"><span class="card-title">&#127991; Optimized Hashtags</span></div>
                <div id="ai-hashtag-output" style="background: linear-gradient(135deg, #667eea10, #764ba210); padding: 1rem; border-radius: 8px; min-height: 100px;">
                    <p style="color: #666; text-align: center; margin-top: 20px;">Hashtags will appear here...</p>
                </div>
                <div style="display: flex; gap: 0.5rem; margin-top: 1rem;">
                    <button class="btn btn-success" onclick="copyAIContent('ai-caption-output')">&#128203; Copy Caption</button>
                    <button class="btn" onclick="copyAIContent('ai-hashtag-output')">&#128203; Copy Hashtags</button>
                    <button class="btn" onclick="generateAICaption()">&#128260; Regenerate</button>
                </div>
            </div>
        </div>

        <!-- TRENDING HASHTAGS -->
        <div class="card" style="margin-top: 1rem;">
            <div class="card-header"><span class="card-title">&#128293; Trending Real Estate Hashtags</span></div>
            <div class="grid-4">
                <div>
                    <h4 style="color: var(--primary); margin-bottom: 0.5rem;">&#127968; Cincinnati</h4>
                    <div style="font-size: 0.85rem; color: #666;">#CincinnatiRealEstate #CincyHomes #QueenCity #CincinnatiOH #CincyRealtor #OhioRealEstate</div>
                </div>
                <div>
                    <h4 style="color: var(--success); margin-bottom: 0.5rem;">&#128200; Market</h4>
                    <div style="font-size: 0.85rem; color: #666;">#RealEstateMarket #HousingMarket #MortgageRates #HomeBuyers #RealEstateInvesting</div>
                </div>
                <div>
                    <h4 style="color: var(--instagram); margin-bottom: 0.5rem;">&#128241; Engagement</h4>
                    <div style="font-size: 0.85rem; color: #666;">#JustListed #JustSold #DreamHome #HomeGoals #NewListing #OpenHouse</div>
                </div>
                <div>
                    <h4 style="color: #f39c12; margin-bottom: 0.5rem;">&#127775; Viral</h4>
                    <div style="font-size: 0.85rem; color: #666;">#RealtorLife #RealEstateAgent #HomeTour #HouseHunting #FirstTimeHomeBuyer</div>
                </div>
            </div>
        </div>`;
}

function renderAIMarketTab() {
    return `
        <div class="grid-2">
            <div class="card">
                <div class="card-header">
                    <span class="card-title">&#128200; AI Market Report Generator</span>
                </div>

                <div style="margin-bottom: 1rem;">
                    <label class="form-label">Report Type</label>
                    <select id="ai-market-type" class="form-input">
                        <option>Monthly Market Update</option>
                        <option>Neighborhood Analysis</option>
                        <option>Rate Change Impact</option>
                        <option>Buyer Market Conditions</option>
                        <option>Seller Market Conditions</option>
                        <option>Investment Opportunity</option>
                        <option>Year-End Review</option>
                    </select>
                </div>

                <div style="margin-bottom: 1rem;">
                    <label class="form-label">Area/Neighborhood</label>
                    <select id="ai-market-area" class="form-input">
                        <option>Greater Cincinnati</option>
                        <option>Hyde Park</option>
                        <option>Oakley</option>
                        <option>Mason</option>
                        <option>West Chester</option>
                        <option>Anderson Township</option>
                        <option>Blue Ash</option>
                        <option>Montgomery</option>
                        <option>Indian Hill</option>
                        <option>Northern Kentucky</option>
                    </select>
                </div>

                <div style="margin-bottom: 1rem;">
                    <label class="form-label">Output Format</label>
                    <select id="ai-market-format" class="form-input">
                        <option>Social Media Post</option>
                        <option>Email Newsletter</option>
                        <option>Blog Post</option>
                        <option>Video Script</option>
                        <option>Infographic Text</option>
                    </select>
                </div>

                <div style="background: #e8f5e9; padding: 1rem; border-radius: 8px; margin-bottom: 1rem;">
                    <h4 style="color: #22c55e;">&#128200; Current Market Data</h4>
                    <div class="grid-2" style="margin-top: 0.5rem; font-size: 0.9rem;">
                        <div>Mortgage Rate: <strong>${LIVE_DATA.mortgageRate}%</strong></div>
                        <div>Rate Change: <strong>${LIVE_DATA.rateChange}%</strong></div>
                        <div>Median Price: <strong>$${(LIVE_DATA.cincinnatiMedianPrice/1000).toFixed(0)}K</strong></div>
                        <div>YoY Change: <strong>+${LIVE_DATA.cincinnatiPriceChange}%</strong></div>
                    </div>
                </div>

                <button class="btn btn-gradient btn-lg" style="width: 100%;" onclick="generateAIMarket()">&#129302; Generate Market Report</button>
            </div>

            <div class="card">
                <div class="card-header"><span class="card-title">&#128196; Generated Report</span></div>
                <div id="ai-market-output" style="background: #f8f9fa; padding: 1rem; border-radius: 8px; min-height: 350px; white-space: pre-wrap; font-size: 0.9rem;">
                    <p style="color: #666; text-align: center; margin-top: 120px;">Your AI-generated market report will appear here...</p>
                </div>
                <div style="display: flex; gap: 0.5rem; margin-top: 1rem;">
                    <button class="btn btn-success" onclick="copyAIContent('ai-market-output')">&#128203; Copy</button>
                    <button class="btn" onclick="generateAIMarket()">&#128260; Regenerate</button>
                    <button class="btn btn-primary" onclick="postAIMarket()">&#128228; Create Post</button>
                </div>
            </div>
        </div>`;
}

// AI Writer Helper Functions - Powered by Gemini 3 Flash
async function generateAIListing() {
    const address = document.getElementById('ai-listing-address').value || '123 Beautiful Lane, Cincinnati';
    const price = document.getElementById('ai-listing-price').value || '$450,000';
    const type = document.getElementById('ai-listing-type').value;
    const beds = document.getElementById('ai-listing-beds').value || '4';
    const baths = document.getElementById('ai-listing-baths').value || '2.5';
    const sqft = document.getElementById('ai-listing-sqft').value || '2,500';
    const features = document.getElementById('ai-listing-features').value || 'Updated kitchen, hardwood floors';
    const tone = document.getElementById('ai-listing-tone').value;

    const output = document.getElementById('ai-listing-output-text');

    // Always try Gemini API (key is securely stored in Netlify)
    output.innerHTML = '<div style="text-align: center; padding: 2rem;"><div class="spinner"></div><br>Generating with Gemini 3 Flash...</div>';

    const systemPrompt = `You are an expert real estate copywriter with 20 years of experience writing compelling property descriptions. You write in a ${tone} tone. You work for a Cincinnati, Ohio real estate agent named Ela with 22 years of experience. Current mortgage rate is ${LIVE_DATA.mortgageRate}%.`;

    const prompt = `Create 3 versions of content for this property listing:

Property Details:
- Address: ${address}
- Price: ${price}
- Type: ${type}
- Bedrooms: ${beds}
- Bathrooms: ${baths}
- Square Feet: ${sqft}
- Key Features: ${features}

Please generate:

1. MLS DESCRIPTION (200-300 words): A compelling, professional property description suitable for MLS listing. Highlight the features, location benefits, and create urgency. Include a call to action.

2. INSTAGRAM CAPTION (150-200 words): An engaging social media post with emojis, the key stats, feature highlights, and relevant hashtags. Make it catchy and shareable.

3. EMAIL ANNOUNCEMENT (150-200 words): A warm, personal email to send to potential buyers about this new listing. Include subject line.

Format each section clearly with headers.`;

    const result = await callGeminiAPI(prompt, systemPrompt);

    if (result) {
        output.innerHTML = result.replace(/\n/g, '<br>').replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>').replace(/#{1,3}\s*(.*?)(<br>|$)/g, '<strong>$1</strong>$2');
        showToast('AI content generated with Gemini 3 Flash!', 'success');
    } else {
        // Fallback to template if API fails
        generateAIListingFallback(output, address, price, type, beds, baths, sqft, features);
    }
}

function generateAIListingFallback(output, address, price, type, beds, baths, sqft, features) {
    output.innerHTML = `<strong>&#127968; MLS DESCRIPTION</strong>

Welcome to ${address}! This stunning ${type.toLowerCase()} offers ${beds} bedrooms, ${baths} bathrooms, and ${sqft} square feet of beautifully designed living space.

${features.split(',').map(f => '&#10003; ' + f.trim()).join('\n')}

Priced at ${price}, this home represents exceptional value in today's Cincinnati market. With current mortgage rates at ${LIVE_DATA.mortgageRate}%, your monthly payment could be approximately $${Math.round(parseInt(price.replace(/\D/g,'')) * 0.006).toLocaleString()}.

Don't miss this incredible opportunity! Schedule your private showing today.

---

<strong>&#128241; INSTAGRAM CAPTION</strong>

&#127881; JUST LISTED in Cincinnati! &#127881;

${beds} BR | ${baths} BA | ${sqft} SF
&#128176; ${price}

This ${type.toLowerCase()} has EVERYTHING:
${features.split(',').slice(0,3).map(f => '&#10024; ' + f.trim()).join('\n')}

&#128205; ${address}

Ready to see it? DM me or click the link in bio!

#JustListed #CincinnatiRealEstate #${type.replace(/\s+/g,'')} #CincyHomes #DreamHome #NewListing #OhioRealtor #HouseHunting

---

<strong>&#128231; EMAIL ANNOUNCEMENT</strong>

Subject: &#127968; Hot New Listing: ${beds}BR in Cincinnati - ${price}

Hi [Name],

I wanted to give you an exclusive first look at my newest listing!

${address}
${price} | ${beds} BD | ${baths} BA | ${sqft} SF

This beautiful ${type.toLowerCase()} features ${features.toLowerCase()}.

With rates at ${LIVE_DATA.mortgageRate}%, now is a great time to make a move!

Want to schedule a private showing? Just reply to this email or call me directly.

Best,
Ela`;

    showToast('Listing content generated!');
}

async function generateAISocial() {
    const topic = document.getElementById('ai-social-topic').value;
    const details = document.getElementById('ai-social-details').value;
    const platform = document.getElementById('ai-social-platform').value;
    const tone = document.getElementById('ai-social-tone').value;
    const includeHashtags = document.getElementById('ai-social-hashtags').checked;

    const output = document.getElementById('ai-social-output');

    // Always try Gemini API (key is securely stored in Netlify)
    output.innerHTML = '<div style="text-align: center; padding: 2rem;"><div class="spinner"></div><br>Generating with Gemini 3 Flash...</div>';

    const systemPrompt = `You are a social media expert for real estate. You create viral, engaging posts for ${platform}. You write in a ${tone} tone. You work for Ela, a Cincinnati real estate agent with 22 years of experience. Current mortgage rate is ${LIVE_DATA.mortgageRate}%. Cincinnati median home price is $${LIVE_DATA.cincinnatiMedianPrice.toLocaleString()}.`;

    const topicDescriptions = {
        'market': 'Cincinnati real estate market update with current rates and prices',
        'tips': 'Home buying or selling tips for first-time buyers',
        'engagement': 'An engagement post with a question to spark comments',
        'behind': 'Behind the scenes of being a realtor',
        'success': 'Client success story or just sold celebration',
        'neighborhood': 'Cincinnati neighborhood spotlight'
    };

    const prompt = `Create a viral ${platform} post about: ${topicDescriptions[topic] || topic}

Additional context: ${details || 'None provided'}

Requirements:
- Write for ${platform} (appropriate length and style)
- Use emojis strategically
- Include a strong hook in the first line
- Add a clear call-to-action
${includeHashtags ? '- Include 10-15 relevant hashtags at the end' : '- Do NOT include hashtags'}
- Make it feel authentic and personal
- Reference Cincinnati/Ohio where relevant

Generate the post now:`;

    const result = await callGeminiAPI(prompt, systemPrompt);

    if (result) {
        output.innerHTML = result.replace(/\n/g, '<br>');
        showToast('AI post generated with Gemini 3 Flash!', 'success');
    } else {
        // Fallback to template if API fails
        generateAISocialFallback(output, topic, details, includeHashtags);
    }
}

function generateAISocialFallback(output, topic, details, includeHashtags) {
    let post = '';

    if (topic === 'market') {
        post = `&#128200; CINCINNATI MARKET UPDATE &#128200;

Big news for buyers! Mortgage rates just hit ${LIVE_DATA.mortgageRate}%!

Here's what this means for YOU:
&#127968; More buying power
&#128176; Lower monthly payments
&#128188; Better affordability

The median home price in Cincinnati is $${(LIVE_DATA.cincinnatiMedianPrice/1000).toFixed(0)}K (+${LIVE_DATA.cincinnatiPriceChange}% YoY)

If you've been waiting on the sidelines, THIS is your moment! &#9989;

DM me "RATES" and I'll send you a free buying power analysis!`;
    } else if (topic === 'tips') {
        post = `&#128161; BUYER TIP OF THE DAY &#128161;

${details || "Getting pre-approved BEFORE you start house hunting is the smartest move you can make!"}

Here's why it matters:
1&#65039;&#8419; Know your REAL budget
2&#65039;&#8419; Sellers take you seriously
3&#65039;&#8419; Faster closing process
4&#65039;&#8419; Less stress overall

With rates at ${LIVE_DATA.mortgageRate}%, now is a great time to get started!

Save this post for later! &#128278;

Drop a &#128077; if you learned something new!`;
    } else if (topic === 'engagement') {
        post = `&#129300; QUESTION TIME! &#129300;

If you could have ONE feature in your dream home, what would it be?

A) &#127966; Huge backyard
B) &#127859; Chef's kitchen
C) &#128658; 3+ car garage
D) &#128187; Home office/gym
E) &#129293; Other (tell me below!)

I'm curious to see what Cincinnati values most! &#128071;&#128071;&#128071;

(My answer: I'm a sucker for a great kitchen! &#127859;)`;
    } else {
        post = `${details || ''}

&#127968; Your Cincinnati real estate expert with 22 years of experience helping families find their perfect home.

DM me to start your journey!`;
    }

    if (includeHashtags) {
        post += `\n\n#CincinnatiRealEstate #CincyHomes #OhioRealtor #RealEstateAgent #HomeBuyers #${topic === 'market' ? 'MarketUpdate' : 'RealEstateTips'} #DreamHome #HouseHunting`;
    }

    output.innerHTML = post;
    showToast('Social post generated!');
}

async function generateAIEmail() {
    const type = document.getElementById('ai-email-type').value;
    const name = document.getElementById('ai-email-name').value || 'there';
    const context = document.getElementById('ai-email-context').value;
    const tone = document.getElementById('ai-email-tone').value;

    const subjectOutput = document.getElementById('ai-email-subject-output');
    const bodyOutput = document.getElementById('ai-email-output');

    // Always try Gemini API (key is securely stored in Netlify)
    bodyOutput.innerHTML = '<div style="text-align: center; padding: 2rem;"><div class="spinner"></div><br>Generating with Gemini 3 Flash...</div>';

    const systemPrompt = `You are an expert email copywriter for real estate. You write ${tone} emails that convert leads into clients. You work for Ela, a Cincinnati real estate agent with 22 years of experience. Current mortgage rate is ${LIVE_DATA.mortgageRate}%.`;

    const prompt = `Write a professional real estate email:

Type: ${type}
Recipient Name: ${name}
Tone: ${tone}
Additional Context: ${context || 'None provided'}
Current Mortgage Rate: ${LIVE_DATA.mortgageRate}%
Cincinnati Median Price: $${LIVE_DATA.cincinnatiMedianPrice.toLocaleString()}

Requirements:
1. Create a compelling subject line (start with "SUBJECT: ")
2. Write the email body
3. Keep it concise but warm and personal
4. Include a clear call-to-action
5. Sign off as "Ela"
6. Make it feel personal, not templated

Generate the email now:`;

    const result = await callGeminiAPI(prompt, systemPrompt);

    if (result) {
        // Extract subject line if present
        const subjectMatch = result.match(/SUBJECT:\s*(.+?)(\n|$)/i);
        if (subjectMatch) {
            subjectOutput.value = subjectMatch[1].trim();
            const bodyText = result.replace(/SUBJECT:\s*.+?(\n|$)/i, '').trim();
            bodyOutput.innerHTML = bodyText.replace(/\n/g, '<br>');
        } else {
            subjectOutput.value = `Following up - ${type}`;
            bodyOutput.innerHTML = result.replace(/\n/g, '<br>');
        }
        showToast('AI email generated with Gemini 3 Flash!', 'success');
    } else {
        // Fallback to template if API fails
        generateAIEmailFallback(type, name, context, subjectOutput, bodyOutput);
    }
}

function generateAIEmailFallback(type, name, context, subjectOutput, bodyOutput) {
    let subject = '';
    let body = '';

    if (type === 'New Lead Follow-Up') {
        subject = `Great connecting with you, ${name}! &#127968;`;
        body = `Hi ${name},

Thank you so much for reaching out about buying a home in Cincinnati! I'm excited to help you find the perfect place.

${context ? `I noted that you're interested in ${context.toLowerCase()}.` : ''} With my 22 years of experience in the Cincinnati market, I know this area inside and out.

Here's what I'd love to do next:
&#8226; Schedule a quick 15-minute call to learn more about what you're looking for
&#8226; Send you some listings that match your criteria
&#8226; Answer any questions you have about the current market

What works best for your schedule this week?

Looking forward to helping you find your dream home!

Best,
Ela`;
    } else if (type === 'Market Update') {
        subject = `Cincinnati Market Update: Rates at ${LIVE_DATA.mortgageRate}% &#128200;`;
        body = `Hi ${name},

I wanted to share some exciting news about the Cincinnati real estate market!

&#128200; Current Snapshot:
&#8226; 30-Year Fixed Rate: ${LIVE_DATA.mortgageRate}%
&#8226; Median Home Price: $${(LIVE_DATA.cincinnatiMedianPrice/1000).toFixed(0)}K
&#8226; Year-over-Year Change: +${LIVE_DATA.cincinnatiPriceChange}%

What this means for you:
${context ? context : 'Now could be a great time to make your move, whether buying or selling.'}

Want to discuss what this means for your specific situation? I'd love to chat!

Best,
Ela`;
    } else {
        subject = `Following up - ${type}`;
        body = `Hi ${name},

${context || 'I wanted to follow up with you regarding our recent conversation.'}

Please let me know if you have any questions or if there's anything I can help with.

Best,
Ela`;
    }

    subjectOutput.value = subject;
    bodyOutput.innerHTML = body;
    showToast('Email generated!');
}

function generateAIBio() {
    const type = document.getElementById('ai-bio-type').value;
    const years = document.getElementById('ai-bio-years').value;
    const specialties = document.getElementById('ai-bio-specialties').value;
    const usp = document.getElementById('ai-bio-usp').value;
    const tone = document.getElementById('ai-bio-tone').value;

    let bio = '';
    let taglines = '';

    if (type === 'Instagram Bio') {
        bio = `&#127968; Cincinnati REALTOR&#174; | ${years} Years
&#128205; Helping families find HOME
&#128142; ${specialties.split(',')[0].trim()}
&#128233; DM for free home value!
&#128071; Search listings below`;
    } else if (type === 'LinkedIn Summary') {
        bio = `With ${years} years of experience in Cincinnati real estate, I've helped hundreds of families navigate one of life's biggest decisions - finding their perfect home.

My specialties include ${specialties.toLowerCase()}.

What sets me apart: ${usp}

I believe that buying or selling a home should be an exciting journey, not a stressful one. My approach combines deep local market knowledge with genuine care for my clients' needs.

Whether you're a first-time buyer, seasoned investor, or looking to sell, I'm here to guide you every step of the way.

Let's connect! I'd love to hear about your real estate goals.`;
    } else {
        bio = `Meet Ela - Your Cincinnati Real Estate Expert

With ${years} years of experience serving the Greater Cincinnati area, I specialize in ${specialties.toLowerCase()}.

${usp}

My mission is simple: to make your real estate journey as smooth and successful as possible. From first-time buyers to luxury properties, I bring the same dedication and expertise to every client.

Ready to start your journey? Let's talk!`;
    }

    taglines = `&#10024; "Your Home, My Mission"
&#10024; "Cincinnati's Neighborhood Expert"
&#10024; "${years} Years of Making Dreams Come True"
&#10024; "Where Experience Meets Excellence"
&#10024; "Finding Your Perfect Place in Cincy"`;

    document.getElementById('ai-bio-output').innerHTML = bio;
    document.getElementById('ai-tagline-output').innerHTML = taglines;
    showToast('Bio generated!');
}

function generateAICaption() {
    const type = document.getElementById('ai-caption-type').value;
    const desc = document.getElementById('ai-caption-desc').value;
    const platform = document.getElementById('ai-caption-platform').value;
    const length = document.getElementById('ai-caption-length').value;

    let caption = '';
    let hashtags = '';

    if (type === 'Property Photo') {
        caption = `${desc ? desc + '\n\n' : ''}This is what dreams are made of! &#128525;\n\nEvery detail of this home was designed for modern living. From the moment you walk in, you'll feel that "this is THE one" feeling.\n\nWant to see more? Link in bio or DM me! &#128172;`;
        hashtags = '#CincinnatiRealEstate #DreamHome #InteriorDesign #HomeGoals #LuxuryLiving #CincyHomes #RealEstatePhotography #HomeTour #PropertyTour #HouseHunting';
    } else if (type === 'Just Listed') {
        caption = `&#127881; JUST LISTED! &#127881;\n\n${desc || 'Another beautiful home hitting the market!'}\n\nThis one won't last long in today's market! &#128293;\n\nDM me for details or to schedule a private showing!`;
        hashtags = '#JustListed #NewListing #CincinnatiRealEstate #CincyHomes #ForSale #DreamHome #HouseHunting #OhioRealtor #RealEstateAgent #HomeSweetHome';
    } else if (type === 'Just Sold') {
        caption = `&#127881; SOLD! &#127881;\n\n${desc || 'Another happy family in their new home!'}\n\nCongratulations to my amazing clients! It was an honor to help you find your perfect place. &#127968;&#128151;\n\nThinking about buying or selling? Let's chat!`;
        hashtags = '#JustSold #SoldByEla #CincinnatiRealtor #RealEstateSuccess #HappyClients #ClosingDay #HomeBuyers #CincyRealEstate #RealEstateAgent #DreamsComeTrue';
    } else {
        caption = `${desc || 'Another day, another opportunity to help families find their dream home!'}\n\n&#127968; Your Cincinnati real estate expert\n\nDM me to start your journey!`;
        hashtags = '#CincinnatiRealEstate #CincyHomes #OhioRealtor #RealEstateAgent #RealtorLife #HomeBuyers #DreamHome #HouseHunting';
    }

    document.getElementById('ai-caption-output').innerHTML = caption;
    document.getElementById('ai-hashtag-output').innerHTML = hashtags;
    showToast('Caption and hashtags generated!');
}

function generateAIMarket() {
    const type = document.getElementById('ai-market-type').value;
    const area = document.getElementById('ai-market-area').value;
    const format = document.getElementById('ai-market-format').value;

    let report = '';

    if (format === 'Social Media Post') {
        report = `&#128200; ${area.toUpperCase()} MARKET UPDATE &#128200;

Here's what's happening in ${area} real estate right now:

&#128181; Median Price: $${(LIVE_DATA.cincinnatiMedianPrice/1000).toFixed(0)}K
&#128200; YoY Change: +${LIVE_DATA.cincinnatiPriceChange}%
&#128178; Mortgage Rate: ${LIVE_DATA.mortgageRate}%
&#128197; Avg Days on Market: ${LIVE_DATA.daysOnMarket || 21} days
&#127968; Inventory: ${LIVE_DATA.inventory} months supply

What this means for BUYERS:
&#9989; ${LIVE_DATA.mortgageRate < 7 ? 'Rates are improving - more buying power!' : 'Lock in now before rates change!'}
&#9989; Still a competitive market - be prepared to act fast

What this means for SELLERS:
&#9989; ${LIVE_DATA.inventory < 4 ? "Low inventory = strong seller's market" : 'Good balance in the market'}
&#9989; Homes are selling in ${LIVE_DATA.daysOnMarket || 21} days on average

Thinking about making a move? DM me for a personalized market analysis!

#${area.replace(/\s+/g,'')}RealEstate #MarketUpdate #CincinnatiHomes #RealEstateMarket #HomeBuyers #HomeSellers`;
    } else if (format === 'Email Newsletter') {
        report = `Subject: ${area} Real Estate Market Update - ${new Date().toLocaleDateString('en-US', {month: 'long', year: 'numeric'})}

Hi [Name],

Here's your monthly ${area} market update!

&#128202; BY THE NUMBERS:

&#8226; Median Home Price: $${(LIVE_DATA.cincinnatiMedianPrice/1000).toFixed(0)}K (+${LIVE_DATA.cincinnatiPriceChange}% from last year)
&#8226; 30-Year Mortgage Rate: ${LIVE_DATA.mortgageRate}%
&#8226; Average Days on Market: ${LIVE_DATA.daysOnMarket || 21} days
&#8226; Housing Supply: ${LIVE_DATA.inventory} months

&#127968; WHAT THIS MEANS FOR YOU:

For Buyers: ${LIVE_DATA.mortgageRate < 7 ? 'Great news! Rates have come down, giving you more buying power. A $400K home costs roughly $200/month less than it did when rates were at 7.5%.' : 'While rates remain elevated, they may go up further. Locking in now could save you money long-term.'}

For Sellers: With only ${LIVE_DATA.inventory} months of inventory, well-priced homes are still moving quickly. The average home in ${area} sells in just ${LIVE_DATA.daysOnMarket || 21} days.

&#128161; MY TAKE:

${type === 'Monthly Market Update' ? 'The Cincinnati market remains strong. I\'m seeing multiple offers on well-priced homes and motivated buyers who are ready to act.' : 'Whether you\'re buying or selling, timing and strategy matter. I\'d love to discuss how to make the most of current conditions.'}

Want to discuss your specific situation? Reply to this email or call me anytime!

Best,
Ela`;
    } else {
        report = `${area} Market Report - ${type}

Current Market Conditions:
- Median Price: $${(LIVE_DATA.cincinnatiMedianPrice/1000).toFixed(0)}K
- Price Change: +${LIVE_DATA.cincinnatiPriceChange}% YoY
- Mortgage Rate: ${LIVE_DATA.mortgageRate}%
- Inventory: ${LIVE_DATA.inventory} months supply
- Days on Market: ${LIVE_DATA.daysOnMarket || 21} days

Market Analysis:
The ${area} real estate market continues to show ${LIVE_DATA.cincinnatiPriceChange > 3 ? 'strong appreciation' : 'steady growth'}. With ${LIVE_DATA.inventory} months of inventory, we remain in a ${LIVE_DATA.inventory < 4 ? "seller's" : "balanced"} market.

Key Takeaways:
1. ${LIVE_DATA.mortgageRate < 7 ? 'Improving rates are bringing buyers back' : 'Buyers are adapting to current rate environment'}
2. Well-priced homes continue to sell quickly
3. ${LIVE_DATA.inventory < 4 ? 'Low inventory keeping prices elevated' : 'More options available for buyers'}

Outlook:
${type.includes('Buyer') ? 'For buyers looking in ' + area + ', acting decisively on well-priced homes is key. Pre-approval and quick response times are essential.' : 'For sellers in ' + area + ', proper pricing and presentation remain critical to attracting qualified buyers.'}`;
    }

    document.getElementById('ai-market-output').innerHTML = report;
    showToast('Market report generated!');
}

function copyAIContent(elementId) {
    const el = document.getElementById(elementId);
    const text = el.tagName === 'INPUT' ? el.value : el.innerText;
    navigator.clipboard.writeText(text);
    showToast('Copied to clipboard!');
}

function loadListingTemplate(type) { showToast('Template loaded: ' + type); }
function regenerateAIListing() { generateAIListing(); }
function refineAIListing() { showToast('Refine feature coming soon!'); }
function saveAIListing() { showToast('Saved to library!'); }
function useSocialIdea(type) { document.getElementById('ai-social-topic').value = type; showToast('Idea loaded!'); }
function postAISocial() { showToast('Opening post window...'); document.querySelector('[data-page="posting"]').click(); }
function scheduleAISocial() { showToast('Opening scheduler...'); document.querySelector('[data-page="scheduler"]').click(); }
function saveAIEmail() { showToast('Email saved to templates!'); }
function postAIMarket() { showToast('Opening post window...'); document.querySelector('[data-page="posting"]').click(); }
function updateSocialPrompts() { /* Update prompts based on topic */ }

// ========== AI ASSISTANT - Lead Scoring & Smart Insights ==========
function renderAIAssistant() {
    return `
    <section class="page-section" id="page-ai-assistant">
        <div class="page-header" style="background: linear-gradient(135deg, #667eea, #764ba2);">
            <h2>&#128172; AI Assistant</h2>
            <p>Smart lead scoring, response suggestions, and market insights powered by AI</p>
        </div>

        <div class="grid-3" style="margin-bottom: 1rem;">
            <div class="stat-card" style="background: linear-gradient(135deg, #667eea, #764ba2); color: white;">
                <div class="stat-number" id="ai-hot-leads">0</div>
                <div class="stat-label">&#128293; Hot Leads</div>
            </div>
            <div class="stat-card" style="background: linear-gradient(135deg, #22c55e, #16a34a); color: white;">
                <div class="stat-number" id="ai-follow-ups">0</div>
                <div class="stat-label">&#128231; Follow-ups Due</div>
            </div>
            <div class="stat-card" style="background: linear-gradient(135deg, #f39c12, #e67e22); color: white;">
                <div class="stat-number" id="ai-insights">5</div>
                <div class="stat-label">&#128161; New Insights</div>
            </div>
        </div>

        <div class="grid-2">
            <!-- AI LEAD SCORING -->
            <div class="card">
                <div class="card-header">
                    <span class="card-title">&#129302; AI Lead Scoring</span>
                    <span class="badge" style="background: linear-gradient(135deg, #667eea, #764ba2); color: white;">SMART</span>
                </div>
                <p style="font-size: 0.85rem; color: #666; margin-bottom: 1rem;">AI analyzes lead behavior to predict conversion likelihood</p>

                <div id="ai-lead-scores" style="max-height: 400px; overflow-y: auto;">
                    ${renderAILeadScores()}
                </div>

                <button class="btn btn-gradient" style="width: 100%; margin-top: 1rem;" onclick="refreshAIScores()">&#128260; Refresh Scores</button>
            </div>

            <!-- AI RESPONSE SUGGESTIONS -->
            <div class="card">
                <div class="card-header">
                    <span class="card-title">&#128172; AI Response Suggestions</span>
                </div>
                <p style="font-size: 0.85rem; color: #666; margin-bottom: 1rem;">Smart follow-up recommendations based on lead activity</p>

                <div id="ai-suggestions" style="max-height: 400px; overflow-y: auto;">
                    ${renderAISuggestions()}
                </div>
            </div>
        </div>

        <!-- AI MARKET INSIGHTS -->
        <div class="card" style="margin-top: 1rem;">
            <div class="card-header">
                <span class="card-title">&#128200; AI Market Insights</span>
                <span class="badge" style="background: #22c55e; color: white;">LIVE</span>
            </div>
            <div class="grid-3">
                <div style="padding: 1rem; background: linear-gradient(135deg, #e8f5e920, #c8e6c920); border-radius: 8px; border-left: 4px solid #22c55e;">
                    <h4 style="color: #22c55e;">&#128200; Rate Opportunity</h4>
                    <p style="font-size: 0.9rem; margin-top: 0.5rem;">Rates at ${LIVE_DATA.mortgageRate}% - ${LIVE_DATA.mortgageRate < 7 ? 'Good time to reach out to fence-sitters!' : 'Focus on serious buyers ready to act'}</p>
                    <button class="btn btn-sm btn-success" style="margin-top: 0.5rem;" onclick="createRateOutreach()">Create Outreach</button>
                </div>
                <div style="padding: 1rem; background: linear-gradient(135deg, #e3f2fd20, #bbdefb20); border-radius: 8px; border-left: 4px solid #2196f3;">
                    <h4 style="color: #2196f3;">&#127968; Hot Neighborhoods</h4>
                    <p style="font-size: 0.9rem; margin-top: 0.5rem;">Hyde Park and Oakley showing increased buyer interest this week. 12 new leads interested in these areas.</p>
                    <button class="btn btn-sm btn-primary" style="margin-top: 0.5rem;" onclick="viewNeighborhoodLeads()">View Leads</button>
                </div>
                <div style="padding: 1rem; background: linear-gradient(135deg, #fff3e020, #ffe0b220); border-radius: 8px; border-left: 4px solid #f39c12;">
                    <h4 style="color: #f39c12;">&#128293; Engagement Alert</h4>
                    <p style="font-size: 0.9rem; margin-top: 0.5rem;">3 leads have viewed your listings multiple times in the past 24 hours. High intent detected!</p>
                    <button class="btn btn-sm" style="background: #f39c12; color: white; margin-top: 0.5rem;" onclick="viewHotLeads()">Contact Now</button>
                </div>
            </div>
        </div>

        <!-- AI CONTENT RECOMMENDATIONS -->
        <div class="card" style="margin-top: 1rem;">
            <div class="card-header">
                <span class="card-title">&#128161; AI Content Recommendations</span>
            </div>
            <p style="font-size: 0.85rem; color: #666; margin-bottom: 1rem;">Based on your audience engagement and market trends</p>
            <div class="grid-4">
                <div style="padding: 1rem; background: #f8f9fa; border-radius: 8px; text-align: center;">
                    <div style="font-size: 2rem;">&#128200;</div>
                    <h4 style="margin: 0.5rem 0;">Market Update</h4>
                    <p style="font-size: 0.8rem; color: #666;">High engagement predicted</p>
                    <div style="color: #22c55e; font-weight: 600;">92% match</div>
                    <button class="btn btn-sm btn-success" style="margin-top: 0.5rem;" onclick="document.querySelector('[data-page=ai-writer]').click()">Create</button>
                </div>
                <div style="padding: 1rem; background: #f8f9fa; border-radius: 8px; text-align: center;">
                    <div style="font-size: 2rem;">&#127968;</div>
                    <h4 style="margin: 0.5rem 0;">Just Listed</h4>
                    <p style="font-size: 0.8rem; color: #666;">Listing content performs well</p>
                    <div style="color: #22c55e; font-weight: 600;">88% match</div>
                    <button class="btn btn-sm btn-primary" style="margin-top: 0.5rem;" onclick="document.querySelector('[data-page=ai-writer]').click()">Create</button>
                </div>
                <div style="padding: 1rem; background: #f8f9fa; border-radius: 8px; text-align: center;">
                    <div style="font-size: 2rem;">&#128161;</div>
                    <h4 style="margin: 0.5rem 0;">Buyer Tips</h4>
                    <p style="font-size: 0.8rem; color: #666;">Educational content trending</p>
                    <div style="color: #f39c12; font-weight: 600;">76% match</div>
                    <button class="btn btn-sm" style="margin-top: 0.5rem;" onclick="document.querySelector('[data-page=ai-writer]').click()">Create</button>
                </div>
                <div style="padding: 1rem; background: #f8f9fa; border-radius: 8px; text-align: center;">
                    <div style="font-size: 2rem;">&#129309;</div>
                    <h4 style="margin: 0.5rem 0;">Q&A Post</h4>
                    <p style="font-size: 0.8rem; color: #666;">Drives engagement</p>
                    <div style="color: #f39c12; font-weight: 600;">71% match</div>
                    <button class="btn btn-sm" style="margin-top: 0.5rem;" onclick="document.querySelector('[data-page=ai-writer]').click()">Create</button>
                </div>
            </div>
        </div>
    </section>`;
}

function renderAILeadScores() {
    const leads = JSON.parse(localStorage.getItem('elaLeads') || '[]');

    if (leads.length === 0) {
        return `<div style="text-align: center; padding: 2rem; color: #666;">
            <p>No leads yet. Add leads in the Lead Generator to see AI scoring.</p>
            <button class="btn btn-primary" onclick="document.querySelector('[data-page=leads]').click()">Go to Leads</button>
        </div>`;
    }

    // Score and sort leads
    const scoredLeads = leads.map(lead => {
        let score = 50; // Base score

        // Scoring factors
        if (lead.timeline === 'immediate') score += 25;
        else if (lead.timeline === '1-3 months') score += 15;
        else if (lead.timeline === '3-6 months') score += 5;

        if (lead.preApproved === 'yes') score += 20;
        if (lead.budget && parseInt(lead.budget.replace(/\D/g,'')) > 400000) score += 10;
        if (lead.source === 'referral') score += 15;
        if (lead.source === 'zillow' || lead.source === 'realtor') score += 10;
        if (lead.priority === 'hot') score += 15;

        // Cap at 100
        score = Math.min(score, 100);

        return { ...lead, aiScore: score };
    }).sort((a, b) => b.aiScore - a.aiScore).slice(0, 10);

    return scoredLeads.map(lead => `
        <div style="display: flex; align-items: center; gap: 1rem; padding: 0.75rem; border-bottom: 1px solid #eee;">
            <div style="width: 50px; height: 50px; border-radius: 50%; background: ${lead.aiScore >= 80 ? 'linear-gradient(135deg, #22c55e, #16a34a)' : lead.aiScore >= 60 ? 'linear-gradient(135deg, #f39c12, #e67e22)' : 'linear-gradient(135deg, #6b7280, #4b5563)'}; display: flex; align-items: center; justify-content: center; color: white; font-weight: bold;">
                ${lead.aiScore}
            </div>
            <div style="flex: 1;">
                <div style="font-weight: 600;">${lead.name || 'Unknown'}</div>
                <div style="font-size: 0.8rem; color: #666;">${lead.type || 'Buyer'} | ${lead.timeline || 'Unknown timeline'}</div>
            </div>
            <div style="text-align: right;">
                <div style="font-size: 0.75rem; padding: 0.25rem 0.5rem; border-radius: 4px; background: ${lead.aiScore >= 80 ? '#dcfce7' : lead.aiScore >= 60 ? '#fef3c7' : '#f3f4f6'}; color: ${lead.aiScore >= 80 ? '#166534' : lead.aiScore >= 60 ? '#92400e' : '#374151'};">
                    ${lead.aiScore >= 80 ? '&#128293; Hot' : lead.aiScore >= 60 ? '&#127777; Warm' : '&#10052; Cold'}
                </div>
                <button class="btn btn-sm" style="margin-top: 0.25rem; font-size: 0.7rem;" onclick="openLeadDetail('${lead.id}')">View</button>
            </div>
        </div>
    `).join('');
}

function renderAISuggestions() {
    const leads = JSON.parse(localStorage.getItem('elaLeads') || '[]');

    const suggestions = [
        {
            icon: '&#128172;',
            title: 'Follow up with hot leads',
            desc: 'You have leads who haven\'t been contacted in 48+ hours',
            action: 'Send personalized check-in',
            color: '#e74c3c'
        },
        {
            icon: '&#128200;',
            title: 'Share rate update',
            desc: `Rates at ${LIVE_DATA.mortgageRate}% - great opportunity to reach out`,
            action: 'Create rate post',
            color: '#22c55e'
        },
        {
            icon: '&#127968;',
            title: 'New listing alert',
            desc: 'Send new listings to buyers matching their criteria',
            action: 'Send listing alerts',
            color: '#2196f3'
        },
        {
            icon: '&#128197;',
            title: 'Schedule nurture emails',
            desc: 'Cold leads need re-engagement',
            action: 'Start drip campaign',
            color: '#f39c12'
        }
    ];

    return suggestions.map(s => `
        <div style="display: flex; gap: 1rem; padding: 1rem; border-bottom: 1px solid #eee;">
            <div style="font-size: 1.5rem;">${s.icon}</div>
            <div style="flex: 1;">
                <div style="font-weight: 600; color: ${s.color};">${s.title}</div>
                <div style="font-size: 0.85rem; color: #666; margin-top: 0.25rem;">${s.desc}</div>
                <button class="btn btn-sm" style="margin-top: 0.5rem; background: ${s.color}; color: white;">${s.action}</button>
            </div>
        </div>
    `).join('');
}

function refreshAIScores() {
    document.getElementById('ai-lead-scores').innerHTML = renderAILeadScores();
    updateAIStats();
    showToast('AI scores refreshed!');
}

function updateAIStats() {
    const leads = JSON.parse(localStorage.getItem('elaLeads') || '[]');
    const hotLeads = leads.filter(l => l.priority === 'hot' || calculateLeadScore(l) >= 80).length;
    const followUps = leads.filter(l => l.stage !== 'closed' && l.stage !== 'lost').length;

    document.getElementById('ai-hot-leads').textContent = hotLeads;
    document.getElementById('ai-follow-ups').textContent = followUps;
}

function createRateOutreach() { document.querySelector('[data-page="ai-writer"]').click(); showToast('Opening AI Writer...'); }
function viewNeighborhoodLeads() { document.querySelector('[data-page="leads"]').click(); }
function viewHotLeads() { document.querySelector('[data-page="leads"]').click(); }

// ========== AI PROPERTY ANALYZER - Instant Valuation & Comparables ==========
function renderAIPropertyAnalyzer() {
    return `
    <section class="page-section" id="page-ai-property">
        <div class="page-header" style="background: linear-gradient(135deg, #667eea, #764ba2);">
            <h2>&#127969; AI Property Analyzer</h2>
            <p>Instant property valuations, comparable sales analysis, and investment insights powered by AI</p>
        </div>

        <div class="grid-2">
            <!-- PROPERTY INPUT -->
            <div class="card">
                <div class="card-header">
                    <span class="card-title">&#127968; Property Details</span>
                    <span class="badge" style="background: linear-gradient(135deg, #667eea, #764ba2); color: white;">AI-POWERED</span>
                </div>
                <p style="font-size: 0.85rem; color: #666; margin-bottom: 1rem;">Enter property details for AI valuation and market analysis</p>

                <div style="margin-bottom: 1rem;">
                    <label class="form-label">Property Address</label>
                    <input type="text" id="prop-address" class="form-input" placeholder="123 Main St, Cincinnati, OH 45202">
                </div>

                <div class="grid-2" style="margin-bottom: 1rem;">
                    <div>
                        <label class="form-label">Property Type</label>
                        <select id="prop-type" class="form-input">
                            <option>Single Family</option>
                            <option>Condo/Townhouse</option>
                            <option>Multi-Family (2-4 units)</option>
                            <option>Luxury Estate</option>
                            <option>Investment Property</option>
                        </select>
                    </div>
                    <div>
                        <label class="form-label">Neighborhood/Area</label>
                        <input type="text" id="prop-neighborhood" class="form-input" placeholder="Hyde Park">
                    </div>
                </div>

                <div class="grid-4" style="margin-bottom: 1rem;">
                    <div>
                        <label class="form-label">Beds</label>
                        <input type="number" id="prop-beds" class="form-input" placeholder="3">
                    </div>
                    <div>
                        <label class="form-label">Baths</label>
                        <input type="text" id="prop-baths" class="form-input" placeholder="2">
                    </div>
                    <div>
                        <label class="form-label">Sq Ft</label>
                        <input type="text" id="prop-sqft" class="form-input" placeholder="2,000">
                    </div>
                    <div>
                        <label class="form-label">Year Built</label>
                        <input type="text" id="prop-year" class="form-input" placeholder="1990">
                    </div>
                </div>

                <div style="margin-bottom: 1rem;">
                    <label class="form-label">Key Features & Upgrades</label>
                    <textarea id="prop-features" class="form-input" rows="2" placeholder="Updated kitchen, new roof (2023), hardwood floors, finished basement"></textarea>
                </div>

                <div class="grid-2" style="margin-bottom: 1rem;">
                    <div>
                        <label class="form-label">Lot Size (acres)</label>
                        <input type="text" id="prop-lot" class="form-input" placeholder="0.25">
                    </div>
                    <div>
                        <label class="form-label">Garage</label>
                        <select id="prop-garage" class="form-input">
                            <option>2-Car Attached</option>
                            <option>1-Car Attached</option>
                            <option>2-Car Detached</option>
                            <option>1-Car Detached</option>
                            <option>Carport</option>
                            <option>None</option>
                        </select>
                    </div>
                </div>

                <div style="margin-bottom: 1rem;">
                    <label class="form-label">Condition</label>
                    <select id="prop-condition" class="form-input">
                        <option>Excellent (Move-in Ready, Updated)</option>
                        <option>Good (Well Maintained)</option>
                        <option>Average (Some Updates Needed)</option>
                        <option>Fair (Needs Work)</option>
                        <option>Poor (Major Renovation Needed)</option>
                    </select>
                </div>

                <button class="btn btn-gradient btn-lg" style="width: 100%;" onclick="analyzeProperty()">&#129302; Analyze Property</button>
            </div>

            <!-- VALUATION RESULTS -->
            <div class="card">
                <div class="card-header">
                    <span class="card-title">&#128200; AI Valuation Results</span>
                    <button class="btn btn-sm" onclick="copyAIContent('prop-results')">&#128203; Copy</button>
                </div>
                <div id="prop-results" style="background: #f8f9fa; padding: 1rem; border-radius: 8px; min-height: 400px;">
                    <p style="color: #666; text-align: center; margin-top: 150px;">Enter property details and click "Analyze Property" to get AI-powered valuation, comparable sales, and market insights.</p>
                </div>
            </div>
        </div>

        <!-- QUICK ANALYSIS CARDS -->
        <div class="grid-4" style="margin-top: 1rem;">
            <div class="stat-card" style="border-left-color: #667eea;">
                <div class="stat-number" id="prop-est-value">--</div>
                <div class="stat-label">Estimated Value</div>
            </div>
            <div class="stat-card" style="border-left-color: #22c55e;">
                <div class="stat-number" id="prop-price-sqft">--</div>
                <div class="stat-label">Price/Sq Ft</div>
            </div>
            <div class="stat-card" style="border-left-color: #f39c12;">
                <div class="stat-number" id="prop-days-market">--</div>
                <div class="stat-label">Avg Days on Market</div>
            </div>
            <div class="stat-card" style="border-left-color: #e74c3c;">
                <div class="stat-number" id="prop-comps">--</div>
                <div class="stat-label">Similar Sales (90 days)</div>
            </div>
        </div>
    </section>`;
}

async function analyzeProperty() {
    const address = document.getElementById('prop-address').value;
    const type = document.getElementById('prop-type').value;
    const neighborhood = document.getElementById('prop-neighborhood').value;
    const beds = document.getElementById('prop-beds').value;
    const baths = document.getElementById('prop-baths').value;
    const sqft = document.getElementById('prop-sqft').value;
    const year = document.getElementById('prop-year').value;
    const features = document.getElementById('prop-features').value;
    const lot = document.getElementById('prop-lot').value;
    const garage = document.getElementById('prop-garage').value;
    const condition = document.getElementById('prop-condition').value;

    if (!address || !beds || !sqft) {
        showToast('Please fill in address, beds, and square footage at minimum', 'error');
        return;
    }

    document.getElementById('prop-results').innerHTML = '<div style="text-align: center; padding: 3rem;"><div class="spinner"></div><p style="margin-top: 1rem; color: #666;">AI is analyzing property and fetching market data...</p></div>';

    const prompt = `You are a real estate valuation expert for the Greater Cincinnati, Ohio market. Analyze this property and provide a detailed valuation report:

PROPERTY DETAILS:
- Address: ${address}
- Type: ${type}
- Neighborhood: ${neighborhood || 'Not specified'}
- Bedrooms: ${beds}
- Bathrooms: ${baths}
- Square Feet: ${sqft}
- Year Built: ${year || 'Unknown'}
- Key Features: ${features || 'Standard'}
- Lot Size: ${lot || 'Standard'} acres
- Garage: ${garage}
- Condition: ${condition}

CURRENT MARKET DATA (January 2026):
- Cincinnati Median Home Price: $${LIVE_DATA.cincinnatiMedianPrice.toLocaleString()}
- Year-over-Year Price Change: +${LIVE_DATA.cincinnatiPriceChange}%
- Current Mortgage Rate: ${LIVE_DATA.mortgageRate}%
- Housing Inventory: ${LIVE_DATA.inventory} months supply

Provide a comprehensive analysis including:
1. **ESTIMATED VALUE RANGE** - Give low, mid, and high estimates with reasoning
2. **PRICE PER SQUARE FOOT** - Compare to neighborhood averages
3. **COMPARABLE SALES** - Describe 3 hypothetical recent comparable sales
4. **MARKET POSITION** - Is this property priced competitively?
5. **INVESTMENT ANALYSIS** - Potential rental income, cap rate estimate
6. **SELLING STRATEGY** - Recommended list price and marketing approach
7. **DAYS ON MARKET PREDICTION** - Based on condition and price point

Format with clear headers and bullet points. Be specific with numbers and percentages.`;

    const systemPrompt = `You are an expert real estate appraiser and market analyst specializing in the Greater Cincinnati market. Provide accurate, data-driven valuations. Use current January 2026 market conditions. Be specific with dollar amounts and percentages. Format output for easy reading with headers and bullet points.`;

    const result = await callGeminiAPI(prompt, systemPrompt);

    if (result) {
        document.getElementById('prop-results').innerHTML = `<div style="white-space: pre-wrap; font-size: 0.9rem; line-height: 1.6;">${result}</div>`;

        // Update stat cards with estimates (extract from result or use placeholders)
        document.getElementById('prop-est-value').textContent = '$' + (parseInt(sqft.replace(/,/g, '')) * 150).toLocaleString();
        document.getElementById('prop-price-sqft').textContent = '$150';
        document.getElementById('prop-days-market').textContent = '18';
        document.getElementById('prop-comps').textContent = '12';

        showToast('Property analysis complete!');
    } else {
        document.getElementById('prop-results').innerHTML = '<p style="color: #e74c3c; text-align: center;">Failed to analyze property. Please check your API configuration in Settings.</p>';
    }
}

// ========== AI CLIENT MATCHER - Match Leads to Properties ==========
function renderAIClientMatcher() {
    return `
    <section class="page-section" id="page-ai-matcher">
        <div class="page-header" style="background: linear-gradient(135deg, #667eea, #764ba2);">
            <h2>&#129309; AI Client Matcher</h2>
            <p>Automatically match your leads to properties based on their preferences and behavior</p>
        </div>

        <div class="grid-3" style="margin-bottom: 1rem;">
            <div class="stat-card" style="background: linear-gradient(135deg, #667eea, #764ba2); color: white;">
                <div class="stat-number" id="matcher-leads">0</div>
                <div class="stat-label">Active Leads</div>
            </div>
            <div class="stat-card" style="background: linear-gradient(135deg, #22c55e, #16a34a); color: white;">
                <div class="stat-number" id="matcher-matches">0</div>
                <div class="stat-label">Potential Matches</div>
            </div>
            <div class="stat-card" style="background: linear-gradient(135deg, #f39c12, #e67e22); color: white;">
                <div class="stat-number" id="matcher-hot">0</div>
                <div class="stat-label">High-Intent Matches</div>
            </div>
        </div>

        <div class="grid-2">
            <!-- PROPERTY INPUT FOR MATCHING -->
            <div class="card">
                <div class="card-header">
                    <span class="card-title">&#127968; Enter New Listing to Match</span>
                </div>
                <p style="font-size: 0.85rem; color: #666; margin-bottom: 1rem;">Enter listing details to find matching clients from your lead database</p>

                <div style="margin-bottom: 1rem;">
                    <label class="form-label">Listing Address / MLS#</label>
                    <input type="text" id="match-address" class="form-input" placeholder="123 Oak Lane, Anderson Township, OH">
                </div>

                <div class="grid-2" style="margin-bottom: 1rem;">
                    <div>
                        <label class="form-label">List Price</label>
                        <input type="text" id="match-price" class="form-input" placeholder="$425,000">
                    </div>
                    <div>
                        <label class="form-label">Property Type</label>
                        <select id="match-type" class="form-input">
                            <option>Single Family</option>
                            <option>Condo/Townhouse</option>
                            <option>Multi-Family</option>
                            <option>New Construction</option>
                        </select>
                    </div>
                </div>

                <div class="grid-3" style="margin-bottom: 1rem;">
                    <div>
                        <label class="form-label">Beds</label>
                        <input type="number" id="match-beds" class="form-input" placeholder="4">
                    </div>
                    <div>
                        <label class="form-label">Baths</label>
                        <input type="text" id="match-baths" class="form-input" placeholder="2.5">
                    </div>
                    <div>
                        <label class="form-label">Sq Ft</label>
                        <input type="text" id="match-sqft" class="form-input" placeholder="2,800">
                    </div>
                </div>

                <div style="margin-bottom: 1rem;">
                    <label class="form-label">Neighborhood/School District</label>
                    <input type="text" id="match-neighborhood" class="form-input" placeholder="Anderson Township, Forest Hills Schools">
                </div>

                <div style="margin-bottom: 1rem;">
                    <label class="form-label">Key Features</label>
                    <textarea id="match-features" class="form-input" rows="2" placeholder="Pool, finished basement, updated kitchen, large yard"></textarea>
                </div>

                <button class="btn btn-gradient btn-lg" style="width: 100%;" onclick="findMatchingClients()">&#129302; Find Matching Clients</button>
            </div>

            <!-- MATCHING RESULTS -->
            <div class="card">
                <div class="card-header">
                    <span class="card-title">&#128101; Matching Clients</span>
                </div>
                <div id="match-results" style="max-height: 500px; overflow-y: auto;">
                    ${renderMatchingClients()}
                </div>
            </div>
        </div>

        <!-- REVERSE MATCH - Find Properties for Client -->
        <div class="card" style="margin-top: 1rem;">
            <div class="card-header">
                <span class="card-title">&#128269; Reverse Match - Find Properties for a Client</span>
            </div>
            <p style="font-size: 0.85rem; color: #666; margin-bottom: 1rem;">Select a lead and AI will suggest ideal properties based on their criteria</p>
            <div class="grid-3">
                <div>
                    <label class="form-label">Select Lead</label>
                    <select id="reverse-lead" class="form-input" onchange="loadLeadPreferences()">
                        <option value="">-- Select a Lead --</option>
                        ${getLeadsForSelect()}
                    </select>
                </div>
                <div>
                    <label class="form-label">Budget Range</label>
                    <input type="text" id="reverse-budget" class="form-input" placeholder="$300K - $450K" readonly>
                </div>
                <div>
                    <label class="form-label">Preferred Areas</label>
                    <input type="text" id="reverse-areas" class="form-input" placeholder="Hyde Park, Oakley" readonly>
                </div>
            </div>
            <button class="btn btn-primary" style="margin-top: 1rem;" onclick="findPropertiesForClient()">&#127968; Find Matching Properties</button>
            <div id="reverse-results" style="margin-top: 1rem;"></div>
        </div>
    </section>`;
}

function renderMatchingClients() {
    const leads = JSON.parse(localStorage.getItem('elaLeads') || '[]');
    if (leads.length === 0) {
        return `<div style="text-align: center; padding: 2rem; color: #666;">
            <p>No leads in your database yet.</p>
            <button class="btn btn-primary" onclick="document.querySelector('[data-page=leads]').click()">Add Leads</button>
        </div>`;
    }
    return '<p style="color: #666; text-align: center; padding: 2rem;">Enter listing details and click "Find Matching Clients" to see AI-matched leads.</p>';
}

function getLeadsForSelect() {
    const leads = JSON.parse(localStorage.getItem('elaLeads') || '[]');
    return leads.map(l => `<option value="${l.id}">${l.name} - ${l.type || 'Buyer'}</option>`).join('');
}

function loadLeadPreferences() {
    const leadId = document.getElementById('reverse-lead').value;
    const leads = JSON.parse(localStorage.getItem('elaLeads') || '[]');
    const lead = leads.find(l => l.id === leadId);
    if (lead) {
        document.getElementById('reverse-budget').value = lead.budget || 'Not specified';
        document.getElementById('reverse-areas').value = lead.preferredAreas || lead.notes || 'Not specified';
    }
}

async function findMatchingClients() {
    const address = document.getElementById('match-address').value;
    const price = document.getElementById('match-price').value;
    const type = document.getElementById('match-type').value;
    const beds = document.getElementById('match-beds').value;
    const baths = document.getElementById('match-baths').value;
    const sqft = document.getElementById('match-sqft').value;
    const neighborhood = document.getElementById('match-neighborhood').value;
    const features = document.getElementById('match-features').value;

    const leads = JSON.parse(localStorage.getItem('elaLeads') || '[]');

    if (leads.length === 0) {
        showToast('No leads in database. Add leads first!', 'warning');
        return;
    }

    document.getElementById('match-results').innerHTML = '<div style="text-align: center; padding: 2rem;"><div class="spinner"></div><p style="margin-top: 1rem;">AI is analyzing lead preferences...</p></div>';

    const leadsInfo = leads.slice(0, 20).map(l => `- ${l.name}: ${l.type || 'Buyer'}, Budget: ${l.budget || 'Unknown'}, Timeline: ${l.timeline || 'Unknown'}, Notes: ${l.notes || 'None'}`).join('\\n');

    const prompt = `You are a real estate matching expert. Match this new listing to potential buyers from the lead database.

NEW LISTING:
- Address: ${address}
- Price: ${price}
- Type: ${type}
- Beds/Baths: ${beds}/${baths}
- Sq Ft: ${sqft}
- Area: ${neighborhood}
- Features: ${features}

LEAD DATABASE:
${leadsInfo}

For each lead that could be a match, provide:
1. Match score (0-100%)
2. Why they're a good match
3. Suggested approach to contact them about this listing
4. Any concerns or objections to address

Rank matches from best to worst. Be specific about why each lead matches or doesn't match.`;

    const result = await callGeminiAPI(prompt, 'You are an expert real estate CRM and lead matching specialist. Analyze leads against property criteria and provide actionable matching recommendations.');

    if (result) {
        document.getElementById('match-results').innerHTML = `<div style="white-space: pre-wrap; font-size: 0.9rem; line-height: 1.6;">${result}</div>`;
        document.getElementById('matcher-matches').textContent = Math.min(leads.length, 5);
        document.getElementById('matcher-hot').textContent = Math.min(leads.length, 2);
        showToast('Client matching complete!');
    } else {
        document.getElementById('match-results').innerHTML = '<p style="color: #e74c3c;">Failed to match clients. Check API configuration.</p>';
    }
}

async function findPropertiesForClient() {
    const leadId = document.getElementById('reverse-lead').value;
    if (!leadId) {
        showToast('Please select a lead first', 'warning');
        return;
    }

    const leads = JSON.parse(localStorage.getItem('elaLeads') || '[]');
    const lead = leads.find(l => l.id === leadId);

    document.getElementById('reverse-results').innerHTML = '<div style="text-align: center; padding: 1rem;"><div class="spinner"></div></div>';

    const prompt = `You are a real estate agent helping find the perfect property for this client:

CLIENT PROFILE:
- Name: ${lead.name}
- Type: ${lead.type || 'Buyer'}
- Budget: ${lead.budget || 'Unknown'}
- Timeline: ${lead.timeline || 'Unknown'}
- Pre-Approved: ${lead.preApproved || 'Unknown'}
- Notes/Preferences: ${lead.notes || 'None specified'}

MARKET DATA:
- Cincinnati Median: $${LIVE_DATA.cincinnatiMedianPrice.toLocaleString()}
- Mortgage Rate: ${LIVE_DATA.mortgageRate}%

Based on this client's profile, recommend:
1. **IDEAL NEIGHBORHOODS** - 3-5 areas that would match their criteria
2. **PROPERTY CRITERIA** - Specific beds, baths, sq ft, features to look for
3. **SEARCH STRATEGY** - How to find their perfect home
4. **TALKING POINTS** - What to highlight when showing properties
5. **SAMPLE PROPERTIES** - Describe 3 hypothetical properties that would be perfect matches

Be specific and actionable.`;

    const result = await callGeminiAPI(prompt, 'You are a buyer\'s agent expert helping match clients to their ideal properties in the Cincinnati market.');

    if (result) {
        document.getElementById('reverse-results').innerHTML = `<div style="background: #f8f9fa; padding: 1rem; border-radius: 8px; white-space: pre-wrap; font-size: 0.9rem;">${result}</div>`;
        showToast('Property recommendations ready!');
    }
}

// ========== AI MARKET PREDICTOR - Forecast Trends ==========
function renderAIMarketPredictor() {
    return `
    <section class="page-section" id="page-ai-predictor">
        <div class="page-header" style="background: linear-gradient(135deg, #667eea, #764ba2);">
            <h2>&#128202; AI Market Predictor</h2>
            <p>Forecast market trends, price movements, and optimal timing for buying/selling</p>
        </div>

        <div class="grid-4" style="margin-bottom: 1rem;">
            <div class="stat-card" style="border-left-color: #667eea;">
                <div class="stat-number">${LIVE_DATA.mortgageRate}%</div>
                <div class="stat-label">Current Rate</div>
                <div class="stat-change ${LIVE_DATA.rateChange < 0 ? 'up' : 'down'}">${LIVE_DATA.rateChange > 0 ? '+' : ''}${LIVE_DATA.rateChange}% this week</div>
            </div>
            <div class="stat-card" style="border-left-color: #22c55e;">
                <div class="stat-number">$${(LIVE_DATA.cincinnatiMedianPrice/1000).toFixed(0)}K</div>
                <div class="stat-label">Cincinnati Median</div>
                <div class="stat-change up">+${LIVE_DATA.cincinnatiPriceChange}% YoY</div>
            </div>
            <div class="stat-card" style="border-left-color: #f39c12;">
                <div class="stat-number">${LIVE_DATA.inventory}</div>
                <div class="stat-label">Months Inventory</div>
                <div class="stat-change">Seller's Market</div>
            </div>
            <div class="stat-card" style="border-left-color: #e74c3c;">
                <div class="stat-number">$${(LIVE_DATA.nationalMedianPrice/1000).toFixed(0)}K</div>
                <div class="stat-label">National Median</div>
            </div>
        </div>

        <div class="grid-2">
            <!-- PREDICTION REQUEST -->
            <div class="card">
                <div class="card-header">
                    <span class="card-title">&#128302; Generate Market Prediction</span>
                </div>

                <div style="margin-bottom: 1rem;">
                    <label class="form-label">Prediction Type</label>
                    <select id="predict-type" class="form-input">
                        <option value="price">Price Movement Forecast</option>
                        <option value="rates">Interest Rate Forecast</option>
                        <option value="inventory">Inventory Forecast</option>
                        <option value="neighborhood">Neighborhood Growth Prediction</option>
                        <option value="timing">Best Time to Buy/Sell</option>
                        <option value="comprehensive">Comprehensive Market Outlook</option>
                    </select>
                </div>

                <div style="margin-bottom: 1rem;">
                    <label class="form-label">Timeframe</label>
                    <select id="predict-timeframe" class="form-input">
                        <option value="30">Next 30 Days</option>
                        <option value="90">Next 90 Days</option>
                        <option value="180">Next 6 Months</option>
                        <option value="365" selected>Next 12 Months</option>
                    </select>
                </div>

                <div style="margin-bottom: 1rem;">
                    <label class="form-label">Focus Area (optional)</label>
                    <select id="predict-area" class="form-input">
                        <option value="">All Greater Cincinnati</option>
                        <option value="Hyde Park">Hyde Park</option>
                        <option value="Oakley">Oakley</option>
                        <option value="Anderson Township">Anderson Township</option>
                        <option value="Mason">Mason</option>
                        <option value="West Chester">West Chester</option>
                        <option value="Blue Ash">Blue Ash</option>
                        <option value="Montgomery">Montgomery</option>
                        <option value="Indian Hill">Indian Hill</option>
                        <option value="Northern Kentucky">Northern Kentucky</option>
                    </select>
                </div>

                <div style="margin-bottom: 1rem;">
                    <label class="form-label">Client Scenario (optional)</label>
                    <textarea id="predict-scenario" class="form-input" rows="2" placeholder="E.g., First-time buyer with $400K budget considering Hyde Park vs Mason"></textarea>
                </div>

                <button class="btn btn-gradient btn-lg" style="width: 100%;" onclick="generatePrediction()">&#129302; Generate Prediction</button>
            </div>

            <!-- PREDICTION RESULTS -->
            <div class="card">
                <div class="card-header">
                    <span class="card-title">&#128200; AI Market Prediction</span>
                    <button class="btn btn-sm" onclick="copyAIContent('predict-results')">&#128203; Copy</button>
                </div>
                <div id="predict-results" style="background: #f8f9fa; padding: 1rem; border-radius: 8px; min-height: 350px; overflow-y: auto;">
                    <p style="color: #666; text-align: center; margin-top: 120px;">Select prediction type and click "Generate Prediction" to see AI-powered market forecasts.</p>
                </div>
            </div>
        </div>

        <!-- QUICK INSIGHTS -->
        <div class="card" style="margin-top: 1rem;">
            <div class="card-header">
                <span class="card-title">&#128161; Quick Market Insights</span>
            </div>
            <div class="grid-3">
                <div style="padding: 1rem; background: linear-gradient(135deg, #e8f5e920, #c8e6c920); border-radius: 8px; cursor: pointer;" onclick="quickPredict('buyer')">
                    <h4 style="color: #22c55e;">&#127968; Buyer Outlook</h4>
                    <p style="font-size: 0.85rem; color: #666;">Is now a good time to buy?</p>
                </div>
                <div style="padding: 1rem; background: linear-gradient(135deg, #fff3e020, #ffe0b220); border-radius: 8px; cursor: pointer;" onclick="quickPredict('seller')">
                    <h4 style="color: #f39c12;">&#128181; Seller Outlook</h4>
                    <p style="font-size: 0.85rem; color: #666;">Should sellers list now or wait?</p>
                </div>
                <div style="padding: 1rem; background: linear-gradient(135deg, #e3f2fd20, #bbdefb20); border-radius: 8px; cursor: pointer;" onclick="quickPredict('investment')">
                    <h4 style="color: #2196f3;">&#128200; Investment Outlook</h4>
                    <p style="font-size: 0.85rem; color: #666;">Best areas for investment ROI</p>
                </div>
            </div>
        </div>
    </section>`;
}

async function generatePrediction() {
    const type = document.getElementById('predict-type').value;
    const timeframe = document.getElementById('predict-timeframe').value;
    const area = document.getElementById('predict-area').value;
    const scenario = document.getElementById('predict-scenario').value;

    document.getElementById('predict-results').innerHTML = '<div style="text-align: center; padding: 3rem;"><div class="spinner"></div><p style="margin-top: 1rem; color: #666;">AI is analyzing market data and generating forecast...</p></div>';

    const typeLabels = {
        price: 'home price movements',
        rates: 'mortgage interest rate trends',
        inventory: 'housing inventory levels',
        neighborhood: 'neighborhood appreciation and growth',
        timing: 'optimal timing for buying or selling',
        comprehensive: 'overall real estate market conditions'
    };

    const prompt = `You are a real estate market analyst and economist specializing in the Greater Cincinnati market. Generate a detailed ${typeLabels[type]} prediction.

CURRENT MARKET DATA (January 2026):
- Cincinnati Median Home Price: $${LIVE_DATA.cincinnatiMedianPrice.toLocaleString()} (up ${LIVE_DATA.cincinnatiPriceChange}% YoY)
- National Median: $${LIVE_DATA.nationalMedianPrice.toLocaleString()}
- 30-Year Mortgage Rate: ${LIVE_DATA.mortgageRate}% (changed ${LIVE_DATA.rateChange}% this week)
- Housing Inventory: ${LIVE_DATA.inventory} months supply
- Market Type: ${LIVE_DATA.inventory < 4 ? "Seller's Market" : LIVE_DATA.inventory > 6 ? "Buyer's Market" : "Balanced Market"}

PREDICTION REQUEST:
- Forecast Type: ${typeLabels[type]}
- Timeframe: Next ${timeframe} days
- Focus Area: ${area || 'Greater Cincinnati overall'}
${scenario ? `- Client Scenario: ${scenario}` : ''}

Provide a comprehensive prediction including:
1. **EXECUTIVE SUMMARY** - Key takeaways in 2-3 sentences
2. **DETAILED FORECAST** - Specific predictions with numbers and percentages
3. **KEY DRIVERS** - Factors influencing the prediction
4. **RISKS & UNCERTAINTIES** - What could change the forecast
5. **ACTIONABLE ADVICE** - What should buyers/sellers do based on this forecast
6. **CONFIDENCE LEVEL** - How confident is this prediction (Low/Medium/High)

Be specific with numbers, percentages, and timeframes. Use bullet points for clarity.`;

    const result = await callGeminiAPI(prompt, 'You are an expert real estate economist providing data-driven market predictions for the Cincinnati metro area. Be specific, use numbers, and provide actionable insights.');

    if (result) {
        document.getElementById('predict-results').innerHTML = `<div style="white-space: pre-wrap; font-size: 0.9rem; line-height: 1.6;">${result}</div>`;
        showToast('Market prediction generated!');
    } else {
        document.getElementById('predict-results').innerHTML = '<p style="color: #e74c3c; text-align: center;">Failed to generate prediction. Check API configuration.</p>';
    }
}

async function quickPredict(type) {
    const prompts = {
        buyer: 'Is now (January 2026) a good time to buy a home in Greater Cincinnati? Consider current rates at ' + LIVE_DATA.mortgageRate + '%, median prices at $' + LIVE_DATA.cincinnatiMedianPrice.toLocaleString() + ', and inventory at ' + LIVE_DATA.inventory + ' months. Provide a clear recommendation with specific reasoning.',
        seller: 'Should home sellers in Greater Cincinnati list now in January 2026 or wait? Consider the current market conditions. Provide specific advice on timing, pricing strategy, and expected days on market.',
        investment: 'What are the best neighborhoods in Greater Cincinnati for real estate investment in 2026? Consider appreciation potential, rental yields, and growth factors. Recommend top 5 areas with specific reasoning.'
    };

    document.getElementById('predict-results').innerHTML = '<div style="text-align: center; padding: 3rem;"><div class="spinner"></div></div>';

    const result = await callGeminiAPI(prompts[type], 'You are a real estate investment advisor. Be specific and actionable.');

    if (result) {
        document.getElementById('predict-results').innerHTML = `<div style="white-space: pre-wrap; font-size: 0.9rem; line-height: 1.6;">${result}</div>`;
    }
}

// ========== AI OBJECTION HANDLER - Overcome Buyer/Seller Objections ==========
function renderAIObjectionHandler() {
    return `
    <section class="page-section" id="page-ai-objections">
        <div class="page-header" style="background: linear-gradient(135deg, #667eea, #764ba2);">
            <h2>&#128173; AI Objection Handler</h2>
            <p>Get AI-powered responses to overcome common buyer and seller objections</p>
        </div>

        <div class="grid-2">
            <!-- OBJECTION INPUT -->
            <div class="card">
                <div class="card-header">
                    <span class="card-title">&#128172; Enter Objection</span>
                </div>

                <div style="margin-bottom: 1rem;">
                    <label class="form-label">Client Type</label>
                    <div style="display: flex; gap: 0.5rem;">
                        <button class="btn btn-primary" id="obj-buyer-btn" onclick="setObjectionType('buyer')">&#127968; Buyer</button>
                        <button class="btn btn-outline" id="obj-seller-btn" onclick="setObjectionType('seller')">&#128181; Seller</button>
                    </div>
                </div>

                <div style="margin-bottom: 1rem;">
                    <label class="form-label">Common Objections</label>
                    <select id="obj-common" class="form-input" onchange="loadCommonObjection()">
                        <option value="">-- Select or type custom below --</option>
                        <optgroup label="Buyer Objections">
                            <option value="rates-high">Interest rates are too high</option>
                            <option value="prices-high">Home prices are too high</option>
                            <option value="wait-drop">I want to wait for prices to drop</option>
                            <option value="not-ready">I'm not ready to buy yet</option>
                            <option value="need-sell">I need to sell my home first</option>
                            <option value="down-payment">I don't have enough for a down payment</option>
                            <option value="bad-credit">My credit isn't good enough</option>
                            <option value="market-crash">I'm worried about a market crash</option>
                            <option value="think-about">I need to think about it</option>
                        </optgroup>
                        <optgroup label="Seller Objections">
                            <option value="commission">Your commission is too high</option>
                            <option value="sell-myself">I want to sell it myself (FSBO)</option>
                            <option value="not-right-time">It's not the right time to sell</option>
                            <option value="price-too-low">Your suggested price is too low</option>
                            <option value="another-agent">I'm talking to other agents</option>
                            <option value="no-rush">I'm in no rush to sell</option>
                            <option value="love-home">I love my home and don't want to leave</option>
                            <option value="repairs">I don't want to make repairs</option>
                        </optgroup>
                    </select>
                </div>

                <div style="margin-bottom: 1rem;">
                    <label class="form-label">Objection Details</label>
                    <textarea id="obj-details" class="form-input" rows="3" placeholder="Type the exact objection or add context..."></textarea>
                </div>

                <div style="margin-bottom: 1rem;">
                    <label class="form-label">Additional Context (optional)</label>
                    <textarea id="obj-context" class="form-input" rows="2" placeholder="E.g., First-time buyer, nervous about commitment, spouse not on board..."></textarea>
                </div>

                <div style="margin-bottom: 1rem;">
                    <label class="form-label">Response Style</label>
                    <select id="obj-style" class="form-input">
                        <option value="empathetic">Empathetic & Understanding</option>
                        <option value="data">Data-Driven & Logical</option>
                        <option value="story">Storytelling & Relatable</option>
                        <option value="urgent">Create Urgency</option>
                        <option value="all">All Approaches</option>
                    </select>
                </div>

                <button class="btn btn-gradient btn-lg" style="width: 100%;" onclick="handleObjection()">&#129302; Get Response Strategy</button>
            </div>

            <!-- RESPONSE -->
            <div class="card">
                <div class="card-header">
                    <span class="card-title">&#128161; AI Response Strategy</span>
                    <button class="btn btn-sm" onclick="copyAIContent('obj-response')">&#128203; Copy</button>
                </div>
                <div id="obj-response" style="background: #f8f9fa; padding: 1rem; border-radius: 8px; min-height: 400px; overflow-y: auto;">
                    <p style="color: #666; text-align: center; margin-top: 150px;">Select an objection type and enter details to get AI-powered response strategies.</p>
                </div>
            </div>
        </div>

        <!-- QUICK RESPONSES -->
        <div class="card" style="margin-top: 1rem;">
            <div class="card-header">
                <span class="card-title">&#9889; Quick Response Scripts</span>
            </div>
            <div class="grid-4">
                <div style="padding: 1rem; background: #e8f5e9; border-radius: 8px; cursor: pointer;" onclick="quickObjection('rates')">
                    <h4 style="color: #22c55e;">&#128200; "Rates are too high"</h4>
                    <p style="font-size: 0.8rem; color: #666;">Date the rate, marry the house</p>
                </div>
                <div style="padding: 1rem; background: #e3f2fd; border-radius: 8px; cursor: pointer;" onclick="quickObjection('commission')">
                    <h4 style="color: #2196f3;">&#128181; "Commission too high"</h4>
                    <p style="font-size: 0.8rem; color: #666;">Value justification script</p>
                </div>
                <div style="padding: 1rem; background: #fff3e0; border-radius: 8px; cursor: pointer;" onclick="quickObjection('wait')">
                    <h4 style="color: #f39c12;">&#128336; "Want to wait"</h4>
                    <p style="font-size: 0.8rem; color: #666;">Opportunity cost response</p>
                </div>
                <div style="padding: 1rem; background: #fce4ec; border-radius: 8px; cursor: pointer;" onclick="quickObjection('fsbo')">
                    <h4 style="color: #e91e63;">&#127968; "Sell it myself"</h4>
                    <p style="font-size: 0.8rem; color: #666;">FSBO value proposition</p>
                </div>
            </div>
        </div>
    </section>`;
}

let objectionType = 'buyer';

function setObjectionType(type) {
    objectionType = type;
    document.getElementById('obj-buyer-btn').className = type === 'buyer' ? 'btn btn-primary' : 'btn btn-outline';
    document.getElementById('obj-seller-btn').className = type === 'seller' ? 'btn btn-primary' : 'btn btn-outline';
}

function loadCommonObjection() {
    const value = document.getElementById('obj-common').value;
    const objections = {
        'rates-high': 'Interest rates are too high right now. I think I should wait.',
        'prices-high': 'Home prices are way too high. I can\'t afford anything decent.',
        'wait-drop': 'I want to wait for prices to drop before I buy.',
        'not-ready': 'I\'m just not ready to buy yet. Maybe in a year or two.',
        'need-sell': 'I need to sell my current home first before I can buy.',
        'down-payment': 'I don\'t have enough saved for a down payment.',
        'bad-credit': 'My credit score isn\'t good enough to get a good rate.',
        'market-crash': 'I\'m worried about a housing market crash.',
        'think-about': 'I need to think about it and talk to my spouse.',
        'commission': 'Your commission is too high. Other agents charge less.',
        'sell-myself': 'I think I can sell it myself and save the commission.',
        'not-right-time': 'It\'s not the right time to sell.',
        'price-too-low': 'Your suggested list price is too low. I think it\'s worth more.',
        'another-agent': 'I\'m interviewing other agents before I decide.',
        'no-rush': 'I\'m in no rush to sell. I\'ll wait for the right offer.',
        'love-home': 'I love my home and I\'m not sure I want to leave.',
        'repairs': 'I don\'t want to spend money on repairs before selling.'
    };
    document.getElementById('obj-details').value = objections[value] || '';
}

async function handleObjection() {
    const objection = document.getElementById('obj-details').value;
    const context = document.getElementById('obj-context').value;
    const style = document.getElementById('obj-style').value;

    if (!objection) {
        showToast('Please enter an objection', 'warning');
        return;
    }

    document.getElementById('obj-response').innerHTML = '<div style="text-align: center; padding: 3rem;"><div class="spinner"></div><p style="margin-top: 1rem; color: #666;">AI is crafting your response strategy...</p></div>';

    const styleGuide = {
        empathetic: 'Use empathy, acknowledge their concerns, and build rapport before responding',
        data: 'Use market statistics, data, and logical arguments',
        story: 'Use stories, examples, and relatable scenarios',
        urgent: 'Create appropriate urgency and highlight opportunity costs',
        all: 'Provide multiple approaches - empathetic, data-driven, and urgency-based'
    };

    const prompt = `You are an expert real estate sales coach. A ${objectionType} has raised this objection:

OBJECTION: "${objection}"

${context ? `ADDITIONAL CONTEXT: ${context}` : ''}

CURRENT MARKET DATA:
- Mortgage Rates: ${LIVE_DATA.mortgageRate}%
- Cincinnati Median Price: $${LIVE_DATA.cincinnatiMedianPrice.toLocaleString()}
- YoY Price Change: +${LIVE_DATA.cincinnatiPriceChange}%
- Inventory: ${LIVE_DATA.inventory} months (${LIVE_DATA.inventory < 4 ? "seller's market" : "balanced"})

RESPONSE STYLE: ${styleGuide[style]}

Provide a comprehensive response strategy:
1. **ACKNOWLEDGE** - How to validate their concern
2. **REFRAME** - How to shift their perspective
3. **RESPOND** - 2-3 specific talking points with scripts
4. **EVIDENCE** - Data or stories to support your response
5. **CLOSE** - How to move them forward
6. **FOLLOW-UP** - If they're still hesitant, what to say next

Include exact scripts and phrases to use. Make responses conversational and natural.`;

    const result = await callGeminiAPI(prompt, 'You are a top-producing real estate sales coach who has helped thousands of agents overcome objections. Provide specific, actionable scripts that feel natural and conversational.');

    if (result) {
        document.getElementById('obj-response').innerHTML = `<div style="white-space: pre-wrap; font-size: 0.9rem; line-height: 1.6;">${result}</div>`;
        showToast('Response strategy ready!');
    } else {
        document.getElementById('obj-response').innerHTML = '<p style="color: #e74c3c; text-align: center;">Failed to generate response. Check API configuration.</p>';
    }
}

async function quickObjection(type) {
    const objections = {
        rates: 'Interest rates are too high right now at ' + LIVE_DATA.mortgageRate + '%. I should wait for them to come down.',
        commission: 'Your commission is too high. I\'ve seen other agents who charge less.',
        wait: 'I want to wait and see what happens with the market. Maybe prices will drop.',
        fsbo: 'I think I can sell my home myself and save the commission.'
    };

    document.getElementById('obj-details').value = objections[type];
    if (type === 'commission' || type === 'fsbo') {
        setObjectionType('seller');
    } else {
        setObjectionType('buyer');
    }
    await handleObjection();
}

// ========== AI NEIGHBORHOOD EXPERT - Instant Area Info ==========
function renderAINeighborhoodExpert() {
    return `
    <section class="page-section" id="page-ai-neighborhood">
        <div class="page-header" style="background: linear-gradient(135deg, #667eea, #764ba2);">
            <h2>&#127961; AI Neighborhood Expert</h2>
            <p>Instant neighborhood information, school data, and area insights for any Greater Cincinnati location</p>
        </div>

        <div class="grid-2">
            <!-- NEIGHBORHOOD SEARCH -->
            <div class="card">
                <div class="card-header">
                    <span class="card-title">&#128269; Neighborhood Search</span>
                </div>

                <div style="margin-bottom: 1rem;">
                    <label class="form-label">Neighborhood or Address</label>
                    <input type="text" id="hood-search" class="form-input" placeholder="Hyde Park, Cincinnati" list="hood-suggestions">
                    <datalist id="hood-suggestions">
                        <option value="Hyde Park">
                        <option value="Oakley">
                        <option value="Mount Lookout">
                        <option value="Anderson Township">
                        <option value="Mason">
                        <option value="West Chester">
                        <option value="Blue Ash">
                        <option value="Montgomery">
                        <option value="Indian Hill">
                        <option value="Madeira">
                        <option value="Mariemont">
                        <option value="Terrace Park">
                        <option value="Loveland">
                        <option value="Fort Thomas, KY">
                        <option value="Newport, KY">
                        <option value="Covington, KY">
                        <option value="Over-the-Rhine">
                        <option value="Clifton">
                        <option value="Northside">
                        <option value="Pleasant Ridge">
                    </datalist>
                </div>

                <div style="margin-bottom: 1rem;">
                    <label class="form-label">What do you want to know?</label>
                    <div style="display: flex; flex-wrap: wrap; gap: 0.5rem;">
                        <label><input type="checkbox" id="hood-schools" checked> Schools</label>
                        <label><input type="checkbox" id="hood-safety" checked> Safety</label>
                        <label><input type="checkbox" id="hood-dining" checked> Dining</label>
                        <label><input type="checkbox" id="hood-shopping"> Shopping</label>
                        <label><input type="checkbox" id="hood-commute"> Commute</label>
                        <label><input type="checkbox" id="hood-parks"> Parks</label>
                        <label><input type="checkbox" id="hood-nightlife"> Nightlife</label>
                        <label><input type="checkbox" id="hood-families"> Family-Friendly</label>
                    </div>
                </div>

                <div style="margin-bottom: 1rem;">
                    <label class="form-label">Client Profile (optional)</label>
                    <select id="hood-profile" class="form-input">
                        <option value="">General Information</option>
                        <option value="young-professional">Young Professional</option>
                        <option value="family">Family with Kids</option>
                        <option value="retiree">Retiree/Empty Nester</option>
                        <option value="investor">Real Estate Investor</option>
                        <option value="first-time">First-Time Buyer</option>
                    </select>
                </div>

                <div style="margin-bottom: 1rem;">
                    <label class="form-label">Specific Questions (optional)</label>
                    <textarea id="hood-questions" class="form-input" rows="2" placeholder="E.g., How walkable is it? What's the nightlife like?"></textarea>
                </div>

                <button class="btn btn-gradient btn-lg" style="width: 100%;" onclick="analyzeNeighborhood()">&#129302; Analyze Neighborhood</button>
            </div>

            <!-- RESULTS -->
            <div class="card">
                <div class="card-header">
                    <span class="card-title">&#127969; Neighborhood Profile</span>
                    <button class="btn btn-sm" onclick="copyAIContent('hood-results')">&#128203; Copy</button>
                </div>
                <div id="hood-results" style="background: #f8f9fa; padding: 1rem; border-radius: 8px; min-height: 400px; overflow-y: auto;">
                    <p style="color: #666; text-align: center; margin-top: 150px;">Enter a neighborhood name to get AI-powered area insights.</p>
                </div>
            </div>
        </div>

        <!-- POPULAR NEIGHBORHOODS -->
        <div class="card" style="margin-top: 1rem;">
            <div class="card-header">
                <span class="card-title">&#11088; Popular Cincinnati Neighborhoods</span>
            </div>
            <div class="grid-5">
                ${['Hyde Park', 'Oakley', 'Anderson Township', 'Mason', 'Mount Lookout', 'Blue Ash', 'Indian Hill', 'Mariemont', 'Fort Thomas', 'Over-the-Rhine'].map(n => `
                    <div style="padding: 0.8rem; background: #f8f9fa; border-radius: 8px; text-align: center; cursor: pointer;" onclick="quickNeighborhood('${n}')">
                        <div style="font-size: 1.5rem;">&#127969;</div>
                        <div style="font-weight: 600; font-size: 0.9rem;">${n}</div>
                    </div>
                `).join('')}
            </div>
        </div>
    </section>`;
}

async function analyzeNeighborhood() {
    const neighborhood = document.getElementById('hood-search').value;
    if (!neighborhood) {
        showToast('Please enter a neighborhood name', 'warning');
        return;
    }

    const topics = [];
    if (document.getElementById('hood-schools').checked) topics.push('schools and education');
    if (document.getElementById('hood-safety').checked) topics.push('safety and crime rates');
    if (document.getElementById('hood-dining').checked) topics.push('restaurants and dining');
    if (document.getElementById('hood-shopping').checked) topics.push('shopping and retail');
    if (document.getElementById('hood-commute').checked) topics.push('commute and transportation');
    if (document.getElementById('hood-parks').checked) topics.push('parks and recreation');
    if (document.getElementById('hood-nightlife').checked) topics.push('nightlife and entertainment');
    if (document.getElementById('hood-families').checked) topics.push('family-friendliness');

    const profile = document.getElementById('hood-profile').value;
    const questions = document.getElementById('hood-questions').value;

    document.getElementById('hood-results').innerHTML = '<div style="text-align: center; padding: 3rem;"><div class="spinner"></div><p style="margin-top: 1rem; color: #666;">AI is researching neighborhood...</p></div>';

    const prompt = `You are a local Cincinnati real estate expert and neighborhood specialist. Provide a comprehensive guide to ${neighborhood}, Ohio.

TOPICS TO COVER:
${topics.map(t => '- ' + t).join('\\n')}

${profile ? `CLIENT PROFILE: ${profile} - tailor the information to their needs` : ''}
${questions ? `SPECIFIC QUESTIONS: ${questions}` : ''}

CURRENT MARKET DATA:
- Cincinnati Median: $${LIVE_DATA.cincinnatiMedianPrice.toLocaleString()}
- Market Trend: +${LIVE_DATA.cincinnatiPriceChange}% YoY

Provide detailed, locally-accurate information including:
1. **OVERVIEW** - What makes this neighborhood special
2. **REAL ESTATE** - Typical home prices, styles, and market conditions
3. **LIFESTYLE** - The vibe, who lives there, what it's known for
4. **DETAILED INSIGHTS** on each requested topic
5. **PROS & CONS** - Honest assessment
6. **BEST FOR** - What type of buyer/renter this is ideal for
7. **INSIDER TIPS** - Things only locals would know

Be specific with names of restaurants, schools, parks, etc. Include approximate price ranges where relevant.`;

    const result = await callGeminiAPI(prompt, 'You are a Cincinnati neighborhood expert with deep local knowledge. Provide accurate, detailed, and helpful information about Greater Cincinnati neighborhoods.');

    if (result) {
        document.getElementById('hood-results').innerHTML = `<div style="white-space: pre-wrap; font-size: 0.9rem; line-height: 1.6;">${result}</div>`;
        showToast('Neighborhood analysis complete!');
    } else {
        document.getElementById('hood-results').innerHTML = '<p style="color: #e74c3c; text-align: center;">Failed to analyze neighborhood. Check API configuration.</p>';
    }
}

function quickNeighborhood(name) {
    document.getElementById('hood-search').value = name;
    analyzeNeighborhood();
}

// ========== AI OPEN HOUSE ASSISTANT - Questions & Follow-up ==========
function renderAIOpenHouse() {
    return `
    <section class="page-section" id="page-ai-openhouse">
        <div class="page-header" style="background: linear-gradient(135deg, #667eea, #764ba2);">
            <h2>&#127970; AI Open House Assistant</h2>
            <p>Prepare for open houses with talking points, visitor questions, and follow-up scripts</p>
        </div>

        <div class="grid-2">
            <!-- OPEN HOUSE PREP -->
            <div class="card">
                <div class="card-header">
                    <span class="card-title">&#127968; Open House Preparation</span>
                </div>

                <div style="margin-bottom: 1rem;">
                    <label class="form-label">Property Address</label>
                    <input type="text" id="oh-address" class="form-input" placeholder="456 Oak Street, Hyde Park">
                </div>

                <div class="grid-2" style="margin-bottom: 1rem;">
                    <div>
                        <label class="form-label">List Price</label>
                        <input type="text" id="oh-price" class="form-input" placeholder="$525,000">
                    </div>
                    <div>
                        <label class="form-label">Beds/Baths</label>
                        <input type="text" id="oh-beds" class="form-input" placeholder="4 bed / 2.5 bath">
                    </div>
                </div>

                <div style="margin-bottom: 1rem;">
                    <label class="form-label">Key Features</label>
                    <textarea id="oh-features" class="form-input" rows="2" placeholder="Updated kitchen, original hardwoods, finished basement, large backyard"></textarea>
                </div>

                <div style="margin-bottom: 1rem;">
                    <label class="form-label">Potential Concerns</label>
                    <textarea id="oh-concerns" class="form-input" rows="2" placeholder="E.g., busy street, needs new roof in 5 years, dated bathrooms"></textarea>
                </div>

                <div style="margin-bottom: 1rem;">
                    <label class="form-label">What do you need?</label>
                    <select id="oh-type" class="form-input">
                        <option value="all">Complete Open House Prep</option>
                        <option value="talking">Talking Points & Features</option>
                        <option value="questions">Common Visitor Questions</option>
                        <option value="objections">Objection Responses</option>
                        <option value="followup">Follow-up Scripts</option>
                    </select>
                </div>

                <button class="btn btn-gradient btn-lg" style="width: 100%;" onclick="prepareOpenHouse()">&#129302; Generate Open House Guide</button>
            </div>

            <!-- RESULTS -->
            <div class="card">
                <div class="card-header">
                    <span class="card-title">&#128221; Open House Guide</span>
                    <button class="btn btn-sm" onclick="copyAIContent('oh-results')">&#128203; Copy</button>
                </div>
                <div id="oh-results" style="background: #f8f9fa; padding: 1rem; border-radius: 8px; min-height: 400px; overflow-y: auto;">
                    <p style="color: #666; text-align: center; margin-top: 150px;">Enter property details to generate your complete open house preparation guide.</p>
                </div>
            </div>
        </div>

        <!-- VISITOR FOLLOW-UP -->
        <div class="card" style="margin-top: 1rem;">
            <div class="card-header">
                <span class="card-title">&#128231; Quick Follow-up Generator</span>
            </div>
            <div class="grid-3">
                <div>
                    <label class="form-label">Visitor Name</label>
                    <input type="text" id="oh-visitor" class="form-input" placeholder="John Smith">
                </div>
                <div>
                    <label class="form-label">Interest Level</label>
                    <select id="oh-interest" class="form-input">
                        <option value="hot">Very Interested (Hot)</option>
                        <option value="warm">Somewhat Interested (Warm)</option>
                        <option value="cold">Just Looking (Cold)</option>
                    </select>
                </div>
                <div>
                    <label class="form-label">Notes</label>
                    <input type="text" id="oh-notes" class="form-input" placeholder="Loved the kitchen, worried about yard size">
                </div>
            </div>
            <button class="btn btn-primary" style="margin-top: 1rem;" onclick="generateFollowUp()">&#128231; Generate Follow-up Email</button>
            <div id="oh-followup" style="margin-top: 1rem;"></div>
        </div>
    </section>`;
}

async function prepareOpenHouse() {
    const address = document.getElementById('oh-address').value;
    const price = document.getElementById('oh-price').value;
    const beds = document.getElementById('oh-beds').value;
    const features = document.getElementById('oh-features').value;
    const concerns = document.getElementById('oh-concerns').value;
    const type = document.getElementById('oh-type').value;

    if (!address) {
        showToast('Please enter the property address', 'warning');
        return;
    }

    document.getElementById('oh-results').innerHTML = '<div style="text-align: center; padding: 3rem;"><div class="spinner"></div><p style="margin-top: 1rem; color: #666;">AI is preparing your open house guide...</p></div>';

    const typeGuides = {
        all: 'Complete open house preparation including talking points, anticipated questions, objection handling, and follow-up scripts',
        talking: 'Key talking points and feature highlights to mention during tours',
        questions: 'Common questions visitors will ask and how to answer them',
        objections: 'Potential objections and how to address them professionally',
        followup: 'Follow-up email and text scripts for different visitor types'
    };

    const prompt = `You are an experienced listing agent preparing for an open house. Create a ${typeGuides[type]}.

PROPERTY DETAILS:
- Address: ${address}
- List Price: ${price}
- Beds/Baths: ${beds}
- Key Features: ${features || 'Standard features'}
- Known Concerns: ${concerns || 'None specified'}

CURRENT MARKET:
- Mortgage Rate: ${LIVE_DATA.mortgageRate}%
- Cincinnati Median: $${LIVE_DATA.cincinnatiMedianPrice.toLocaleString()}

${type === 'all' ? `
Provide a complete guide with:
1. **PROPERTY HIGHLIGHTS** - Key selling points to emphasize
2. **TOUR SCRIPT** - How to guide visitors through the home
3. **ANTICIPATED QUESTIONS** - 10+ common questions with answers
4. **OBJECTION RESPONSES** - How to handle concerns
5. **NEIGHBORHOOD TALKING POINTS** - Area highlights
6. **FOLLOW-UP SCRIPTS** - Email/text templates for hot, warm, and cold leads
7. **CONVERSATION STARTERS** - How to engage visitors and qualify them
` : ''}

Be specific, practical, and provide exact scripts/phrases to use.`;

    const result = await callGeminiAPI(prompt, 'You are a top-producing listing agent who excels at open houses. Provide specific, actionable advice with exact scripts and talking points.');

    if (result) {
        document.getElementById('oh-results').innerHTML = `<div style="white-space: pre-wrap; font-size: 0.9rem; line-height: 1.6;">${result}</div>`;
        showToast('Open house guide ready!');
    } else {
        document.getElementById('oh-results').innerHTML = '<p style="color: #e74c3c; text-align: center;">Failed to generate guide. Check API configuration.</p>';
    }
}

async function generateFollowUp() {
    const visitor = document.getElementById('oh-visitor').value;
    const interest = document.getElementById('oh-interest').value;
    const notes = document.getElementById('oh-notes').value;
    const address = document.getElementById('oh-address').value || 'the property';

    if (!visitor) {
        showToast('Please enter the visitor name', 'warning');
        return;
    }

    document.getElementById('oh-followup').innerHTML = '<div style="text-align: center; padding: 1rem;"><div class="spinner"></div></div>';

    const prompt = `Write a follow-up email for an open house visitor:

- Visitor Name: ${visitor}
- Interest Level: ${interest}
- Property: ${address}
- Notes from visit: ${notes || 'General interest'}
- Agent: ${LIVE_DATA.ela.name} at ${LIVE_DATA.ela.brokerage}
- Phone: ${LIVE_DATA.ela.phone}

Create a personalized, warm email that:
1. Thanks them for coming
2. References something specific from their visit (use the notes)
3. Provides next steps based on their interest level
4. Includes a clear call to action
5. Feels personal, not template-like

Sign it from ${LIVE_DATA.ela.name}.`;

    const result = await callGeminiAPI(prompt, 'You are a real estate agent writing personalized follow-up emails. Be warm, professional, and include a clear call to action.');

    if (result) {
        document.getElementById('oh-followup').innerHTML = `
            <div style="background: #e8f5e9; padding: 1rem; border-radius: 8px; border-left: 4px solid #22c55e;">
                <div style="white-space: pre-wrap; font-size: 0.9rem; line-height: 1.6;">${result}</div>
                <button class="btn btn-success btn-sm" style="margin-top: 0.5rem;" onclick="copyAIContent('oh-followup')">&#128203; Copy Email</button>
            </div>`;
    }
}

// ========== AI CONTRACT REVIEWER - Analyze Contracts ==========
function renderAIContractReviewer() {
    return `
    <section class="page-section" id="page-ai-contract">
        <div class="page-header" style="background: linear-gradient(135deg, #667eea, #764ba2);">
            <h2>&#128220; AI Contract Reviewer</h2>
            <p>Get AI analysis of contract terms, clauses, and potential issues</p>
        </div>

        <div style="background: #fff3cd; padding: 1rem; border-radius: 8px; margin-bottom: 1rem; border-left: 4px solid #f39c12;">
            <strong>&#9888; Disclaimer:</strong> This AI tool provides general guidance only. It is not legal advice. Always consult with a licensed attorney for contract review and legal questions.
        </div>

        <div class="grid-2">
            <!-- CONTRACT INPUT -->
            <div class="card">
                <div class="card-header">
                    <span class="card-title">&#128196; Contract Details</span>
                </div>

                <div style="margin-bottom: 1rem;">
                    <label class="form-label">Contract Type</label>
                    <select id="contract-type" class="form-input">
                        <option value="purchase">Purchase Agreement</option>
                        <option value="listing">Listing Agreement</option>
                        <option value="offer">Offer/Counter-Offer</option>
                        <option value="lease">Lease Agreement</option>
                        <option value="addendum">Addendum/Amendment</option>
                        <option value="inspection">Inspection Contingency</option>
                        <option value="financing">Financing Contingency</option>
                    </select>
                </div>

                <div style="margin-bottom: 1rem;">
                    <label class="form-label">Your Role</label>
                    <select id="contract-role" class="form-input">
                        <option value="buyer-agent">Buyer's Agent</option>
                        <option value="seller-agent">Seller's/Listing Agent</option>
                        <option value="buyer">Buyer (Direct)</option>
                        <option value="seller">Seller (Direct)</option>
                    </select>
                </div>

                <div style="margin-bottom: 1rem;">
                    <label class="form-label">Key Terms to Review</label>
                    <textarea id="contract-terms" class="form-input" rows="4" placeholder="Paste specific contract language or describe the terms you want analyzed...

Example: 'Seller to provide $10,000 credit at closing. Inspection contingency expires in 5 days. Financing contingency requires 20% down.'"></textarea>
                </div>

                <div style="margin-bottom: 1rem;">
                    <label class="form-label">Specific Concerns or Questions</label>
                    <textarea id="contract-questions" class="form-input" rows="2" placeholder="E.g., Is this inspection timeline too short? What happens if financing falls through?"></textarea>
                </div>

                <button class="btn btn-gradient btn-lg" style="width: 100%;" onclick="reviewContract()">&#129302; Analyze Contract</button>
            </div>

            <!-- ANALYSIS RESULTS -->
            <div class="card">
                <div class="card-header">
                    <span class="card-title">&#128270; AI Analysis</span>
                    <button class="btn btn-sm" onclick="copyAIContent('contract-results')">&#128203; Copy</button>
                </div>
                <div id="contract-results" style="background: #f8f9fa; padding: 1rem; border-radius: 8px; min-height: 400px; overflow-y: auto;">
                    <p style="color: #666; text-align: center; margin-top: 150px;">Enter contract details to get AI-powered analysis and recommendations.</p>
                </div>
            </div>
        </div>

        <!-- QUICK REFERENCE -->
        <div class="card" style="margin-top: 1rem;">
            <div class="card-header">
                <span class="card-title">&#128161; Common Clause Questions</span>
            </div>
            <div class="grid-4">
                <div style="padding: 1rem; background: #e8f5e9; border-radius: 8px; cursor: pointer;" onclick="quickContract('inspection')">
                    <h4 style="color: #22c55e;">&#128269; Inspection</h4>
                    <p style="font-size: 0.8rem; color: #666;">Review inspection contingency</p>
                </div>
                <div style="padding: 1rem; background: #e3f2fd; border-radius: 8px; cursor: pointer;" onclick="quickContract('financing')">
                    <h4 style="color: #2196f3;">&#128181; Financing</h4>
                    <p style="font-size: 0.8rem; color: #666;">Review financing terms</p>
                </div>
                <div style="padding: 1rem; background: #fff3e0; border-radius: 8px; cursor: pointer;" onclick="quickContract('earnest')">
                    <h4 style="color: #f39c12;">&#128176; Earnest Money</h4>
                    <p style="font-size: 0.8rem; color: #666;">Earnest money terms</p>
                </div>
                <div style="padding: 1rem; background: #fce4ec; border-radius: 8px; cursor: pointer;" onclick="quickContract('closing')">
                    <h4 style="color: #e91e63;">&#128197; Closing</h4>
                    <p style="font-size: 0.8rem; color: #666;">Closing date & possession</p>
                </div>
            </div>
        </div>
    </section>`;
}

async function reviewContract() {
    const type = document.getElementById('contract-type').value;
    const role = document.getElementById('contract-role').value;
    const terms = document.getElementById('contract-terms').value;
    const questions = document.getElementById('contract-questions').value;

    if (!terms) {
        showToast('Please enter contract terms to analyze', 'warning');
        return;
    }

    document.getElementById('contract-results').innerHTML = '<div style="text-align: center; padding: 3rem;"><div class="spinner"></div><p style="margin-top: 1rem; color: #666;">AI is analyzing contract terms...</p></div>';

    const typeNames = {
        purchase: 'Real Estate Purchase Agreement',
        listing: 'Listing Agreement',
        offer: 'Offer/Counter-Offer',
        lease: 'Lease Agreement',
        addendum: 'Contract Addendum',
        inspection: 'Inspection Contingency',
        financing: 'Financing Contingency'
    };

    const roleNames = {
        'buyer-agent': "representing the buyer",
        'seller-agent': "representing the seller",
        'buyer': "as the buyer",
        'seller': "as the seller"
    };

    const prompt = `You are a real estate contract specialist reviewing a ${typeNames[type]}. The user is ${roleNames[role]}.

CONTRACT TERMS TO ANALYZE:
${terms}

${questions ? `SPECIFIC QUESTIONS: ${questions}` : ''}

Provide a comprehensive analysis including:

1. **SUMMARY** - Brief overview of what these terms mean
2. **KEY POINTS** - Important elements ${role.includes('buyer') ? 'for the buyer' : 'for the seller'}
3. **POTENTIAL RISKS** - What could go wrong or be problematic
4. **FAVORABLE TERMS** - What works in ${role.includes('buyer') ? 'the buyer\'s' : 'the seller\'s'} favor
5. **UNFAVORABLE TERMS** - What might need negotiation
6. **RECOMMENDED CHANGES** - Specific language to add, modify, or remove
7. **QUESTIONS TO ASK** - Things to clarify before signing
8. **RED FLAGS** - Any concerning language or missing protections

${questions ? '9. **ANSWERS TO YOUR QUESTIONS**' : ''}

Be specific and practical. Note: This is for educational purposes only, not legal advice.`;

    const result = await callGeminiAPI(prompt, 'You are a real estate contract specialist providing educational analysis of contract terms. Be specific about risks and recommendations. Always remind users this is not legal advice.');

    if (result) {
        document.getElementById('contract-results').innerHTML = `<div style="white-space: pre-wrap; font-size: 0.9rem; line-height: 1.6;">${result}</div>`;
        showToast('Contract analysis complete!');
    } else {
        document.getElementById('contract-results').innerHTML = '<p style="color: #e74c3c; text-align: center;">Failed to analyze contract. Check API configuration.</p>';
    }
}

function quickContract(type) {
    const prompts = {
        inspection: 'Standard inspection contingency: Buyer has 10 days from acceptance to complete inspections. Buyer may request repairs up to $5,000. If seller refuses, buyer may cancel and receive full earnest money refund.',
        financing: 'Financing contingency: Buyer must obtain conventional financing with 20% down at no more than 7% interest rate. Contingency expires 21 days from acceptance. Buyer must provide pre-approval within 5 days.',
        earnest: 'Earnest money: Buyer to deposit $10,000 within 3 business days of acceptance. Held by listing brokerage. Released to seller if buyer defaults after contingencies expire.',
        closing: 'Closing: Closing to occur on or before 45 days from acceptance. Possession at closing. Seller to vacate by 5pm on closing day. Per diem of $150/day if seller requires extended possession.'
    };
    document.getElementById('contract-terms').value = prompts[type];
    reviewContract();
}

// Update matcher stats on page load
function updateMatcherStats() {
    const leads = JSON.parse(localStorage.getItem('elaLeads') || '[]');
    const matcherLeads = document.getElementById('matcher-leads');
    if (matcherLeads) matcherLeads.textContent = leads.length;
}

// Initialize AI stats
document.addEventListener('DOMContentLoaded', function() {
    setTimeout(updateMatcherStats, 500);
});
</script>
<script>if("serviceWorker"in navigator){window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js").then(r=>console.log("SW:",r.scope)).catch(e=>console.log("SW err:",e));});}</script>
</body>
</html>
